!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0B1/":function(t,n,r){"use strict";r.r(n),r.d(n,"ProjectsModule",(function(){return ne}));var c,o=r("ofXK"),a=r("tyNb"),u=r("3Pt+"),s=r("fXoL"),l=((c=function(){function t(){e(this,t),this.key="projects"}return i(t,[{key:"saveProject",value:function(e){var t=this.getProjects();e.id=t.length+1,(t=t.filter((function(t){return t.id!=e.id}))).push(e),localStorage.setItem(this.key,JSON.stringify(t))}},{key:"updateProject",value:function(e,t){var i=this.getProjects(),n=i.findIndex((function(t){return t.id==e}));n>-1&&(i[n]=t,localStorage.setItem(this.key,JSON.stringify(i)))}},{key:"deleteProject",value:function(e){var t=this.getProjects().filter((function(t){return t.id!=e}));t&&localStorage.setItem(this.key,JSON.stringify(t))}},{key:"getProject",value:function(){var e=this.getProjects();return e.length>0?e[0]:null}},{key:"getProjects",value:function(){var e=localStorage.getItem(this.key);return e?JSON.parse(e):[]}},{key:"getProjectById",value:function(e){var t,i=localStorage.getItem(this.key);return i?null===(t=JSON.parse(i))||void 0===t?void 0:t.find((function(t){return t.id==e})):void 0}}]),t}()).\u0275fac=function(e){return new(e||c)},c.\u0275prov=s.Ib({token:c,factory:c.\u0275fac,providedIn:"root"}),c),b=r("aceb");function m(e,t){if(1&e){var i=s.Tb();s.Sb(0,"button",8),s.Zb("click",(function(){return s.nc(i),s.bc().cleanForm()})),s.xc(1,"Cancel"),s.Rb()}}function d(e,t){if(1&e&&(s.Sb(0,"span"),s.Sb(1,"a",17),s.xc(2,"Circuits"),s.Rb(),s.Rb()),2&e){var i=s.bc().$implicit;s.Bb(1),s.hc("routerLink","./circuits/"+i.id)}}function p(e,t){if(1&e){var i=s.Tb();s.Sb(0,"li",10),s.Nb(1,"input",11),s.Nb(2,"input",12),s.Sb(3,"button",13),s.Zb("click",(function(){s.nc(i);var e=t.$implicit;return s.bc(2).editProject(e.id)})),s.xc(4,"Edit"),s.Rb(),s.Sb(5,"button",14),s.Zb("click",(function(){s.nc(i);var e=t.$implicit;return s.bc(2).deleteProject(e.id)})),s.xc(6,"Delete"),s.Rb(),s.Sb(7,"a",15),s.xc(8,"Surfaces"),s.Rb(),s.vc(9,d,3,1,"span",16),s.Rb()}if(2&e){var n=t.$implicit;s.Bb(1),s.hc("value",n.id),s.Bb(1),s.hc("value",n.name),s.Bb(5),s.hc("routerLink","./surfaces/"+n.id),s.Bb(2),s.hc("ngIf",(null==n.surfaces?null:n.surfaces.length)>0)}}function f(e,t){if(1&e&&(s.Sb(0,"nb-card",2),s.Sb(1,"nb-card-header"),s.xc(2,"Proyects"),s.Rb(),s.Sb(3,"nb-card-body"),s.Sb(4,"ul"),s.vc(5,p,10,4,"li",9),s.Rb(),s.Rb(),s.Rb()),2&e){var i=s.bc();s.Bb(5),s.hc("ngForOf",i.projects)}}var h,v,S,y=((v=function(){function t(i,n){e(this,t),this.projectsService=i,this.fb=n}return i(t,[{key:"ngOnInit",value:function(){this.projectForm=this.fb.group({name:["",u.r.required]}),this.projects=this.projectsService.getProjects(),this.isEdit=!1}},{key:"saveProject",value:function(){var e,t;if(this.projectForm.invalid)alert("the form is invalid");else{if(this.isEdit){var i=this.projectForm.value;(null===(e=this.selectedProject)||void 0===e?void 0:e.surfaces)||(this.selectedProject.surfaces=[]),(null===(t=this.selectedProject)||void 0===t?void 0:t.circuits)||(this.selectedProject.circuits=[]),this.selectedProject.name=i.name,this.projectsService.updateProject(this.selectedProject.id,this.selectedProject)}else{var n=this.projectForm.value;n.surfaces=[],n.circuits=[],this.projectsService.saveProject(n)}this.cleanForm()}}},{key:"cleanForm",value:function(){this.isEdit=!1,this.projectForm.controls.name.setValue(""),this.projects=this.projectsService.getProjects()}},{key:"editProject",value:function(e){this.selectedProject=this.projectsService.getProjectById(e),this.projectForm.patchValue(this.selectedProject),this.isEdit=!0}},{key:"deleteProject",value:function(e){this.projectsService.deleteProject(e),this.cleanForm()}}]),t}()).\u0275fac=function(e){return new(e||v)(s.Mb(l),s.Mb(u.b))},v.\u0275cmp=s.Gb({type:v,selectors:[["projects"]],decls:14,vars:5,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Project Name","maxlength","100"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","type","text","disabled","",3,"value"],["nbInput","","type","text","disabled","","maxlength","100",3,"value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["nbButton","","outline","","status","info",3,"routerLink"],[4,"ngIf"],["nbButton","","outline","","status","success",3,"routerLink"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"nb-card",2),s.Sb(3,"nb-card-header"),s.xc(4,"Project"),s.Rb(),s.Sb(5,"nb-card-body"),s.Sb(6,"form",3),s.Nb(7,"input",4),s.Sb(8,"button",5),s.Zb("click",(function(){return t.saveProject()})),s.xc(9),s.Rb(),s.vc(10,m,2,0,"button",6),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(11,"div",0),s.Sb(12,"div",1),s.vc(13,f,6,1,"nb-card",7),s.Rb(),s.Rb()),2&e&&(s.Bb(6),s.hc("formGroup",t.projectForm),s.Bb(2),s.hc("disabled",t.projectForm.controls.name.hasError("required")),s.Bb(1),s.yc(t.isEdit?"Update Project":"Save Project"),s.Bb(1),s.hc("ngIf",t.isEdit),s.Bb(3),s.hc("ngIf",(null==t.projects?null:t.projects.length)>0))},directives:[b.j,b.k,b.i,u.s,u.k,u.d,b.v,u.a,u.j,u.c,u.f,b.g,o.m,o.l,a.f],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}"]}),v),g=((h=function(){function t(i){e(this,t),this.projectsService=i}return i(t,[{key:"saveSurface",value:function(e,t){var i=this.projectsService.getProjects(),n=i.findIndex((function(t){return t.id==e}));if(-1!=n){var r=i[n];r.surfaces||(r.surfaces=[]),r.surfaces.push(t),this.projectsService.updateProject(e,r)}}},{key:"updateSurface",value:function(e,t){var i,n=this.projectsService.getProjects(),r=n.findIndex((function(t){return t.id==e}));if(-1!=r){var c=null===(i=n[r])||void 0===i?void 0:i.surfaces;if(c){var o=c.findIndex((function(e){return e.environment==t.environment}));-1!=o&&(c[o]=t,n[r].surfaces=c,this.projectsService.updateProject(e,n[r]))}}}},{key:"deleteSurface",value:function(e,t){var i=this.projectsService.getProjects(),n=i.findIndex((function(t){return t.id==e}));if(-1!=n){var r=i[n];r.surfaces=r.surfaces.filter((function(e){return e.environment!=t})),this.projectsService.updateProject(e,r)}}},{key:"getSurface",value:function(e,t){var i=this.projectsService.getProjectById(e);return(null==i?void 0:i.surfaces)?null==i?void 0:i.surfaces.find((function(e){return e.environment==t})):null}},{key:"getSurfaces",value:function(e){var t=this.projectsService.getProjectById(e);return(null==t?void 0:t.surfaces)||[]}}]),t}()).\u0275fac=function(e){return new(e||h)(s.Wb(l))},h.\u0275prov=s.Ib({token:h,factory:h.\u0275fac,providedIn:"root"}),h),C=function(e){return e[e.Covered=0]="Covered",e[e.SemiCovered=1]="SemiCovered",e}({}),R=function(e){return e.Minimal="Minimal",e.Medium="Medium",e.High="High",e.Upper="Upper",e}({}),w=function(e){return e.IUG="IUG",e.TUG="TUG",e.IUE="IUE",e.TUE="TUE",e.LAP="LAP",e}({}),D=((S=function(){function t(){e(this,t)}return i(t,[{key:"totalSurfaceCovered",value:function(e){return e.reduce((function(e,t){return t.type==C.Covered?e+parseFloat((t.width*t.length).toFixed(2)):e+0}),0)}},{key:"totalSurfaceSemiCovered",value:function(e){return e.reduce((function(e,t){return t.type==C.SemiCovered?e+parseFloat((t.width*t.length).toFixed(2)):e+0}),0)}},{key:"totalSurface",value:function(e){return this.totalSurfaceCovered(e)+this.totalSurfaceSemiCovered(e)/2}},{key:"apparentPower",value:function(e){var t=this.calculateMaximumConsumptionDetermined(e);return parseFloat((t/.9/1e3).toFixed(2))}},{key:"circuitsByelectrificationDegree",value:function(e){var t=[];switch(e){case R.Minimal:case R.Medium:t.push(w.IUG),t.push(w.TUG);break;case R.High:default:t.push(w.IUG),t.push(w.IUG),t.push(w.TUG),t.push(w.TUG),t.push(w.TUE)}return t}},{key:"electrificationDegree",value:function(e,t){return e<=60&&t<=3.7?R.Minimal:e<=130&&t<=7?R.Medium:e<=200&&t<=11?R.High:R.Upper}},{key:"simultaneityCoefficient",value:function(e){switch(e){case R.Minimal:return 1;case R.Medium:return.9;case R.High:return.8;case R.Upper:return.7;default:return 0}}},{key:"maxNumberOfMouths",value:function(e){switch(e){case w.IUG:case w.TUG:return 15;case w.IUE:case w.TUE:return 12;default:return 0}}},{key:"powerLoad",value:function(e){switch(e){case w.IUG:return 810;case w.TUG:return 1980;case w.IUE:case w.TUE:return 2970;default:return 0}}},{key:"factorLoad",value:function(e){switch(e){case w.IUG:return.66;case w.TUG:case w.IUE:case w.TUE:return 1;default:return 0}}},{key:"calculateMaximumConsumptionDetermined",value:function(e){var t=0,i=this.calculateConsumptionOfEachMoment(e);return i.summerDayConsumptionDetermined>=t&&(t=i.summerDayConsumptionDetermined),i.summerNightConsumptionDetermined>=t&&(t=i.summerNightConsumptionDetermined),i.winterDayConsumptionDetermined>=t&&(t=i.winterDayConsumptionDetermined),i.winterNightConsumptionDetermined>=t&&(t=i.winterNightConsumptionDetermined),t}},{key:"calculateConsumptionOfEachMoment",value:function(e){return e.reduce((function(e,t){return t.artifacts.reduce((function(e,t){return t.summerDay&&(e.summerDayConsumptionDetermined+=t.powerConsumption),t.summerNight&&(e.summerNightConsumptionDetermined+=t.powerConsumption),t.winterDay&&(e.winterDayConsumptionDetermined+=t.powerConsumption),t.winterNight&&(e.winterNightConsumptionDetermined+=t.powerConsumption),e}),e)}),{summerDayConsumptionDetermined:0,summerNightConsumptionDetermined:0,winterDayConsumptionDetermined:0,winterNightConsumptionDetermined:0})}},{key:"circuitLAPTotal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,n=t.filter((function(e){return e.circuitType!=w.LAP})).reduce((function(t,i){return t+parseFloat((e.powerLoad(i.circuitType)*e.factorLoad(i.circuitType)).toFixed(2))}),0);return parseFloat((n*i).toFixed(2))}},{key:"circuitSubtotal",value:function(e){return parseFloat((this.powerLoad(e)*this.factorLoad(e)).toFixed(2))}},{key:"nominalSectionByCurrentIntensity",value:function(e){return this.tecnicalFeatures().find((function(t){return e<=t.allowableCurrentIntensityInPipes})).nominalSection}},{key:"tecnicalFeatures",value:function(){return[{nominalSection:.75,allowableCurrentIntensityInPipes:8},{nominalSection:1,allowableCurrentIntensityInPipes:10.5},{nominalSection:1.5,allowableCurrentIntensityInPipes:13},{nominalSection:2.5,allowableCurrentIntensityInPipes:18},{nominalSection:4,allowableCurrentIntensityInPipes:25},{nominalSection:6,allowableCurrentIntensityInPipes:32},{nominalSection:10,allowableCurrentIntensityInPipes:44},{nominalSection:16,allowableCurrentIntensityInPipes:59},{nominalSection:25,allowableCurrentIntensityInPipes:77},{nominalSection:35,allowableCurrentIntensityInPipes:96},{nominalSection:50,allowableCurrentIntensityInPipes:117},{nominalSection:70,allowableCurrentIntensityInPipes:149},{nominalSection:95,allowableCurrentIntensityInPipes:180},{nominalSection:120,allowableCurrentIntensityInPipes:208}]}},{key:"tensionDrops",value:function(){return[{circuitType:w.LAP,maxTensionDrop:1},{circuitType:w.IUG,maxTensionDrop:2},{circuitType:w.TUG,maxTensionDrop:2},{circuitType:w.IUE,maxTensionDrop:2},{circuitType:w.TUE,maxTensionDrop:2}]}},{key:"validateNominalSection",value:function(e,t,i,n,r){var c=i,o=this.sectionNominals().find((function(e){return e.circuitType==t.circuitType}));if(r&&t.circuitType==w.LAP){var a=e.findIndex((function(e){return e.nominalSection==c}));if(a>0&&i>o.minSectionNominal)return this.validateNominalSection(e,t,e[a-1].nominalSection,n,!1)}if(this.calcuteTensionDrop(t,i,n)>=this.tensionDrops().find((function(e){return e.circuitType==t.circuitType})).maxTensionDrop){var u=e.filter((function(e){return e.nominalSection>i}));return this.validateNominalSection(u,t,u[0].nominalSection,n,!1)}return i}},{key:"calcuteTensionDrop",value:function(e,t,i){var n=e.length,r=Math.pow(220,2);return parseFloat((200*i*n/(47.5*r*t)).toFixed(2))}},{key:"sectionNominals",value:function(){return[{circuitType:w.LAP,minSectionNominal:4},{circuitType:w.IUG,minSectionNominal:1.5},{circuitType:w.TUG,minSectionNominal:2.5},{circuitType:w.IUE,minSectionNominal:2.5},{circuitType:w.TUE,minSectionNominal:2.5}]}},{key:"calculateProtection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e;return t?this.protections().find((function(e){return i<=e.protectionValue})):this.protections().find((function(e){return i<e.protectionValue}))}},{key:"validateProtection",value:function(e,t){var i=t;return this.tecnicalFeatures().find((function(t){return t.nominalSection==e})),this.protections().find((function(e){return e.protectionValue<=i}))}},{key:"protections",value:function(){return[{protectionType:N.C05,protectionValue:.5},{protectionType:N.C1,protectionValue:1},{protectionType:N.C2,protectionValue:2},{protectionType:N.C3,protectionValue:3},{protectionType:N.C4,protectionValue:4},{protectionType:N.C6,protectionValue:6},{protectionType:N.C10,protectionValue:10},{protectionType:N.C16,protectionValue:16},{protectionType:N.C20,protectionValue:20},{protectionType:N.C25,protectionValue:25},{protectionType:N.C32,protectionValue:32},{protectionType:N.C40,protectionValue:40},{protectionType:N.C50,protectionValue:50},{protectionType:N.C63,protectionValue:63}]}},{key:"commonArtifacts",value:function(){return[{name:"AFEITADORA",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 2200 FRIGOR\xcdAS F/C",powerConsumption:1350,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 3500 FRIGOR\xcdAS F/C",powerConsumption:2150,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 4500 FRIGOR\xcdAS F/C",powerConsumption:2800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 2200 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:877.5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 3500 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:1397.5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 4500 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:1820,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 120 MM DE DI\xc1METRO",powerConsumption:750,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 140 MM DE DI\xc1METRO",powerConsumption:1250,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 175 MM DE DI\xc1METRO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 200 MM DE DI\xc1METRO",powerConsumption:1800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 215 MM DE DI\xc1METRO",powerConsumption:2110,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 220 MM DE DI\xc1METRO",powerConsumption:2350,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE RESISTIVO CON HORNALLA DE 150 MM DE DI\xc1METRO",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE RESISTIVO CON HORNALLA DE 190 MM DE DI\xc1METRO",powerConsumption:2e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ASPIRADORA",powerConsumption:1200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BATIDORA DE MANO",powerConsumption:300,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BOMBA DE AGUA DE 1/2 HP",powerConsumption:380,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BOMBA DE AGUA DE 3/4 HP",powerConsumption:570,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CAFETERA DE FILTRO EL\xc9CTRICA",powerConsumption:900,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CALOVENTILADOR CHICO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CARGADOR DE CELULAR GEN\xc9RICO",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"COMPUTADORA (S\xd3LO LA CPU)",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 80 M3/HORA",powerConsumption:12,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 200 M3/HORA",powerConsumption:20,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 1200 M3/HORA",powerConsumption:50,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ESTUFA HAL\xd3GENA DE 3 VELAS C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ESTUFA DE CUARZO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"FREEZER",powerConsumption:250,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA",powerConsumption:150,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA CON FREEZER",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA CON FREEZER - INVERTER",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HORNO EL\xc9CTRICO DE 25 A 30 LITROS C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HORNO EL\xc9CTRICO DE 73 LITROS C/TERMOSTATO, PARA EMPOTRAR",powerConsumption:2450,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 11W",powerConsumption:11,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 15W",powerConsumption:15,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 20W",powerConsumption:20,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 100 W",powerConsumption:100,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 40 W",powerConsumption:40,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 60 W",powerConsumption:60,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 5 W",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 7 W",powerConsumption:7,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 9 W",powerConsumption:9,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 12 W",powerConsumption:12,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"LICUADORA",powerConsumption:400,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"MICROONDAS 800 W",powerConsumption:800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"MINIPIMER",powerConsumption:400,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PARRILLA EL\xc9CTRICA 2000 W",powerConsumption:2e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PAVA EL\xc9CTRICA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PLANCHA PARA ROPA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PLANCHA PARA ROPA A VAPOR",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PULIDORA",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"RADIO",powerConsumption:15,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SECADOR DE PELO",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SOMMIER C/LEVANTACOLCH\xd3N",powerConsumption:130,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SPOT DICROICA 50 W",powerConsumption:50,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TELEVISOR DE 42''",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TOSTADORA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TURBO CALOVENTILADOR CHICO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"VENTILADOR DE MESA CHICO",powerConsumption:55,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"VENTILADOR DE PIE GRANDE",powerConsumption:110,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1}]}}]),t}()).\u0275fac=function(e){return new(e||S)},S.\u0275prov=s.Ib({token:S,factory:S.\u0275fac,providedIn:"root"}),S),N=function(e){return e.C05="C05",e.C1="C1",e.C2="C2",e.C3="C3",e.C4="C4",e.C6="C6",e.C10="C10",e.C16="C16",e.C20="C20",e.C25="C25",e.C32="C32",e.C40="C40",e.C50="C50",e.C63="C63",e}({});function I(e,t){if(1&e){var i=s.Tb();s.Sb(0,"button",15),s.Zb("click",(function(){return s.nc(i),s.bc().cleanForm()})),s.xc(1,"Cancel"),s.Rb()}}function A(e,t){if(1&e){var i=s.Tb();s.Sb(0,"li",17),s.Nb(1,"input",18),s.Nb(2,"input",19),s.Nb(3,"input",20),s.Nb(4,"input",21),s.Sb(5,"button",22),s.Zb("click",(function(){s.nc(i);var e=t.$implicit;return s.bc(2).editSurface(e.environment)})),s.xc(6,"Edit"),s.Rb(),s.Sb(7,"button",23),s.Zb("click",(function(){s.nc(i);var e=t.$implicit;return s.bc(2).deleteSurface(e.environment)})),s.xc(8,"Delete"),s.Rb(),s.Sb(9,"a",3),s.xc(10,"Artifacts"),s.Rb(),s.Rb()}if(2&e){var n=t.$implicit,r=s.bc(2);s.Bb(1),s.hc("value",n.environment),s.Bb(1),s.hc("value",n.width),s.Bb(1),s.hc("value",n.length),s.Bb(1),s.hc("value",(n.width*n.length).toFixed(2)),s.Bb(5),s.hc("routerLink","../../artifacts/"+r.projectId+"/"+n.environment)}}function O(e,t){if(1&e&&(s.Sb(0,"nb-card",2),s.Sb(1,"nb-card-header"),s.xc(2,"Surfaces Covered"),s.Rb(),s.Sb(3,"nb-card-body"),s.Sb(4,"ul"),s.vc(5,A,11,5,"li",16),s.Rb(),s.Rb(),s.Rb()),2&e){var i=s.bc();s.Bb(5),s.hc("ngForOf",i.coveredSurfaces())}}function E(e,t){if(1&e){var i=s.Tb();s.Sb(0,"li",17),s.Nb(1,"input",18),s.Nb(2,"input",24),s.Nb(3,"input",25),s.Nb(4,"input",21),s.Sb(5,"button",22),s.Zb("click",(function(){s.nc(i);var e=t.$implicit;return s.bc(2).editSurface(e.environment)})),s.xc(6,"Edit"),s.Rb(),s.Sb(7,"button",23),s.Zb("click",(function(){s.nc(i);var e=t.$implicit;return s.bc(2).deleteSurface(e.environment)})),s.xc(8,"Delete"),s.Rb(),s.Sb(9,"a",3),s.xc(10,"Artifacts"),s.Rb(),s.Rb()}if(2&e){var n=t.$implicit,r=s.bc(2);s.Bb(1),s.hc("value",n.environment),s.Bb(1),s.hc("value",n.width),s.Bb(1),s.hc("value",n.length),s.Bb(1),s.hc("value",(n.width*n.length).toFixed(2)),s.Bb(5),s.hc("routerLink","../../artifacts/"+r.projectId+"/"+n.environment)}}function x(e,t){if(1&e&&(s.Sb(0,"nb-card",2),s.Sb(1,"nb-card-header"),s.xc(2,"Surfaces Semi Covered"),s.Rb(),s.Sb(3,"nb-card-body"),s.Sb(4,"ul"),s.vc(5,E,11,5,"li",16),s.Rb(),s.Rb(),s.Rb()),2&e){var i=s.bc();s.Bb(5),s.hc("ngForOf",i.semiCoveredSurfaces())}}function P(e,t){if(1&e&&(s.Sb(0,"span"),s.Sb(1,"a",44),s.xc(2,"Circuits"),s.Rb(),s.Rb()),2&e){var i=s.bc(2);s.Bb(1),s.hc("routerLink","../../circuits/"+i.projectId)}}function k(e,t){if(1&e&&(s.Sb(0,"div",45),s.Sb(1,"div",46),s.Nb(2,"input",47),s.Rb(),s.Rb()),2&e){var i=t.$implicit;s.Bb(2),s.hc("placeholder",i)("value",i)}}function T(e,t){if(1&e&&(s.Sb(0,"nb-card",26),s.Sb(1,"nb-card-header"),s.xc(2,"Totals"),s.Rb(),s.Sb(3,"nb-card-body"),s.Sb(4,"div",27),s.Sb(5,"div",28),s.Sb(6,"div",29),s.Sb(7,"div",28),s.Sb(8,"span"),s.xc(9,"Covered Surface: "),s.Rb(),s.Rb(),s.Sb(10,"div",30),s.Nb(11,"input",31),s.Rb(),s.Rb(),s.Sb(12,"div",29),s.Sb(13,"div",28),s.Sb(14,"span",32),s.xc(15,"Semi Covered Surface: "),s.Rb(),s.Rb(),s.Sb(16,"div",30),s.Nb(17,"input",33),s.Rb(),s.Rb(),s.Sb(18,"div",29),s.Sb(19,"div",28),s.Sb(20,"span",32),s.xc(21,"Semi Covered Surface 50%: "),s.Rb(),s.Rb(),s.Sb(22,"div",30),s.Nb(23,"input",34),s.Rb(),s.Rb(),s.Sb(24,"div",29),s.Sb(25,"div",28),s.Sb(26,"span",32),s.xc(27,"Total Surface [m2]: "),s.Rb(),s.Rb(),s.Sb(28,"div",30),s.Nb(29,"input",21),s.Rb(),s.Rb(),s.Sb(30,"div",29),s.Sb(31,"div",28),s.Sb(32,"span",32),s.xc(33,"Maximum Consumption Determined [W]: "),s.Rb(),s.Rb(),s.Sb(34,"div",30),s.Nb(35,"input",35),s.Rb(),s.Rb(),s.Sb(36,"div",29),s.Sb(37,"div",28),s.Sb(38,"span",32),s.xc(39,"Apparent Power [KVA]: "),s.Rb(),s.Rb(),s.Sb(40,"div",30),s.Nb(41,"input",36),s.Rb(),s.Rb(),s.Sb(42,"div",29),s.Sb(43,"div",28),s.Sb(44,"span",32),s.xc(45,"Degree of electrification: "),s.Rb(),s.Rb(),s.Sb(46,"div",30),s.Nb(47,"input",37),s.Rb(),s.Rb(),s.Rb(),s.Sb(48,"div",30),s.Sb(49,"div",0),s.Sb(50,"div",1),s.Sb(51,"nb-card",38),s.Sb(52,"nb-card-header"),s.xc(53,"Degrees of electrification"),s.Rb(),s.Sb(54,"nb-card-body"),s.Sb(55,"table"),s.Sb(56,"thead"),s.Sb(57,"tr"),s.Sb(58,"th",39),s.xc(59,"Degree of electrification"),s.Rb(),s.Sb(60,"th",40),s.xc(61,"Surface (Application limit)"),s.Rb(),s.Sb(62,"th",41),s.xc(63,"Calculated maximum simultaneous power demand (only to determine the degree of electrification)"),s.Rb(),s.Rb(),s.Rb(),s.Sb(64,"tbody"),s.Sb(65,"tr"),s.Sb(66,"td"),s.xc(67," Minimal "),s.Rb(),s.Sb(68,"td"),s.xc(69," <= 60 m2 "),s.Rb(),s.Sb(70,"td"),s.xc(71," <= 3,7 kVA "),s.Rb(),s.Rb(),s.Sb(72,"tr"),s.Sb(73,"td"),s.xc(74," Medium "),s.Rb(),s.Sb(75,"td"),s.xc(76," > 60 m2 && <= 130 m2 "),s.Rb(),s.Sb(77,"td"),s.xc(78," <= 7 kVA "),s.Rb(),s.Rb(),s.Sb(79,"tr"),s.Sb(80,"td"),s.xc(81," High "),s.Rb(),s.Sb(82,"td"),s.xc(83," > 130 m2 && <= 200 m2 "),s.Rb(),s.Sb(84,"td"),s.xc(85," <= 11 kVA "),s.Rb(),s.Rb(),s.Sb(86,"tr"),s.Sb(87,"td"),s.xc(88," Upper "),s.Rb(),s.Sb(89,"td"),s.xc(90," > 200 m2 "),s.Rb(),s.Sb(91,"td"),s.xc(92," > 11 kVA "),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(93,"div",0),s.Sb(94,"div",1),s.Sb(95,"nb-card",38),s.Sb(96,"nb-card-header"),s.xc(97," Minimal circuits according to degree of electrification "),s.vc(98,P,3,1,"span",42),s.Rb(),s.Sb(99,"nb-card-body",17),s.vc(100,k,3,2,"div",43),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e){var i=s.bc();s.Bb(11),s.hc("value",i.totalSurfaceCovered()),s.Bb(6),s.hc("value",i.totalSurfaceSemiCovered()),s.Bb(6),s.hc("value",i.totalSurfaceSemiCovered()/2),s.Bb(6),s.hc("value",i.totalSurface()),s.Bb(6),s.hc("value",i.calculateMaximumConsumptionDetermined()),s.Bb(6),s.hc("value",i.apparentPower()),s.Bb(6),s.hc("value",i.electrificationDegree()),s.Bb(18),s.sc(i.isMinimalElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),s.Bb(7),s.sc(i.isMediumElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),s.Bb(7),s.sc(i.isHighElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),s.Bb(7),s.sc(i.isUpperElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),s.Bb(12),s.hc("ngIf",(null==i.surfaces?null:i.surfaces.length)>0),s.Bb(2),s.hc("ngForOf",i.circuits())}}var M,j,B=((j=function(){function t(i,n,r,c){e(this,t),this.surfacesService=i,this.fb=n,this.activatedRoute=r,this.projectCalcultatorService=c}return i(t,[{key:"ngOnInit",value:function(){this.surfaceForm=this.fb.group({type:["",u.r.required],environment:["",u.r.required],width:["",u.r.required],length:["",u.r.required]}),this.projectId=parseInt(this.activatedRoute.snapshot.params.projectId),this.surfaces=this.surfacesService.getSurfaces(parseInt(this.activatedRoute.snapshot.params.projectId)),this.isEdit=!1}},{key:"saveSurface",value:function(){if(this.surfaceForm.invalid)alert("the form is invalid");else{if(this.isEdit){var e=this.surfaceForm.value;this.selectedSurface.type=e.type,this.selectedSurface.environment=e.environment,this.selectedSurface.width=e.width,this.selectedSurface.length=e.length,this.surfacesService.updateSurface(this.projectId,this.selectedSurface)}else{var t=this.surfaceForm.value;t.artifacts=[],this.surfacesService.saveSurface(this.projectId,t)}this.cleanForm()}}},{key:"cleanForm",value:function(){this.isEdit=!1,this.surfaceForm.controls.type.setValue(""),this.surfaceForm.controls.environment.setValue(""),this.surfaceForm.controls.width.setValue(""),this.surfaceForm.controls.length.setValue(""),this.surfaces=this.surfacesService.getSurfaces(this.projectId)}},{key:"editSurface",value:function(e){this.selectedSurface=this.surfacesService.getSurface(this.projectId,e),this.surfaceForm.patchValue(this.selectedSurface),this.isEdit=!0}},{key:"deleteSurface",value:function(e){this.surfacesService.deleteSurface(this.projectId,e),this.cleanForm()}},{key:"isFormInvalid",value:function(){return this.surfaceForm.controls.type.hasError("required")||this.surfaceForm.controls.environment.hasError("required")||this.surfaceForm.controls.width.hasError("required")||this.surfaceForm.controls.length.hasError("required")}},{key:"coveredSurfaces",value:function(){return this.surfacesService.getSurfaces(this.projectId).filter((function(e){return e.type==C.Covered}))}},{key:"semiCoveredSurfaces",value:function(){return this.surfacesService.getSurfaces(this.projectId).filter((function(e){return e.type==C.SemiCovered}))}},{key:"totalSurfaceCovered",value:function(){var e=this.surfacesService.getSurfaces(this.projectId);return this.projectCalcultatorService.totalSurfaceCovered(e)}},{key:"totalSurfaceSemiCovered",value:function(){var e=this.surfacesService.getSurfaces(this.projectId);return this.projectCalcultatorService.totalSurfaceSemiCovered(e)}},{key:"totalSurface",value:function(){var e=this.surfacesService.getSurfaces(this.projectId);return this.projectCalcultatorService.totalSurface(e)}},{key:"calculateMaximumConsumptionDetermined",value:function(){var e=this.surfacesService.getSurfaces(this.projectId);return this.projectCalcultatorService.calculateMaximumConsumptionDetermined(e)}},{key:"apparentPower",value:function(){var e=this.surfacesService.getSurfaces(this.projectId);return this.projectCalcultatorService.apparentPower(e)}},{key:"electrificationDegree",value:function(){return this.projectCalcultatorService.electrificationDegree(this.totalSurface(),this.apparentPower())}},{key:"isMinimalElectrificationDegree",value:function(){return this.electrificationDegree()==R.Minimal}},{key:"isMediumElectrificationDegree",value:function(){return this.electrificationDegree()==R.Medium}},{key:"isHighElectrificationDegree",value:function(){return this.electrificationDegree()==R.High}},{key:"isUpperElectrificationDegree",value:function(){return this.electrificationDegree()==R.Upper}},{key:"circuits",value:function(){var e=this.electrificationDegree();return this.projectCalcultatorService.circuitsByelectrificationDegree(e)}}]),t}()).\u0275fac=function(e){return new(e||j)(s.Mb(g),s.Mb(u.b),s.Mb(a.a),s.Mb(D))},j.\u0275cmp=s.Gb({type:j,selectors:[["surfaces"]],decls:29,vars:8,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["placeholder","Choose a surface type","formControlName","type"],["value","0"],["value","1"],["nbInput","","formControlName","environment","type","text","placeholder","Environment","maxlength","100"],["nbInput","","formControlName","width","type","number","placeholder","Width [m]"],["nbInput","","formControlName","length","type","number","placeholder","Length [m]"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","info",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","disabled","","type","text","placeholder","Environment",3,"value"],["nbInput","","disabled","","type","number","placeholder","Width [m]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Length [m]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Surface [m2]",3,"value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["nbInput","","disabled","","type","number","placeholder","Width",3,"value"],["nbInput","","disabled","","type","number","placeholder","Length",3,"value"],["accent","info"],[1,"form-group","row","form-horizontal"],[1,"col-md-5"],[1,"form-group","row"],[1,"col-md-7"],["nbInput","","disabled","","type","number","placeholder","Surface Covered [m2]",3,"value"],[1,"text"],["nbInput","","disabled","","type","number","placeholder","Surface Semi Covered [m2]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Surface Semi Covered %50 [m2]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Maximum Consumption Determined [W]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Apparent Power [KVA]",3,"value"],["nbInput","","disabled","","type","text","placeholder","Apparent Power [KVA]",3,"value"],["accent","danger"],[2,"width","20%"],[2,"width","40%"],[2,"width","60%"],[4,"ngIf"],["class","row inline-form-card",4,"ngFor","ngForOf"],["nbButton","","outline","","status","success",3,"routerLink"],[1,"row","inline-form-card"],[1,"col-md-2"],["nbInput","","disabled","","type","text",3,"placeholder","value"]],template:function(e,t){var i,n;1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"nb-card",2),s.Sb(3,"nb-card-header"),s.xc(4,"Surface "),s.Sb(5,"a",3),s.xc(6,"Back to Proyects"),s.Rb(),s.Rb(),s.Sb(7,"nb-card-body"),s.Sb(8,"form",4),s.Sb(9,"nb-select",5),s.Sb(10,"nb-option",6),s.xc(11,"Covered"),s.Rb(),s.Sb(12,"nb-option",7),s.xc(13,"Semi-Covered"),s.Rb(),s.Rb(),s.Nb(14,"input",8),s.Nb(15,"input",9),s.Nb(16,"input",10),s.Sb(17,"button",11),s.Zb("click",(function(){return t.saveSurface()})),s.xc(18),s.Rb(),s.vc(19,I,2,0,"button",12),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(20,"div",0),s.Sb(21,"div",1),s.vc(22,O,6,1,"nb-card",13),s.Rb(),s.Rb(),s.Sb(23,"div",0),s.Sb(24,"div",1),s.vc(25,x,6,1,"nb-card",13),s.Rb(),s.Rb(),s.Sb(26,"div",0),s.Sb(27,"div",1),s.vc(28,T,101,17,"nb-card",14),s.Rb(),s.Rb()),2&e&&(s.Bb(5),s.hc("routerLink","../../../projects"),s.Bb(3),s.hc("formGroup",t.surfaceForm),s.Bb(9),s.hc("disabled",t.isFormInvalid()),s.Bb(1),s.yc(t.isEdit?"Update Surface":"Save Surface"),s.Bb(1),s.hc("ngIf",t.isEdit),s.Bb(3),s.hc("ngIf",(null==(i=t.coveredSurfaces())?null:i.length)>0),s.Bb(3),s.hc("ngIf",(null==(n=t.semiCoveredSurfaces())?null:n.length)>0),s.Bb(3),s.hc("ngIf",(null==t.surfaces?null:t.surfaces.length)>0))},directives:[b.j,b.k,b.g,a.f,b.i,u.s,u.k,u.d,b.K,u.j,u.c,b.I,b.v,u.a,u.f,u.n,o.m,o.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}span.text[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}span.text[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),j),F=((M=function(){function t(i){e(this,t),this.surfacesService=i}return i(t,[{key:"saveArtifact",value:function(e,t,i){var n=this.surfacesService.getSurface(e,t);null!=n&&(n.artifacts||(n.artifacts=[]),n.artifacts.push(i),this.surfacesService.updateSurface(e,n))}},{key:"updateArtifacts",value:function(e,t,i){var n=this.surfacesService.getSurface(e,t);if(n){var r=n.artifacts.findIndex((function(e){return e.name==i.name}));1!=r&&(n.artifacts[r]=i,this.surfacesService.updateSurface(e,n))}}},{key:"deleteArtifact",value:function(e,t,i){var n=this.surfacesService.getSurface(e,t);n&&(n.artifacts=n.artifacts.filter((function(e){return e.name!=i})),this.surfacesService.updateSurface(e,n))}},{key:"getArtifact",value:function(e,t,i){var n=this.surfacesService.getSurface(e,t);return(null==n?void 0:n.artifacts)?null==n?void 0:n.artifacts.find((function(e){return e.name==i})):null}},{key:"getArtifacts",value:function(e,t){var i=this.surfacesService.getSurface(e,t);return(null==i?void 0:i.artifacts)||[]}}]),t}()).\u0275fac=function(e){return new(e||M)(s.Wb(g))},M.\u0275prov=s.Ib({token:M,factory:M.\u0275fac,providedIn:"root"}),M);function L(e,t){if(1&e){var i=s.Tb();s.Sb(0,"li",19),s.Nb(1,"input",20),s.Nb(2,"input",21),s.Sb(3,"nb-toggle",22),s.xc(4,"Consume In Summer Day"),s.Rb(),s.Sb(5,"nb-toggle",22),s.xc(6,"Consume In Summer Night"),s.Rb(),s.Sb(7,"nb-toggle",22),s.xc(8,"Consume In Winter Day"),s.Rb(),s.Sb(9,"nb-toggle",22),s.xc(10,"Consume In Winter Night"),s.Rb(),s.Sb(11,"button",23),s.Zb("click",(function(){s.nc(i);var e=t.$implicit,n=s.bc(2);return n.editArtifact(n.environment,e.name)})),s.xc(12,"Edit"),s.Rb(),s.Sb(13,"button",24),s.Zb("click",(function(){s.nc(i);var e=t.$implicit,n=s.bc(2);return n.deleteArtifact(n.environment,e.name)})),s.xc(14,"Delete"),s.Rb(),s.Rb()}if(2&e){var n=t.$implicit,r=s.bc(2);s.Bb(1),s.hc("value",n.name),s.Bb(1),s.hc("value",n.powerConsumption),s.Bb(1),s.hc("checked",n.summerDay),s.Bb(2),s.hc("checked",n.summerNight),s.Bb(2),s.hc("checked",n.winterDay),s.Bb(2),s.hc("checked",n.winterNight),s.Bb(2),s.hc("disabled",r.isEdit),s.Bb(2),s.hc("disabled",r.isEdit)}}function U(e,t){if(1&e&&(s.Sb(0,"nb-card",2),s.Sb(1,"nb-card-header"),s.xc(2,"Artifacts"),s.Rb(),s.Sb(3,"nb-card-body"),s.Sb(4,"ul"),s.vc(5,L,15,8,"li",18),s.Rb(),s.Rb(),s.Rb()),2&e){var i=s.bc();s.Bb(5),s.hc("ngForOf",i.artifacts)}}function V(e,t){if(1&e){var i=s.Tb();s.Sb(0,"tr"),s.Sb(1,"td"),s.xc(2),s.Rb(),s.Sb(3,"td"),s.xc(4),s.Rb(),s.Sb(5,"td"),s.Sb(6,"button",25),s.Zb("click",(function(){s.nc(i);var e=t.$implicit;return s.bc().addArtifact(e)})),s.xc(7,"Add"),s.Rb(),s.Rb(),s.Rb()}if(2&e){var n=t.$implicit,r=s.bc();s.Bb(2),s.zc(" ",n.name," "),s.Bb(2),s.zc(" ",n.powerConsumption," "),s.Bb(2),s.hc("disabled",r.isEdit)}}var G,_,H=((_=function(){function t(i,n,r,c){e(this,t),this.artifactsService=i,this.projectsCalculatorService=n,this.fb=r,this.activatedRoute=c}return i(t,[{key:"ngOnInit",value:function(){this.artifactForm=this.fb.group({name:["",u.r.required],powerConsumption:["",u.r.required],summerDay:[!1,u.r.required],summerNight:[!1,u.r.required],winterDay:[!1,u.r.required],winterNight:[!1,u.r.required]}),this.projectId=this.activatedRoute.snapshot.params.projectId,this.environment=this.activatedRoute.snapshot.params.environment,this.artifacts=this.artifactsService.getArtifacts(this.activatedRoute.snapshot.params.projectId,this.activatedRoute.snapshot.params.environment),this.isEdit=!1}},{key:"saveArtifact",value:function(){if(this.artifactForm.invalid)alert("the form is invalid");else{if(this.isEdit){var e=this.artifactForm.value;this.selectedArtifact.name=e.name,this.selectedArtifact.powerConsumption=e.powerConsumption,this.selectedArtifact.summerDay=e.summerDay,this.selectedArtifact.summerNight=e.summerNight,this.selectedArtifact.winterDay=e.winterDay,this.selectedArtifact.winterNight=e.winterNight,this.artifactsService.updateArtifacts(this.projectId,this.environment,this.selectedArtifact)}else this.artifactsService.saveArtifact(this.projectId,this.environment,this.artifactForm.value);this.cleanForm()}}},{key:"cleanForm",value:function(){this.isEdit=!1,this.artifactForm.reset(),this.artifacts=this.artifactsService.getArtifacts(this.projectId,this.environment)}},{key:"editArtifact",value:function(e,t){this.selectedArtifact=this.artifactsService.getArtifact(this.projectId,e,t),this.artifactForm.patchValue(this.selectedArtifact),this.artifactForm.markAsDirty(),this.isEdit=!0}},{key:"addArtifact",value:function(e){this.artifactForm.patchValue(e),this.artifactForm.markAsDirty()}},{key:"deleteArtifact",value:function(e,t){this.artifactsService.deleteArtifact(this.projectId,e,t),this.cleanForm()}},{key:"isFormInvalid",value:function(){return this.artifactForm.controls.name.hasError("required")||this.artifactForm.controls.powerConsumption.hasError("required")||this.artifactForm.controls.summerDay.hasError("required")||this.artifactForm.controls.summerNight.hasError("required")||this.artifactForm.controls.winterDay.hasError("required")||this.artifactForm.controls.winterNight.hasError("required")}},{key:"isDirty",value:function(){return this.artifactForm.dirty}},{key:"commonArtifacts",value:function(){return this.projectsCalculatorService.commonArtifacts()}}]),t}()).\u0275fac=function(e){return new(e||_)(s.Mb(F),s.Mb(D),s.Mb(u.b),s.Mb(a.a))},_.\u0275cmp=s.Gb({type:_,selectors:[["artifacts"]],decls:43,vars:9,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Name","maxlength","100"],["nbInput","","formControlName","powerConsumption","type","number","placeholder","Power Consumption [W]"],["formControlName","summerDay","status","info"],["formControlName","summerNight","status","info"],["formControlName","winterDay","status","info"],["formControlName","winterNight","status","info"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"disabled","click"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","warning"],[2,"width","40%"],[2,"width","20%"],[4,"ngFor","ngForOf"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","disabled","","type","text","placeholder","Name",3,"value"],["nbInput","","disabled","","type","number","placeholder","Power Consumption [W]",3,"value"],["disabled","","status","info",3,"checked"],["nbButton","","outline","","status","primary",3,"disabled","click"],["nbButton","","outline","","status","danger",3,"disabled","click"],["nbButton","","outline","","status","success",3,"disabled","click"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"nb-card",2),s.Sb(3,"nb-card-header"),s.xc(4),s.Sb(5,"a",3),s.xc(6,"Back to Surfaces"),s.Rb(),s.Rb(),s.Sb(7,"nb-card-body"),s.Sb(8,"form",4),s.Nb(9,"input",5),s.Nb(10,"input",6),s.Sb(11,"nb-toggle",7),s.xc(12,"Consume In Summer Day"),s.Rb(),s.Sb(13,"nb-toggle",8),s.xc(14,"Consume In Summer Night"),s.Rb(),s.Sb(15,"nb-toggle",9),s.xc(16,"Consume In Winter Day"),s.Rb(),s.Sb(17,"nb-toggle",10),s.xc(18,"Consume In Winter Night"),s.Rb(),s.Sb(19,"button",11),s.Zb("click",(function(){return t.saveArtifact()})),s.xc(20),s.Rb(),s.Sb(21,"button",12),s.Zb("click",(function(){return t.cleanForm()})),s.xc(22),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(23,"div",0),s.Sb(24,"div",1),s.vc(25,U,6,1,"nb-card",13),s.Rb(),s.Rb(),s.Sb(26,"div",0),s.Sb(27,"div",1),s.Sb(28,"nb-card",14),s.Sb(29,"nb-card-header"),s.xc(30,"Common Artifacts"),s.Rb(),s.Sb(31,"nb-card-body"),s.Sb(32,"table"),s.Sb(33,"thead"),s.Sb(34,"tr"),s.Sb(35,"th",15),s.xc(36,"Artifact Name"),s.Rb(),s.Sb(37,"th",16),s.xc(38,"Power"),s.Rb(),s.Sb(39,"th",16),s.xc(40,"Action"),s.Rb(),s.Rb(),s.Rb(),s.Sb(41,"tbody"),s.vc(42,V,8,3,"tr",17),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.Bb(4),s.zc("Artifact for environment: ",t.environment," "),s.Bb(1),s.hc("routerLink","../../../surfaces/"+t.projectId),s.Bb(3),s.hc("formGroup",t.artifactForm),s.Bb(11),s.hc("disabled",t.isFormInvalid()),s.Bb(1),s.yc(t.isEdit?"Update Artifact":"Save Artifact"),s.Bb(1),s.hc("disabled",!t.isDirty()),s.Bb(1),s.yc(t.isEdit?"Cancel":"Clean"),s.Bb(3),s.hc("ngIf",(null==t.artifacts?null:t.artifacts.length)>0),s.Bb(17),s.hc("ngForOf",t.commonArtifacts()))},directives:[b.j,b.k,b.g,a.f,b.i,u.s,u.k,u.d,b.v,u.a,u.j,u.c,u.f,u.n,b.T,o.m,o.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),_),W=((G=function(){function t(i){e(this,t),this.projectsService=i}return i(t,[{key:"saveCircuit",value:function(e,t){var i=this.projectsService.getProjects(),n=i.findIndex((function(t){return t.id==e}));if(-1!=n){var r=i[n];r.circuits||(r.circuits=[]),r.circuits=this.addCircuit(r.circuits,t),this.projectsService.updateProject(e,r)}}},{key:"addCircuit",value:function(e,t){if(t.circuitType===w.LAP)e.push(t);else{var i=e.findIndex((function(e){return e.circuitType===w.LAP}));-1===i?e.push(t):e.splice(i,0,t)}return e}},{key:"updateCircuit",value:function(e,t){var i,n=this.projectsService.getProjects(),r=n.findIndex((function(t){return t.id==e}));if(-1!=r){var c=null===(i=n[r])||void 0===i?void 0:i.circuits;if(c){var o=c.findIndex((function(e){return e.name==t.name}));-1!=o&&(c[o]=t,n[r].circuits=c,this.projectsService.updateProject(e,n[r]))}}}},{key:"deleteCircuit",value:function(e,t){var i=this.projectsService.getProjects(),n=i.findIndex((function(t){return t.id==e}));if(-1!=n){var r=i[n];r.circuits=r.circuits.filter((function(e){return e.name!=t})),this.projectsService.updateProject(e,r)}}},{key:"getCircuit",value:function(e,t){var i=this.projectsService.getProjectById(e);return(null==i?void 0:i.circuits)?null==i?void 0:i.circuits.find((function(e){return e.name==t})):null}},{key:"getCircuits",value:function(e){var t=this.projectsService.getProjectById(e);return(null==t?void 0:t.circuits)||[]}}]),t}()).\u0275fac=function(e){return new(e||G)(s.Wb(l))},G.\u0275prov=s.Ib({token:G,factory:G.\u0275fac,providedIn:"root"}),G);function z(e,t){if(1&e){var i=s.Tb();s.Sb(0,"button",18),s.Zb("click",(function(){return s.nc(i),s.bc().cleanForm()})),s.xc(1,"Cancel"),s.Rb()}}function q(e,t){if(1&e){var i=s.Tb();s.Sb(0,"li",19),s.Nb(1,"input",30),s.Nb(2,"input",31),s.Nb(3,"input",32),s.Nb(4,"input",33),s.Nb(5,"input",34),s.Nb(6,"input",35),s.Nb(7,"input",36),s.Nb(8,"input",37),s.Nb(9,"input",38),s.Sb(10,"button",39),s.Zb("click",(function(){s.nc(i);var e=t.$implicit;return s.bc(2).editCircuit(e.name)})),s.xc(11,"Edit"),s.Rb(),s.Sb(12,"button",40),s.Zb("click",(function(){s.nc(i);var e=t.$implicit;return s.bc(2).deleteCircuit(e.name)})),s.xc(13,"Delete"),s.Rb(),s.Rb()}if(2&e){var n,r=t.$implicit,c=s.bc(2);s.Bb(1),s.hc("value",r.name),s.Bb(1),s.hc("value",r.circuitType),s.Bb(1),s.hc("status",r.numberOfMouths<=c.maxNumberOfMouths(r.circuitType)?"success":"danger")("value",r.numberOfMouths),s.Bb(1),s.hc("value",r.length),s.Bb(1),s.hc("value",c.powerLoad(r.circuitType)),s.Bb(1),s.hc("value",c.calculateCurrent(r.circuitType)),s.Bb(1),s.hc("value",c.nominalSection(r)),s.Bb(1),s.hc("status",c.isValidTension(r)?"success":"danger")("value",c.calculateTensionDrop(r)),s.Bb(1),s.hc("status",c.isValidProtection(r,c.calculateProtection(r))?"success":"danger")("value",null==(n=c.calculateProtection(r))?null:n.protectionType)}}function Z(e,t){if(1&e&&(s.Sb(0,"nb-card",2),s.Sb(1,"nb-card-header"),s.xc(2,"Circuits"),s.Rb(),s.Sb(3,"nb-card-body"),s.Sb(4,"ul"),s.Sb(5,"li",19),s.Nb(6,"input",20),s.Nb(7,"input",21),s.Nb(8,"input",22),s.Nb(9,"input",23),s.Nb(10,"input",24),s.Nb(11,"input",25),s.Nb(12,"input",26),s.Nb(13,"input",27),s.Nb(14,"input",28),s.Rb(),s.Rb(),s.Sb(15,"ul"),s.vc(16,q,14,12,"li",29),s.Rb(),s.Rb(),s.Rb()),2&e){var i=s.bc();s.Bb(16),s.hc("ngForOf",i.circuits)}}function $(e,t){if(1&e&&(s.Sb(0,"tr"),s.Sb(1,"td"),s.xc(2),s.Rb(),s.Sb(3,"td"),s.xc(4),s.Rb(),s.Rb()),2&e){var i=t.$implicit;s.Bb(2),s.zc(" ",i.nominalSection," "),s.Bb(2),s.zc(" ",i.allowableCurrentIntensityInPipes," ")}}function J(e,t){if(1&e&&(s.Sb(0,"tr"),s.Sb(1,"td"),s.xc(2),s.Rb(),s.Sb(3,"td"),s.xc(4),s.Rb(),s.Rb()),2&e){var i=t.$implicit;s.Bb(2),s.zc(" ",i.circuitType," "),s.Bb(2),s.zc(" <= ",i.maxTensionDrop," % ")}}function K(e,t){if(1&e&&(s.Sb(0,"tr"),s.Sb(1,"td"),s.xc(2),s.Rb(),s.Sb(3,"td"),s.xc(4),s.Rb(),s.Rb()),2&e){var i=t.$implicit;s.Bb(2),s.zc(" ",i.circuitType," "),s.Bb(2),s.zc(" >= ",i.minSectionNominal," mm2 ")}}function X(e,t){if(1&e&&(s.Sb(0,"nb-card",41),s.Sb(1,"nb-card-header"),s.xc(2,"References"),s.Rb(),s.Sb(3,"nb-card-body"),s.Sb(4,"div",42),s.Sb(5,"div",1),s.Sb(6,"nb-card",43),s.Sb(7,"nb-card-header"),s.xc(8,"Number of Mouths"),s.Rb(),s.Sb(9,"nb-card-body"),s.Sb(10,"table"),s.Sb(11,"thead"),s.Sb(12,"tr"),s.Sb(13,"th",44),s.xc(14,"Circuit Type"),s.Rb(),s.Sb(15,"th",44),s.xc(16,"Designation"),s.Rb(),s.Sb(17,"th",44),s.xc(18,"Maximum Number of Mouths"),s.Rb(),s.Sb(19,"th",44),s.xc(20,"Power Load"),s.Rb(),s.Sb(21,"th",44),s.xc(22,"Factor Load"),s.Rb(),s.Rb(),s.Rb(),s.Sb(23,"tbody"),s.Sb(24,"tr"),s.Sb(25,"td"),s.xc(26),s.Rb(),s.Sb(27,"td"),s.xc(28," General purpose lighting "),s.Rb(),s.Sb(29,"td"),s.xc(30),s.Rb(),s.Sb(31,"td"),s.xc(32),s.Rb(),s.Sb(33,"td"),s.xc(34),s.Rb(),s.Rb(),s.Sb(35,"tr"),s.Sb(36,"td"),s.xc(37),s.Rb(),s.Sb(38,"td"),s.xc(39," General purpose sockets "),s.Rb(),s.Sb(40,"td"),s.xc(41),s.Rb(),s.Sb(42,"td"),s.xc(43),s.Rb(),s.Sb(44,"td"),s.xc(45),s.Rb(),s.Rb(),s.Sb(46,"tr"),s.Sb(47,"td"),s.xc(48),s.Rb(),s.Sb(49,"td"),s.xc(50," Special use lighting "),s.Rb(),s.Sb(51,"td"),s.xc(52),s.Rb(),s.Sb(53,"td"),s.xc(54),s.Rb(),s.Sb(55,"td"),s.xc(56),s.Rb(),s.Rb(),s.Sb(57,"tr"),s.Sb(58,"td"),s.xc(59),s.Rb(),s.Sb(60,"td"),s.xc(61," Special purpose sockets "),s.Rb(),s.Sb(62,"td"),s.xc(63),s.Rb(),s.Sb(64,"td"),s.xc(65),s.Rb(),s.Sb(66,"td"),s.xc(67),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(68,"div",42),s.Sb(69,"div",1),s.Sb(70,"nb-card",45),s.Sb(71,"nb-card-header"),s.xc(72,"Simultaneity Coefficient"),s.Rb(),s.Sb(73,"nb-card-body"),s.Sb(74,"table"),s.Sb(75,"thead"),s.Sb(76,"tr"),s.Sb(77,"th",44),s.xc(78,"Electrification Degree"),s.Rb(),s.Sb(79,"th",44),s.xc(80,"Simultaneity Coefficient"),s.Rb(),s.Rb(),s.Rb(),s.Sb(81,"tbody"),s.Sb(82,"tr"),s.Sb(83,"td"),s.xc(84),s.Rb(),s.Sb(85,"td"),s.xc(86),s.Rb(),s.Rb(),s.Sb(87,"tr"),s.Sb(88,"td"),s.xc(89),s.Rb(),s.Sb(90,"td"),s.xc(91),s.Rb(),s.Rb(),s.Sb(92,"tr"),s.Sb(93,"td"),s.xc(94),s.Rb(),s.Sb(95,"td"),s.xc(96),s.Rb(),s.Rb(),s.Sb(97,"tr"),s.Sb(98,"td"),s.xc(99),s.Rb(),s.Sb(100,"td"),s.xc(101),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(102,"div",42),s.Sb(103,"div",1),s.Sb(104,"nb-card",46),s.Sb(105,"nb-card-header"),s.xc(106,"Technical Features"),s.Rb(),s.Sb(107,"nb-card-body"),s.Sb(108,"table"),s.Sb(109,"thead"),s.Sb(110,"tr"),s.Sb(111,"th",44),s.xc(112,"Nominal Section"),s.Rb(),s.Sb(113,"th",44),s.xc(114,"Allowable CurrentIntensity In Pipes"),s.Rb(),s.Rb(),s.Rb(),s.Sb(115,"tbody"),s.vc(116,$,5,2,"tr",47),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(117,"div",42),s.Sb(118,"div",1),s.Sb(119,"nb-card",46),s.Sb(120,"nb-card-header"),s.xc(121,"Tension Drops"),s.Rb(),s.Sb(122,"nb-card-body"),s.Sb(123,"table"),s.Sb(124,"thead"),s.Sb(125,"tr"),s.Sb(126,"th",44),s.xc(127,"Circuit Type"),s.Rb(),s.Sb(128,"th",44),s.xc(129,"[e%]"),s.Rb(),s.Rb(),s.Rb(),s.Sb(130,"tbody"),s.vc(131,J,5,2,"tr",47),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(132,"div",42),s.Sb(133,"div",1),s.Sb(134,"nb-card",46),s.Sb(135,"nb-card-header"),s.xc(136,"Nominal Sections"),s.Rb(),s.Sb(137,"nb-card-body"),s.Sb(138,"table"),s.Sb(139,"thead"),s.Sb(140,"tr"),s.Sb(141,"th",44),s.xc(142,"Circuit Type"),s.Rb(),s.Sb(143,"th",44),s.xc(144,"Nominal Section"),s.Rb(),s.Rb(),s.Rb(),s.Sb(145,"tbody"),s.vc(146,K,5,2,"tr",47),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e){var i=s.bc();s.Bb(26),s.zc(" ",i.circuitType("IUG")," "),s.Bb(4),s.zc(" ",i.maxNumberOfMouths("IUG")," "),s.Bb(2),s.zc(" ",i.powerLoad("IUG")," "),s.Bb(2),s.zc(" ",i.factorLoad("IUG")," "),s.Bb(3),s.zc(" ",i.circuitType("TUG")," "),s.Bb(4),s.zc(" ",i.maxNumberOfMouths("TUG")," "),s.Bb(2),s.zc(" ",i.powerLoad("TUG")," "),s.Bb(2),s.zc(" ",i.factorLoad("TUG")," "),s.Bb(3),s.zc(" ",i.circuitType("IUE")," "),s.Bb(4),s.zc(" ",i.maxNumberOfMouths("IUE")," "),s.Bb(2),s.zc(" ",i.powerLoad("IUE")," "),s.Bb(2),s.zc(" ",i.factorLoad("IUE")," "),s.Bb(3),s.zc(" ",i.circuitType("TUE")," "),s.Bb(4),s.zc(" ",i.maxNumberOfMouths("TUE")," "),s.Bb(2),s.zc(" ",i.powerLoad("TUE")," "),s.Bb(2),s.zc(" ",i.factorLoad("TUE")," "),s.Bb(15),s.sc(i.simultaneityCoefficientDetermined()==i.simultaneityCoefficient("Minimal")?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),s.Bb(2),s.zc(" ",i.electrificationDegree("Minimal")," "),s.Bb(2),s.zc(" ",i.simultaneityCoefficient("Minimal")," "),s.Bb(1),s.sc(i.simultaneityCoefficientDetermined()==i.simultaneityCoefficient("Medium")?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),s.Bb(2),s.zc(" ",i.electrificationDegree("Medium")," "),s.Bb(2),s.zc(" ",i.simultaneityCoefficient("Medium")," "),s.Bb(1),s.sc(i.simultaneityCoefficientDetermined()==i.simultaneityCoefficient("High")?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),s.Bb(2),s.zc(" ",i.electrificationDegree("High")," "),s.Bb(2),s.zc(" ",i.simultaneityCoefficient("High")," "),s.Bb(1),s.sc(i.simultaneityCoefficientDetermined()==i.simultaneityCoefficient("Upper")?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),s.Bb(2),s.zc(" ",i.electrificationDegree("Upper")," "),s.Bb(2),s.zc(" ",i.simultaneityCoefficient("Upper")," "),s.Bb(15),s.hc("ngForOf",i.technicalFeatures()),s.Bb(15),s.hc("ngForOf",i.tensionDrops()),s.Bb(15),s.hc("ngForOf",i.sectionNominals())}}var Q,Y,ee,te=[{path:"",component:y},{path:"surfaces/:projectId",component:B},{path:"circuits/:projectId",component:(Q=function(){function t(i,n,r,c,o){e(this,t),this.circuitsService=i,this.surfacesService=n,this.fb=r,this.activatedRoute=c,this.projectsCalculatorService=o}return i(t,[{key:"ngOnInit",value:function(){this.circuitForm=this.fb.group({name:["",u.r.required],circuitType:["",u.r.required],numberOfMouths:["",u.r.required],length:["",u.r.required]}),this.projectId=parseInt(this.activatedRoute.snapshot.params.projectId),this.circuits=this.circuitsService.getCircuits(parseInt(this.activatedRoute.snapshot.params.projectId)),this.isEdit=!1;var e=this.projectsCalculatorService.protections().find((function(e){return e.protectionType==N.C05}));this.maxProtectionCalculated=e}},{key:"saveCircuit",value:function(){if(this.circuitForm.invalid)alert("the form is invalid");else{if(this.isEdit){var e=this.circuitForm.value;this.selectedCircuit.name=e.name,this.selectedCircuit.circuitType=e.circuitType,this.selectedCircuit.numberOfMouths=e.numberOfMouths,this.selectedCircuit.length=e.length,this.circuitsService.updateCircuit(this.projectId,this.selectedCircuit)}else this.circuitsService.saveCircuit(this.projectId,this.circuitForm.value);this.cleanForm()}}},{key:"cleanForm",value:function(){this.isEdit=!1,this.circuitForm.controls.name.setValue(""),this.circuitForm.controls.circuitType.setValue(""),this.circuitForm.controls.numberOfMouths.setValue(""),this.circuitForm.controls.length.setValue(""),this.circuits=this.circuitsService.getCircuits(this.projectId)}},{key:"editCircuit",value:function(e){this.selectedCircuit=this.circuitsService.getCircuit(this.projectId,e),this.circuitForm.patchValue(this.selectedCircuit),this.isEdit=!0}},{key:"deleteCircuit",value:function(e){this.circuitsService.deleteCircuit(this.projectId,e),this.cleanForm()}},{key:"isFormInvalid",value:function(){return this.circuitForm.controls.name.hasError("required")||this.circuitForm.controls.circuitType.hasError("required")||this.circuitForm.controls.numberOfMouths.hasError("required")||this.circuitForm.controls.length.hasError("required")}},{key:"circuitType",value:function(e){return e}},{key:"maxNumberOfMouths",value:function(e){return this.projectsCalculatorService.maxNumberOfMouths(e)}},{key:"powerLoad",value:function(e){return e==w.LAP?this.circuitLAPTotal():this.projectsCalculatorService.powerLoad(e)}},{key:"factorLoad",value:function(e){return this.projectsCalculatorService.factorLoad(e)}},{key:"simultaneityCoefficient",value:function(e){return this.projectsCalculatorService.simultaneityCoefficient(e)}},{key:"electrificationDegree",value:function(e){return e}},{key:"circuitLAPTotal",value:function(){var e=this.surfacesService.getSurfaces(this.projectId),t=this.projectsCalculatorService.totalSurface(e),i=this.projectsCalculatorService.apparentPower(e),n=this.projectsCalculatorService.electrificationDegree(t,i),r=this.simultaneityCoefficient(n);return Math.ceil(this.projectsCalculatorService.circuitLAPTotal(this.circuits,r))}},{key:"simultaneityCoefficientDetermined",value:function(){var e=this.surfacesService.getSurfaces(this.projectId),t=this.projectsCalculatorService.totalSurface(e),i=this.projectsCalculatorService.apparentPower(e),n=this.projectsCalculatorService.electrificationDegree(t,i);return this.simultaneityCoefficient(n)}},{key:"calculateCurrent",value:function(e){return e==w.LAP?parseFloat((this.circuitLAPTotal()/198).toFixed(2)):parseFloat((this.powerLoad(e)/198).toFixed(2))}},{key:"nominalSection",value:function(e){var t=this.calculateCurrent(e.circuitType),i=this.projectsCalculatorService.nominalSectionByCurrentIntensity(t),n=this.projectsCalculatorService.sectionNominals().find((function(t){return t.circuitType==e.circuitType})),r=e.circuitType==w.LAP;return this.projectsCalculatorService.validateNominalSection(this.technicalFeatures(),e,n&&i>n.minSectionNominal?i:n.minSectionNominal,this.powerLoad(e.circuitType),r)}},{key:"technicalFeatures",value:function(){return this.projectsCalculatorService.tecnicalFeatures()}},{key:"calculateTensionDrop",value:function(e){var t=this.nominalSection(e),i=this.powerLoad(e.circuitType);return this.projectsCalculatorService.calcuteTensionDrop(e,t,i)}},{key:"tensionDrops",value:function(){return this.projectsCalculatorService.tensionDrops()}},{key:"tensionDrop",value:function(e){var t=this.projectsCalculatorService.tensionDrops().find((function(t){return t.circuitType==e}));return(null==t?void 0:t.maxTensionDrop)||0}},{key:"isValidTension",value:function(e){return this.calculateTensionDrop(e)<=this.tensionDrop(e.circuitType)}},{key:"sectionNominals",value:function(){return this.projectsCalculatorService.sectionNominals()}},{key:"calculateProtection",value:function(e){var t=this.calculateCurrent(e.circuitType),i=e.circuitType==w.LAP,n=this.projectsCalculatorService.calculateProtection(t,i);if(!this.isValidProtection(e,n)){var r=this.nominalSection(e),c=this.projectsCalculatorService.tecnicalFeatures().find((function(e){return e.nominalSection==r}));Math.abs(c.allowableCurrentIntensityInPipes-t)<1&&(n=this.projectsCalculatorService.calculateProtection(c.allowableCurrentIntensityInPipes,i))}return i&&n.protectionValue<this.maxProtectionCalculated.protectionValue&&(n=this.findNextProtection(e,this.maxProtectionCalculated)),!i&&this.maxProtectionCalculated.protectionValue<n.protectionValue&&(this.maxProtectionCalculated=n),n}},{key:"findNextProtection",value:function(e,t){var i=this;if(e.circuitType==w.LAP){var n=this.projectsCalculatorService.protections().find((function(e){return e.protectionValue>i.maxProtectionCalculated.protectionValue}));if(this.isValidProtection(e,n))return n}return t}},{key:"isValidProtection",value:function(e,t){var i=this.nominalSection(e),n=this.calculateCurrent(e.circuitType),r=this.projectsCalculatorService.tecnicalFeatures().find((function(e){return e.nominalSection==i})).allowableCurrentIntensityInPipes,c=t;return n<parseFloat((1.13*c.protectionValue).toFixed(2))&&c.protectionValue<=r}}]),t}(),Q.\u0275fac=function(e){return new(e||Q)(s.Mb(W),s.Mb(g),s.Mb(u.b),s.Mb(a.a),s.Mb(D))},Q.\u0275cmp=s.Gb({type:Q,selectors:[["circuits"]],decls:32,vars:7,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Name","maxlength","100"],["placeholder","Choose a circuit type","formControlName","circuitType"],["value","IUG"],["value","TUG"],["value","IUE"],["value","TUE"],["value","LAP"],["nbInput","","formControlName","numberOfMouths","type","number","placeholder","Number Of Mouths"],["nbInput","","formControlName","length","type","number","placeholder","Length [m]"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","info",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],[1,"form-inline"],["nbInput","","disabled","","type","text","value","Name",1,"input-inline-name"],["nbInput","","disabled","","type","text","value","Circuit Type",1,"input-inline-circuit-type"],["nbInput","","disabled","","type","text","placeholder","Number Of Mouths","value","Number Of Mouths",1,"input-inline-mouths"],["nbInput","","disabled","","type","text","placeholder","Length","value","Length [m]",1,"input-inline-length"],["nbInput","","disabled","","type","text","placeholder","Power [W]","value","Power [W]",1,"input-inline-power"],["nbInput","","disabled","","type","text","placeholder","Current [A]","value","Current [A]",1,"input-inline-current"],["nbInput","","disabled","","type","text","placeholder","Section [mm2]","value","Section [mm2]",1,"input-inline-section"],["nbInput","","disabled","","type","text","placeholder","[e%]","value","[e%]",1,"input-inline-tension"],["nbInput","","disabled","","type","text","placeholder","Protection","value","Protection",1,"input-inline-protection"],["class","form-inline",4,"ngFor","ngForOf"],["nbInput","","disabled","","type","text","placeholder","Name",1,"input-inline-name",3,"value"],["nbInput","","disabled","","type","text","placeholder","Circuit Type",1,"input-inline-circuit-type",3,"value"],["nbInput","","readonly","","type","number","placeholder","Number Of Mouths",1,"input-inline-mouths",3,"status","value"],["nbInput","","disabled","","type","number","placeholder","Length",1,"input-inline-length",3,"value"],["nbInput","","disabled","","type","number","placeholder","Power [W]",1,"input-inline-power",3,"value"],["nbInput","","disabled","","type","text","placeholder","Current [A]",1,"input-inline-current",3,"value"],["nbInput","","disabled","","type","text","placeholder","Section [mm2]",1,"input-inline-section",3,"value"],["nbInput","","readonly","","type","text","placeholder","[e%]",1,"input-inline-tension",3,"status","value"],["nbInput","","readonly","","type","text","placeholder","Protection",1,"input-inline-protection",3,"status","value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["accent","info"],[1,"form-group","row","form-horizontal"],["accent","danger"],[2,"width","20%"],["accent","success"],["accent","warning"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"nb-card",2),s.Sb(3,"nb-card-header"),s.xc(4,"Circuit "),s.Sb(5,"a",3),s.xc(6,"Back to Proyects"),s.Rb(),s.Rb(),s.Sb(7,"nb-card-body"),s.Sb(8,"form",4),s.Nb(9,"input",5),s.Sb(10,"nb-select",6),s.Sb(11,"nb-option",7),s.xc(12,"IUG"),s.Rb(),s.Sb(13,"nb-option",8),s.xc(14,"TUG"),s.Rb(),s.Sb(15,"nb-option",9),s.xc(16,"IUE"),s.Rb(),s.Sb(17,"nb-option",10),s.xc(18,"TUE"),s.Rb(),s.Sb(19,"nb-option",11),s.xc(20,"LAP"),s.Rb(),s.Rb(),s.Nb(21,"input",12),s.Nb(22,"input",13),s.Sb(23,"button",14),s.Zb("click",(function(){return t.saveCircuit()})),s.xc(24),s.Rb(),s.vc(25,z,2,0,"button",15),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(26,"div",0),s.Sb(27,"div",1),s.vc(28,Z,17,1,"nb-card",16),s.Rb(),s.Rb(),s.Sb(29,"div",0),s.Sb(30,"div",1),s.vc(31,X,147,35,"nb-card",17),s.Rb(),s.Rb()),2&e&&(s.Bb(5),s.hc("routerLink","../../../projects"),s.Bb(3),s.hc("formGroup",t.circuitForm),s.Bb(15),s.hc("disabled",t.isFormInvalid()),s.Bb(1),s.yc(t.isEdit?"Update Circuit":"Save Circuit"),s.Bb(1),s.hc("ngIf",t.isEdit),s.Bb(3),s.hc("ngIf",(null==t.circuits?null:t.circuits.length)>0),s.Bb(3),s.hc("ngIf",(null==t.circuits?null:t.circuits.length)>0))},directives:[b.j,b.k,b.g,a.f,b.i,u.s,u.k,u.d,b.v,u.a,u.j,u.c,u.f,b.K,b.I,u.n,o.m,o.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}.input-inline-name[_ngcontent-%COMP%]{width:5rem}.input-inline-circuit-type[_ngcontent-%COMP%]{width:7.5rem}.input-inline-mouths[_ngcontent-%COMP%]{width:11rem}.input-inline-length[_ngcontent-%COMP%]{width:7rem}.input-inline-power[_ngcontent-%COMP%]{width:6.8rem}.input-inline-current[_ngcontent-%COMP%]{width:7rem}.input-inline-section[_ngcontent-%COMP%]{width:9rem}.input-inline-tension[_ngcontent-%COMP%]{width:5rem}.input-inline-protection[_ngcontent-%COMP%]{width:7rem}span.text[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}span.text[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),Q)},{path:"artifacts/:projectId/:environment",component:H}],ie=((ee=function t(){e(this,t)}).\u0275mod=s.Kb({type:ee}),ee.\u0275inj=s.Jb({factory:function(e){return new(e||ee)},imports:[[a.g.forChild(te)],a.g]}),ee),ne=((Y=function t(){e(this,t)}).\u0275mod=s.Kb({type:Y}),Y.\u0275inj=s.Jb({factory:function(e){return new(e||Y)},imports:[[o.c,ie,b.l,b.P,u.e,b.h,u.p,b.w,b.L,b.U]]}),Y)},dgmN:function(t,i,n){"use strict";n.r(i),n.d(i,"PagesModule",(function(){return h}));var r,c,o,a=n("aceb"),u=n("vTDv"),s=n("tyNb"),l=[{title:"Projects",icon:"home-outline",link:"/pages/projects",home:!0}],b=n("fXoL"),m=n("mgFL"),d=[{path:"",component:(r=function t(){e(this,t),this.menu=l},r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Gb({type:r,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(b.Sb(0,"ngx-one-column-layout"),b.Nb(1,"nb-menu",0),b.Nb(2,"router-outlet"),b.Rb()),2&e&&(b.Bb(1),b.hc("items",t.menu))},directives:[m.a,a.F,s.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}"]}),r),children:[{path:"",redirectTo:"projects"},{path:"projects",loadChildren:function(){return Promise.resolve().then(n.bind(null,"0B1/")).then((function(e){return e.ProjectsModule}))}}]}],p=((c=function t(){e(this,t)}).\u0275mod=b.Kb({type:c}),c.\u0275inj=b.Jb({factory:function(e){return new(e||c)},imports:[[s.g.forChild(d)],s.g]}),c),f=n("0B1/"),h=((o=function t(){e(this,t)}).\u0275mod=b.Kb({type:o}),o.\u0275inj=b.Jb({factory:function(e){return new(e||o)},imports:[[p,u.a,a.G,f.ProjectsModule]]}),o)}}])}();
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0B1/":function(e,t,i){"use strict";i.r(t),i.d(t,"ProjectsModule",(function(){return W}));var r=i("ofXK"),n=i("tyNb"),c=i("3Pt+"),o=i("fXoL");let a=(()=>{class e{constructor(){this.key="projects"}saveProject(e){let t=this.getProjects();e.id=t.length+1,t=t.filter(t=>t.id!=e.id),t.push(e),localStorage.setItem(this.key,JSON.stringify(t))}updateProject(e,t){let i=this.getProjects();const r=i.findIndex(t=>t.id==e);r>-1&&(i[r]=t,localStorage.setItem(this.key,JSON.stringify(i)))}deleteProject(e){const t=this.getProjects().filter(t=>t.id!=e);t&&localStorage.setItem(this.key,JSON.stringify(t))}getProject(){const e=this.getProjects();return e.length>0?e[0]:null}getProjects(){const e=localStorage.getItem(this.key);return e?JSON.parse(e):[]}getProjectById(e){var t;const i=localStorage.getItem(this.key);return i?null===(t=JSON.parse(i))||void 0===t?void 0:t.find(t=>t.id==e):void 0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var s=i("aceb");function u(e,t){if(1&e){const e=o.Tb();o.Sb(0,"button",8),o.Zb("click",(function(){return o.nc(e),o.bc().cleanForm()})),o.xc(1,"Cancel"),o.Rb()}}function l(e,t){if(1&e&&(o.Sb(0,"span"),o.Sb(1,"a",17),o.xc(2,"Circuits"),o.Rb(),o.Rb()),2&e){const e=o.bc().$implicit;o.Bb(1),o.hc("routerLink","./circuits/"+e.id)}}function b(e,t){if(1&e){const e=o.Tb();o.Sb(0,"li",10),o.Nb(1,"input",11),o.Nb(2,"input",12),o.Sb(3,"button",13),o.Zb("click",(function(){o.nc(e);const i=t.$implicit;return o.bc(2).editProject(i.id)})),o.xc(4,"Edit"),o.Rb(),o.Sb(5,"button",14),o.Zb("click",(function(){o.nc(e);const i=t.$implicit;return o.bc(2).deleteProject(i.id)})),o.xc(6,"Delete"),o.Rb(),o.Sb(7,"a",15),o.xc(8,"Surfaces"),o.Rb(),o.vc(9,l,3,1,"span",16),o.Rb()}if(2&e){const e=t.$implicit;o.Bb(1),o.hc("value",e.id),o.Bb(1),o.hc("value",e.name),o.Bb(5),o.hc("routerLink","./surfaces/"+e.id),o.Bb(2),o.hc("ngIf",(null==e.surfaces?null:e.surfaces.length)>0)}}function m(e,t){if(1&e&&(o.Sb(0,"nb-card",2),o.Sb(1,"nb-card-header"),o.xc(2,"Proyects"),o.Rb(),o.Sb(3,"nb-card-body"),o.Sb(4,"ul"),o.vc(5,b,10,4,"li",9),o.Rb(),o.Rb(),o.Rb()),2&e){const e=o.bc();o.Bb(5),o.hc("ngForOf",e.projects)}}let d=(()=>{class e{constructor(e,t){this.projectsService=e,this.fb=t}ngOnInit(){this.projectForm=this.fb.group({name:["",c.r.required]}),this.projects=this.projectsService.getProjects(),this.isEdit=!1}saveProject(){var e,t;if(this.projectForm.invalid)alert("the form is invalid");else{if(this.isEdit){let i=this.projectForm.value;(null===(e=this.selectedProject)||void 0===e?void 0:e.surfaces)||(this.selectedProject.surfaces=[]),(null===(t=this.selectedProject)||void 0===t?void 0:t.circuits)||(this.selectedProject.circuits=[]),this.selectedProject.name=i.name,this.projectsService.updateProject(this.selectedProject.id,this.selectedProject)}else{let e=this.projectForm.value;e.surfaces=[],e.circuits=[],this.projectsService.saveProject(e)}this.cleanForm()}}cleanForm(){this.isEdit=!1,this.projectForm.controls.name.setValue(""),this.projects=this.projectsService.getProjects()}editProject(e){this.selectedProject=this.projectsService.getProjectById(e),this.projectForm.patchValue(this.selectedProject),this.isEdit=!0}deleteProject(e){this.projectsService.deleteProject(e),this.cleanForm()}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(a),o.Mb(c.b))},e.\u0275cmp=o.Gb({type:e,selectors:[["projects"]],decls:14,vars:5,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Project Name","maxlength","100"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","type","text","disabled","",3,"value"],["nbInput","","type","text","disabled","","maxlength","100",3,"value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["nbButton","","outline","","status","info",3,"routerLink"],[4,"ngIf"],["nbButton","","outline","","status","success",3,"routerLink"]],template:function(e,t){1&e&&(o.Sb(0,"div",0),o.Sb(1,"div",1),o.Sb(2,"nb-card",2),o.Sb(3,"nb-card-header"),o.xc(4,"Project"),o.Rb(),o.Sb(5,"nb-card-body"),o.Sb(6,"form",3),o.Nb(7,"input",4),o.Sb(8,"button",5),o.Zb("click",(function(){return t.saveProject()})),o.xc(9),o.Rb(),o.vc(10,u,2,0,"button",6),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(11,"div",0),o.Sb(12,"div",1),o.vc(13,m,6,1,"nb-card",7),o.Rb(),o.Rb()),2&e&&(o.Bb(6),o.hc("formGroup",t.projectForm),o.Bb(2),o.hc("disabled",t.projectForm.controls.name.hasError("required")),o.Bb(1),o.yc(t.isEdit?"Update Project":"Save Project"),o.Bb(1),o.hc("ngIf",t.isEdit),o.Bb(3),o.hc("ngIf",(null==t.projects?null:t.projects.length)>0))},directives:[s.j,s.k,s.i,c.s,c.k,c.d,s.v,c.a,c.j,c.c,c.f,s.g,r.m,r.l,n.f],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}"]}),e})(),p=(()=>{class e{constructor(e){this.projectsService=e}saveSurface(e,t){let i=this.projectsService.getProjects(),r=i.findIndex(t=>t.id==e);if(-1!=r){let n=i[r];n.surfaces||(n.surfaces=[]),n.surfaces.push(t),this.projectsService.updateProject(e,n)}}updateSurface(e,t){var i;let r=this.projectsService.getProjects(),n=r.findIndex(t=>t.id==e);if(-1!=n){let c=null===(i=r[n])||void 0===i?void 0:i.surfaces;if(c){let i=c.findIndex(e=>e.environment==t.environment);-1!=i&&(c[i]=t,r[n].surfaces=c,this.projectsService.updateProject(e,r[n]))}}}deleteSurface(e,t){let i=this.projectsService.getProjects(),r=i.findIndex(t=>t.id==e);if(-1!=r){let n=i[r];n.surfaces=n.surfaces.filter(e=>e.environment!=t),this.projectsService.updateProject(e,n)}}getSurface(e,t){const i=this.projectsService.getProjectById(e);return(null==i?void 0:i.surfaces)?null==i?void 0:i.surfaces.find(e=>e.environment==t):null}getSurfaces(e){const t=this.projectsService.getProjectById(e);return(null==t?void 0:t.surfaces)||[]}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(a))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=function(e){return e[e.Covered=0]="Covered",e[e.SemiCovered=1]="SemiCovered",e}({}),f=function(e){return e.Minimal="Minimal",e.Medium="Medium",e.High="High",e.Upper="Upper",e}({}),S=function(e){return e.IUG="IUG",e.TUG="TUG",e.IUE="IUE",e.TUE="TUE",e.LAP="LAP",e}({});let g=(()=>{class e{constructor(){}totalSurfaceCovered(e){return e.reduce((e,t)=>t.type==h.Covered?e+parseFloat((t.width*t.length).toFixed(2)):e+0,0)}totalSurfaceSemiCovered(e){return e.reduce((e,t)=>t.type==h.SemiCovered?e+parseFloat((t.width*t.length).toFixed(2)):e+0,0)}totalSurface(e){return this.totalSurfaceCovered(e)+this.totalSurfaceSemiCovered(e)/2}apparentPower(e){let t=this.calculateMaximumConsumptionDetermined(e);return parseFloat((t/.9/1e3).toFixed(2))}circuitsByelectrificationDegree(e){let t=[];switch(e){case f.Minimal:case f.Medium:t.push(S.IUG),t.push(S.TUG);break;case f.High:default:t.push(S.IUG),t.push(S.IUG),t.push(S.TUG),t.push(S.TUG),t.push(S.TUE)}return t}electrificationDegree(e,t){return e<=60&&t<=3.7?f.Minimal:e<=130&&t<=7?f.Medium:e<=200&&t<=11?f.High:f.Upper}simultaneityCoefficient(e){switch(e){case f.Minimal:return 1;case f.Medium:return.9;case f.High:return.8;case f.Upper:return.7;default:return 0}}maxNumberOfMouths(e){switch(e){case S.IUG:case S.TUG:return 15;case S.IUE:case S.TUE:return 12;default:return 0}}powerLoad(e){switch(e){case S.IUG:return 810;case S.TUG:return 1980;case S.IUE:case S.TUE:return 2970;default:return 0}}factorLoad(e){switch(e){case S.IUG:return.66;case S.TUG:case S.IUE:case S.TUE:return 1;default:return 0}}calculateMaximumConsumptionDetermined(e){let t=0,i=this.calculateConsumptionOfEachMoment(e);return i.summerDayConsumptionDetermined>=t&&(t=i.summerDayConsumptionDetermined),i.summerNightConsumptionDetermined>=t&&(t=i.summerNightConsumptionDetermined),i.winterDayConsumptionDetermined>=t&&(t=i.winterDayConsumptionDetermined),i.winterNightConsumptionDetermined>=t&&(t=i.winterNightConsumptionDetermined),t}calculateConsumptionOfEachMoment(e){return e.reduce((e,t)=>t.artifacts.reduce((e,t)=>(t.summerDay&&(e.summerDayConsumptionDetermined+=t.powerConsumption),t.summerNight&&(e.summerNightConsumptionDetermined+=t.powerConsumption),t.winterDay&&(e.winterDayConsumptionDetermined+=t.powerConsumption),t.winterNight&&(e.winterNightConsumptionDetermined+=t.powerConsumption),e),e),{summerDayConsumptionDetermined:0,summerNightConsumptionDetermined:0,winterDayConsumptionDetermined:0,winterNightConsumptionDetermined:0})}circuitLAPTotal(e=[],t){let i=e.filter(e=>e.circuitType!=S.LAP).reduce((e,t)=>e+parseFloat((this.powerLoad(t.circuitType)*this.factorLoad(t.circuitType)).toFixed(2)),0);return parseFloat((i*t).toFixed(2))}circuitSubtotal(e){return parseFloat((this.powerLoad(e)*this.factorLoad(e)).toFixed(2))}nominalSectionByCurrentIntensity(e){return this.tecnicalFeatures().find(t=>e<=t.allowableCurrentIntensityInPipes).nominalSection}tecnicalFeatures(){return[{nominalSection:.75,allowableCurrentIntensityInPipes:8},{nominalSection:1,allowableCurrentIntensityInPipes:10.5},{nominalSection:1.5,allowableCurrentIntensityInPipes:13},{nominalSection:2.5,allowableCurrentIntensityInPipes:18},{nominalSection:4,allowableCurrentIntensityInPipes:25},{nominalSection:6,allowableCurrentIntensityInPipes:32},{nominalSection:10,allowableCurrentIntensityInPipes:44},{nominalSection:16,allowableCurrentIntensityInPipes:59},{nominalSection:25,allowableCurrentIntensityInPipes:77},{nominalSection:35,allowableCurrentIntensityInPipes:96},{nominalSection:50,allowableCurrentIntensityInPipes:117},{nominalSection:70,allowableCurrentIntensityInPipes:149},{nominalSection:95,allowableCurrentIntensityInPipes:180},{nominalSection:120,allowableCurrentIntensityInPipes:208}]}tensionDrops(){return[{circuitType:S.LAP,maxTensionDrop:1},{circuitType:S.IUG,maxTensionDrop:2},{circuitType:S.TUG,maxTensionDrop:2},{circuitType:S.IUE,maxTensionDrop:2},{circuitType:S.TUE,maxTensionDrop:2}]}validateNominalSection(e,t,i,r,n){let c=i,o=this.sectionNominals().find(e=>e.circuitType==t.circuitType);if(n&&t.circuitType==S.LAP){const n=e.findIndex(e=>e.nominalSection==c);if(n>0&&i>o.minSectionNominal)return this.validateNominalSection(e,t,e[n-1].nominalSection,r,!1)}if(this.calcuteTensionDrop(t,i,r)>=this.tensionDrops().find(e=>e.circuitType==t.circuitType).maxTensionDrop){let n=e.filter(e=>e.nominalSection>i);return this.validateNominalSection(n,t,n[0].nominalSection,r,!1)}return i}calcuteTensionDrop(e,t,i){let r=e.length,n=Math.pow(220,2);return parseFloat((200*i*r/(47.5*n*t)).toFixed(2))}sectionNominals(){return[{circuitType:S.LAP,minSectionNominal:4},{circuitType:S.IUG,minSectionNominal:1.5},{circuitType:S.TUG,minSectionNominal:2.5},{circuitType:S.IUE,minSectionNominal:2.5},{circuitType:S.TUE,minSectionNominal:2.5}]}calculateProtection(e,t=!1){let i=e;return t?this.protections().find(e=>i<=e.protectionValue):this.protections().find(e=>i<e.protectionValue)}validateProtection(e,t){let i=t;return this.tecnicalFeatures().find(t=>t.nominalSection==e),this.protections().find(e=>e.protectionValue<=i)}protections(){return[{protectionType:C.C05,protectionValue:.5},{protectionType:C.C1,protectionValue:1},{protectionType:C.C2,protectionValue:2},{protectionType:C.C3,protectionValue:3},{protectionType:C.C4,protectionValue:4},{protectionType:C.C6,protectionValue:6},{protectionType:C.C10,protectionValue:10},{protectionType:C.C16,protectionValue:16},{protectionType:C.C20,protectionValue:20},{protectionType:C.C25,protectionValue:25},{protectionType:C.C32,protectionValue:32},{protectionType:C.C40,protectionValue:40},{protectionType:C.C50,protectionValue:50},{protectionType:C.C63,protectionValue:63}]}commonArtifacts(){return[{name:"AFEITADORA",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 2200 FRIGOR\xcdAS F/C",powerConsumption:1350,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 3500 FRIGOR\xcdAS F/C",powerConsumption:2150,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 4500 FRIGOR\xcdAS F/C",powerConsumption:2800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 2200 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:877.5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 3500 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:1397.5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 4500 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:1820,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 120 MM DE DI\xc1METRO",powerConsumption:750,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 140 MM DE DI\xc1METRO",powerConsumption:1250,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 175 MM DE DI\xc1METRO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 200 MM DE DI\xc1METRO",powerConsumption:1800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 215 MM DE DI\xc1METRO",powerConsumption:2110,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 220 MM DE DI\xc1METRO",powerConsumption:2350,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE RESISTIVO CON HORNALLA DE 150 MM DE DI\xc1METRO",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE RESISTIVO CON HORNALLA DE 190 MM DE DI\xc1METRO",powerConsumption:2e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ASPIRADORA",powerConsumption:1200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BATIDORA DE MANO",powerConsumption:300,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BOMBA DE AGUA DE 1/2 HP",powerConsumption:380,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BOMBA DE AGUA DE 3/4 HP",powerConsumption:570,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CAFETERA DE FILTRO EL\xc9CTRICA",powerConsumption:900,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CALOVENTILADOR CHICO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CARGADOR DE CELULAR GEN\xc9RICO",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"COMPUTADORA (S\xd3LO LA CPU)",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 80 M3/HORA",powerConsumption:12,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 200 M3/HORA",powerConsumption:20,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 1200 M3/HORA",powerConsumption:50,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ESTUFA HAL\xd3GENA DE 3 VELAS C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ESTUFA DE CUARZO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"FREEZER",powerConsumption:250,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA",powerConsumption:150,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA CON FREEZER",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA CON FREEZER - INVERTER",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HORNO EL\xc9CTRICO DE 25 A 30 LITROS C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HORNO EL\xc9CTRICO DE 73 LITROS C/TERMOSTATO, PARA EMPOTRAR",powerConsumption:2450,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 11W",powerConsumption:11,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 15W",powerConsumption:15,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 20W",powerConsumption:20,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 100 W",powerConsumption:100,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 40 W",powerConsumption:40,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 60 W",powerConsumption:60,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 5 W",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 7 W",powerConsumption:7,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 9 W",powerConsumption:9,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 12 W",powerConsumption:12,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"LICUADORA",powerConsumption:400,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"MICROONDAS 800 W",powerConsumption:800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"MINIPIMER",powerConsumption:400,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PARRILLA EL\xc9CTRICA 2000 W",powerConsumption:2e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PAVA EL\xc9CTRICA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PLANCHA PARA ROPA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PLANCHA PARA ROPA A VAPOR",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PULIDORA",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"RADIO",powerConsumption:15,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SECADOR DE PELO",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SOMMIER C/LEVANTACOLCH\xd3N",powerConsumption:130,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SPOT DICROICA 50 W",powerConsumption:50,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TELEVISOR DE 42''",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TOSTADORA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TURBO CALOVENTILADOR CHICO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"VENTILADOR DE MESA CHICO",powerConsumption:55,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"VENTILADOR DE PIE GRANDE",powerConsumption:110,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=function(e){return e.C05="C05",e.C1="C1",e.C2="C2",e.C3="C3",e.C4="C4",e.C6="C6",e.C10="C10",e.C16="C16",e.C20="C20",e.C25="C25",e.C32="C32",e.C40="C40",e.C50="C50",e.C63="C63",e}({});function R(e,t){if(1&e){const e=o.Tb();o.Sb(0,"button",15),o.Zb("click",(function(){return o.nc(e),o.bc().cleanForm()})),o.xc(1,"Cancel"),o.Rb()}}function v(e,t){if(1&e){const e=o.Tb();o.Sb(0,"li",17),o.Nb(1,"input",18),o.Nb(2,"input",19),o.Nb(3,"input",20),o.Nb(4,"input",21),o.Sb(5,"button",22),o.Zb("click",(function(){o.nc(e);const i=t.$implicit;return o.bc(2).editSurface(i.environment)})),o.xc(6,"Edit"),o.Rb(),o.Sb(7,"button",23),o.Zb("click",(function(){o.nc(e);const i=t.$implicit;return o.bc(2).deleteSurface(i.environment)})),o.xc(8,"Delete"),o.Rb(),o.Sb(9,"a",3),o.xc(10,"Artifacts"),o.Rb(),o.Rb()}if(2&e){const e=t.$implicit,i=o.bc(2);o.Bb(1),o.hc("value",e.environment),o.Bb(1),o.hc("value",e.width),o.Bb(1),o.hc("value",e.length),o.Bb(1),o.hc("value",(e.width*e.length).toFixed(2)),o.Bb(5),o.hc("routerLink","../../artifacts/"+i.projectId+"/"+e.environment)}}function y(e,t){if(1&e&&(o.Sb(0,"nb-card",2),o.Sb(1,"nb-card-header"),o.xc(2,"Surfaces Covered"),o.Rb(),o.Sb(3,"nb-card-body"),o.Sb(4,"ul"),o.vc(5,v,11,5,"li",16),o.Rb(),o.Rb(),o.Rb()),2&e){const e=o.bc();o.Bb(5),o.hc("ngForOf",e.coveredSurfaces())}}function w(e,t){if(1&e){const e=o.Tb();o.Sb(0,"li",17),o.Nb(1,"input",18),o.Nb(2,"input",24),o.Nb(3,"input",25),o.Nb(4,"input",21),o.Sb(5,"button",22),o.Zb("click",(function(){o.nc(e);const i=t.$implicit;return o.bc(2).editSurface(i.environment)})),o.xc(6,"Edit"),o.Rb(),o.Sb(7,"button",23),o.Zb("click",(function(){o.nc(e);const i=t.$implicit;return o.bc(2).deleteSurface(i.environment)})),o.xc(8,"Delete"),o.Rb(),o.Sb(9,"a",3),o.xc(10,"Artifacts"),o.Rb(),o.Rb()}if(2&e){const e=t.$implicit,i=o.bc(2);o.Bb(1),o.hc("value",e.environment),o.Bb(1),o.hc("value",e.width),o.Bb(1),o.hc("value",e.length),o.Bb(1),o.hc("value",(e.width*e.length).toFixed(2)),o.Bb(5),o.hc("routerLink","../../artifacts/"+i.projectId+"/"+e.environment)}}function D(e,t){if(1&e&&(o.Sb(0,"nb-card",2),o.Sb(1,"nb-card-header"),o.xc(2,"Surfaces Semi Covered"),o.Rb(),o.Sb(3,"nb-card-body"),o.Sb(4,"ul"),o.vc(5,w,11,5,"li",16),o.Rb(),o.Rb(),o.Rb()),2&e){const e=o.bc();o.Bb(5),o.hc("ngForOf",e.semiCoveredSurfaces())}}function N(e,t){if(1&e&&(o.Sb(0,"span"),o.Sb(1,"a",44),o.xc(2,"Circuits"),o.Rb(),o.Rb()),2&e){const e=o.bc(2);o.Bb(1),o.hc("routerLink","../../circuits/"+e.projectId)}}function I(e,t){if(1&e&&(o.Sb(0,"div",45),o.Sb(1,"div",46),o.Nb(2,"input",47),o.Rb(),o.Rb()),2&e){const e=t.$implicit;o.Bb(2),o.hc("placeholder",e)("value",e)}}function A(e,t){if(1&e&&(o.Sb(0,"nb-card",26),o.Sb(1,"nb-card-header"),o.xc(2,"Totals"),o.Rb(),o.Sb(3,"nb-card-body"),o.Sb(4,"div",27),o.Sb(5,"div",28),o.Sb(6,"div",29),o.Sb(7,"div",28),o.Sb(8,"span"),o.xc(9,"Covered Surface: "),o.Rb(),o.Rb(),o.Sb(10,"div",30),o.Nb(11,"input",31),o.Rb(),o.Rb(),o.Sb(12,"div",29),o.Sb(13,"div",28),o.Sb(14,"span",32),o.xc(15,"Semi Covered Surface: "),o.Rb(),o.Rb(),o.Sb(16,"div",30),o.Nb(17,"input",33),o.Rb(),o.Rb(),o.Sb(18,"div",29),o.Sb(19,"div",28),o.Sb(20,"span",32),o.xc(21,"Semi Covered Surface 50%: "),o.Rb(),o.Rb(),o.Sb(22,"div",30),o.Nb(23,"input",34),o.Rb(),o.Rb(),o.Sb(24,"div",29),o.Sb(25,"div",28),o.Sb(26,"span",32),o.xc(27,"Total Surface [m2]: "),o.Rb(),o.Rb(),o.Sb(28,"div",30),o.Nb(29,"input",21),o.Rb(),o.Rb(),o.Sb(30,"div",29),o.Sb(31,"div",28),o.Sb(32,"span",32),o.xc(33,"Maximum Consumption Determined [W]: "),o.Rb(),o.Rb(),o.Sb(34,"div",30),o.Nb(35,"input",35),o.Rb(),o.Rb(),o.Sb(36,"div",29),o.Sb(37,"div",28),o.Sb(38,"span",32),o.xc(39,"Apparent Power [KVA]: "),o.Rb(),o.Rb(),o.Sb(40,"div",30),o.Nb(41,"input",36),o.Rb(),o.Rb(),o.Sb(42,"div",29),o.Sb(43,"div",28),o.Sb(44,"span",32),o.xc(45,"Degree of electrification: "),o.Rb(),o.Rb(),o.Sb(46,"div",30),o.Nb(47,"input",37),o.Rb(),o.Rb(),o.Rb(),o.Sb(48,"div",30),o.Sb(49,"div",0),o.Sb(50,"div",1),o.Sb(51,"nb-card",38),o.Sb(52,"nb-card-header"),o.xc(53,"Degrees of electrification"),o.Rb(),o.Sb(54,"nb-card-body"),o.Sb(55,"table"),o.Sb(56,"thead"),o.Sb(57,"tr"),o.Sb(58,"th",39),o.xc(59,"Degree of electrification"),o.Rb(),o.Sb(60,"th",40),o.xc(61,"Surface (Application limit)"),o.Rb(),o.Sb(62,"th",41),o.xc(63,"Calculated maximum simultaneous power demand (only to determine the degree of electrification)"),o.Rb(),o.Rb(),o.Rb(),o.Sb(64,"tbody"),o.Sb(65,"tr"),o.Sb(66,"td"),o.xc(67," Minimal "),o.Rb(),o.Sb(68,"td"),o.xc(69," <= 60 m2 "),o.Rb(),o.Sb(70,"td"),o.xc(71," <= 3,7 kVA "),o.Rb(),o.Rb(),o.Sb(72,"tr"),o.Sb(73,"td"),o.xc(74," Medium "),o.Rb(),o.Sb(75,"td"),o.xc(76," > 60 m2 && <= 130 m2 "),o.Rb(),o.Sb(77,"td"),o.xc(78," <= 7 kVA "),o.Rb(),o.Rb(),o.Sb(79,"tr"),o.Sb(80,"td"),o.xc(81," High "),o.Rb(),o.Sb(82,"td"),o.xc(83," > 130 m2 && <= 200 m2 "),o.Rb(),o.Sb(84,"td"),o.xc(85," <= 11 kVA "),o.Rb(),o.Rb(),o.Sb(86,"tr"),o.Sb(87,"td"),o.xc(88," Upper "),o.Rb(),o.Sb(89,"td"),o.xc(90," > 200 m2 "),o.Rb(),o.Sb(91,"td"),o.xc(92," > 11 kVA "),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(93,"div",0),o.Sb(94,"div",1),o.Sb(95,"nb-card",38),o.Sb(96,"nb-card-header"),o.xc(97," Minimal circuits according to degree of electrification "),o.vc(98,N,3,1,"span",42),o.Rb(),o.Sb(99,"nb-card-body",17),o.vc(100,I,3,2,"div",43),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb()),2&e){const e=o.bc();o.Bb(11),o.hc("value",e.totalSurfaceCovered()),o.Bb(6),o.hc("value",e.totalSurfaceSemiCovered()),o.Bb(6),o.hc("value",e.totalSurfaceSemiCovered()/2),o.Bb(6),o.hc("value",e.totalSurface()),o.Bb(6),o.hc("value",e.calculateMaximumConsumptionDetermined()),o.Bb(6),o.hc("value",e.apparentPower()),o.Bb(6),o.hc("value",e.electrificationDegree()),o.Bb(18),o.sc(e.isMinimalElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),o.Bb(7),o.sc(e.isMediumElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),o.Bb(7),o.sc(e.isHighElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),o.Bb(7),o.sc(e.isUpperElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),o.Bb(12),o.hc("ngIf",(null==e.surfaces?null:e.surfaces.length)>0),o.Bb(2),o.hc("ngForOf",e.circuits())}}let O=(()=>{class e{constructor(e,t,i,r){this.surfacesService=e,this.fb=t,this.activatedRoute=i,this.projectCalcultatorService=r}ngOnInit(){this.surfaceForm=this.fb.group({type:["",c.r.required],environment:["",c.r.required],width:["",c.r.required],length:["",c.r.required]}),this.projectId=parseInt(this.activatedRoute.snapshot.params.projectId),this.surfaces=this.surfacesService.getSurfaces(parseInt(this.activatedRoute.snapshot.params.projectId)),this.isEdit=!1}saveSurface(){if(this.surfaceForm.invalid)alert("the form is invalid");else{if(this.isEdit){let e=this.surfaceForm.value;this.selectedSurface.type=e.type,this.selectedSurface.environment=e.environment,this.selectedSurface.width=e.width,this.selectedSurface.length=e.length,this.surfacesService.updateSurface(this.projectId,this.selectedSurface)}else{let e=this.surfaceForm.value;e.artifacts=[],this.surfacesService.saveSurface(this.projectId,e)}this.cleanForm()}}cleanForm(){this.isEdit=!1,this.surfaceForm.controls.type.setValue(""),this.surfaceForm.controls.environment.setValue(""),this.surfaceForm.controls.width.setValue(""),this.surfaceForm.controls.length.setValue(""),this.surfaces=this.surfacesService.getSurfaces(this.projectId)}editSurface(e){this.selectedSurface=this.surfacesService.getSurface(this.projectId,e),this.surfaceForm.patchValue(this.selectedSurface),this.isEdit=!0}deleteSurface(e){this.surfacesService.deleteSurface(this.projectId,e),this.cleanForm()}isFormInvalid(){return this.surfaceForm.controls.type.hasError("required")||this.surfaceForm.controls.environment.hasError("required")||this.surfaceForm.controls.width.hasError("required")||this.surfaceForm.controls.length.hasError("required")}coveredSurfaces(){return this.surfacesService.getSurfaces(this.projectId).filter(e=>e.type==h.Covered)}semiCoveredSurfaces(){return this.surfacesService.getSurfaces(this.projectId).filter(e=>e.type==h.SemiCovered)}totalSurfaceCovered(){let e=this.surfacesService.getSurfaces(this.projectId);return this.projectCalcultatorService.totalSurfaceCovered(e)}totalSurfaceSemiCovered(){let e=this.surfacesService.getSurfaces(this.projectId);return this.projectCalcultatorService.totalSurfaceSemiCovered(e)}totalSurface(){let e=this.surfacesService.getSurfaces(this.projectId);return this.projectCalcultatorService.totalSurface(e)}calculateMaximumConsumptionDetermined(){let e=this.surfacesService.getSurfaces(this.projectId);return this.projectCalcultatorService.calculateMaximumConsumptionDetermined(e)}apparentPower(){let e=this.surfacesService.getSurfaces(this.projectId);return this.projectCalcultatorService.apparentPower(e)}electrificationDegree(){return this.projectCalcultatorService.electrificationDegree(this.totalSurface(),this.apparentPower())}isMinimalElectrificationDegree(){return this.electrificationDegree()==f.Minimal}isMediumElectrificationDegree(){return this.electrificationDegree()==f.Medium}isHighElectrificationDegree(){return this.electrificationDegree()==f.High}isUpperElectrificationDegree(){return this.electrificationDegree()==f.Upper}circuits(){let e=this.electrificationDegree();return this.projectCalcultatorService.circuitsByelectrificationDegree(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(p),o.Mb(c.b),o.Mb(n.a),o.Mb(g))},e.\u0275cmp=o.Gb({type:e,selectors:[["surfaces"]],decls:29,vars:8,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["placeholder","Choose a surface type","formControlName","type"],["value","0"],["value","1"],["nbInput","","formControlName","environment","type","text","placeholder","Environment","maxlength","100"],["nbInput","","formControlName","width","type","number","placeholder","Width [m]"],["nbInput","","formControlName","length","type","number","placeholder","Length [m]"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","info",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","disabled","","type","text","placeholder","Environment",3,"value"],["nbInput","","disabled","","type","number","placeholder","Width [m]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Length [m]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Surface [m2]",3,"value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["nbInput","","disabled","","type","number","placeholder","Width",3,"value"],["nbInput","","disabled","","type","number","placeholder","Length",3,"value"],["accent","info"],[1,"form-group","row","form-horizontal"],[1,"col-md-5"],[1,"form-group","row"],[1,"col-md-7"],["nbInput","","disabled","","type","number","placeholder","Surface Covered [m2]",3,"value"],[1,"text"],["nbInput","","disabled","","type","number","placeholder","Surface Semi Covered [m2]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Surface Semi Covered %50 [m2]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Maximum Consumption Determined [W]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Apparent Power [KVA]",3,"value"],["nbInput","","disabled","","type","text","placeholder","Apparent Power [KVA]",3,"value"],["accent","danger"],[2,"width","20%"],[2,"width","40%"],[2,"width","60%"],[4,"ngIf"],["class","row inline-form-card",4,"ngFor","ngForOf"],["nbButton","","outline","","status","success",3,"routerLink"],[1,"row","inline-form-card"],[1,"col-md-2"],["nbInput","","disabled","","type","text",3,"placeholder","value"]],template:function(e,t){var i,r;1&e&&(o.Sb(0,"div",0),o.Sb(1,"div",1),o.Sb(2,"nb-card",2),o.Sb(3,"nb-card-header"),o.xc(4,"Surface "),o.Sb(5,"a",3),o.xc(6,"Back to Proyects"),o.Rb(),o.Rb(),o.Sb(7,"nb-card-body"),o.Sb(8,"form",4),o.Sb(9,"nb-select",5),o.Sb(10,"nb-option",6),o.xc(11,"Covered"),o.Rb(),o.Sb(12,"nb-option",7),o.xc(13,"Semi-Covered"),o.Rb(),o.Rb(),o.Nb(14,"input",8),o.Nb(15,"input",9),o.Nb(16,"input",10),o.Sb(17,"button",11),o.Zb("click",(function(){return t.saveSurface()})),o.xc(18),o.Rb(),o.vc(19,R,2,0,"button",12),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(20,"div",0),o.Sb(21,"div",1),o.vc(22,y,6,1,"nb-card",13),o.Rb(),o.Rb(),o.Sb(23,"div",0),o.Sb(24,"div",1),o.vc(25,D,6,1,"nb-card",13),o.Rb(),o.Rb(),o.Sb(26,"div",0),o.Sb(27,"div",1),o.vc(28,A,101,17,"nb-card",14),o.Rb(),o.Rb()),2&e&&(o.Bb(5),o.hc("routerLink","../../../projects"),o.Bb(3),o.hc("formGroup",t.surfaceForm),o.Bb(9),o.hc("disabled",t.isFormInvalid()),o.Bb(1),o.yc(t.isEdit?"Update Surface":"Save Surface"),o.Bb(1),o.hc("ngIf",t.isEdit),o.Bb(3),o.hc("ngIf",(null==(i=t.coveredSurfaces())?null:i.length)>0),o.Bb(3),o.hc("ngIf",(null==(r=t.semiCoveredSurfaces())?null:r.length)>0),o.Bb(3),o.hc("ngIf",(null==t.surfaces?null:t.surfaces.length)>0))},directives:[s.j,s.k,s.g,n.f,s.i,c.s,c.k,c.d,s.K,c.j,c.c,s.I,s.v,c.a,c.f,c.n,r.m,r.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}span.text[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}span.text[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),e})(),E=(()=>{class e{constructor(e){this.surfacesService=e}saveArtifact(e,t,i){let r=this.surfacesService.getSurface(e,t);null!=r&&(r.artifacts||(r.artifacts=[]),r.artifacts.push(i),this.surfacesService.updateSurface(e,r))}updateArtifacts(e,t,i){let r=this.surfacesService.getSurface(e,t);if(r){const t=r.artifacts.findIndex(e=>e.name==i.name);1!=t&&(r.artifacts[t]=i,this.surfacesService.updateSurface(e,r))}}deleteArtifact(e,t,i){let r=this.surfacesService.getSurface(e,t);r&&(r.artifacts=r.artifacts.filter(e=>e.name!=i),this.surfacesService.updateSurface(e,r))}getArtifact(e,t,i){let r=this.surfacesService.getSurface(e,t);return(null==r?void 0:r.artifacts)?null==r?void 0:r.artifacts.find(e=>e.name==i):null}getArtifacts(e,t){let i=this.surfacesService.getSurface(e,t);return(null==i?void 0:i.artifacts)||[]}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(p))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function x(e,t){if(1&e){const e=o.Tb();o.Sb(0,"li",19),o.Nb(1,"input",20),o.Nb(2,"input",21),o.Sb(3,"nb-toggle",22),o.xc(4,"Consume In Summer Day"),o.Rb(),o.Sb(5,"nb-toggle",22),o.xc(6,"Consume In Summer Night"),o.Rb(),o.Sb(7,"nb-toggle",22),o.xc(8,"Consume In Winter Day"),o.Rb(),o.Sb(9,"nb-toggle",22),o.xc(10,"Consume In Winter Night"),o.Rb(),o.Sb(11,"button",23),o.Zb("click",(function(){o.nc(e);const i=t.$implicit,r=o.bc(2);return r.editArtifact(r.environment,i.name)})),o.xc(12,"Edit"),o.Rb(),o.Sb(13,"button",24),o.Zb("click",(function(){o.nc(e);const i=t.$implicit,r=o.bc(2);return r.deleteArtifact(r.environment,i.name)})),o.xc(14,"Delete"),o.Rb(),o.Rb()}if(2&e){const e=t.$implicit,i=o.bc(2);o.Bb(1),o.hc("value",e.name),o.Bb(1),o.hc("value",e.powerConsumption),o.Bb(1),o.hc("checked",e.summerDay),o.Bb(2),o.hc("checked",e.summerNight),o.Bb(2),o.hc("checked",e.winterDay),o.Bb(2),o.hc("checked",e.winterNight),o.Bb(2),o.hc("disabled",i.isEdit),o.Bb(2),o.hc("disabled",i.isEdit)}}function P(e,t){if(1&e&&(o.Sb(0,"nb-card",2),o.Sb(1,"nb-card-header"),o.xc(2,"Artifacts"),o.Rb(),o.Sb(3,"nb-card-body"),o.Sb(4,"ul"),o.vc(5,x,15,8,"li",18),o.Rb(),o.Rb(),o.Rb()),2&e){const e=o.bc();o.Bb(5),o.hc("ngForOf",e.artifacts)}}function T(e,t){if(1&e){const e=o.Tb();o.Sb(0,"tr"),o.Sb(1,"td"),o.xc(2),o.Rb(),o.Sb(3,"td"),o.xc(4),o.Rb(),o.Sb(5,"td"),o.Sb(6,"button",25),o.Zb("click",(function(){o.nc(e);const i=t.$implicit;return o.bc().addArtifact(i)})),o.xc(7,"Add"),o.Rb(),o.Rb(),o.Rb()}if(2&e){const e=t.$implicit,i=o.bc();o.Bb(2),o.zc(" ",e.name," "),o.Bb(2),o.zc(" ",e.powerConsumption," "),o.Bb(2),o.hc("disabled",i.isEdit)}}let M=(()=>{class e{constructor(e,t,i,r){this.artifactsService=e,this.projectsCalculatorService=t,this.fb=i,this.activatedRoute=r}ngOnInit(){this.artifactForm=this.fb.group({name:["",c.r.required],powerConsumption:["",c.r.required],summerDay:[!1,c.r.required],summerNight:[!1,c.r.required],winterDay:[!1,c.r.required],winterNight:[!1,c.r.required]}),this.projectId=this.activatedRoute.snapshot.params.projectId,this.environment=this.activatedRoute.snapshot.params.environment,this.artifacts=this.artifactsService.getArtifacts(this.activatedRoute.snapshot.params.projectId,this.activatedRoute.snapshot.params.environment),this.isEdit=!1}saveArtifact(){if(this.artifactForm.invalid)alert("the form is invalid");else{if(this.isEdit){let e=this.artifactForm.value;this.selectedArtifact.name=e.name,this.selectedArtifact.powerConsumption=e.powerConsumption,this.selectedArtifact.summerDay=e.summerDay,this.selectedArtifact.summerNight=e.summerNight,this.selectedArtifact.winterDay=e.winterDay,this.selectedArtifact.winterNight=e.winterNight,this.artifactsService.updateArtifacts(this.projectId,this.environment,this.selectedArtifact)}else this.artifactsService.saveArtifact(this.projectId,this.environment,this.artifactForm.value);this.cleanForm()}}cleanForm(){this.isEdit=!1,this.artifactForm.reset(),this.artifacts=this.artifactsService.getArtifacts(this.projectId,this.environment)}editArtifact(e,t){this.selectedArtifact=this.artifactsService.getArtifact(this.projectId,e,t),this.artifactForm.patchValue(this.selectedArtifact),this.artifactForm.markAsDirty(),this.isEdit=!0}addArtifact(e){this.artifactForm.patchValue(e),this.artifactForm.markAsDirty()}deleteArtifact(e,t){this.artifactsService.deleteArtifact(this.projectId,e,t),this.cleanForm()}isFormInvalid(){return this.artifactForm.controls.name.hasError("required")||this.artifactForm.controls.powerConsumption.hasError("required")||this.artifactForm.controls.summerDay.hasError("required")||this.artifactForm.controls.summerNight.hasError("required")||this.artifactForm.controls.winterDay.hasError("required")||this.artifactForm.controls.winterNight.hasError("required")}isDirty(){return this.artifactForm.dirty}commonArtifacts(){return this.projectsCalculatorService.commonArtifacts()}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(E),o.Mb(g),o.Mb(c.b),o.Mb(n.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["artifacts"]],decls:43,vars:9,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Name","maxlength","100"],["nbInput","","formControlName","powerConsumption","type","number","placeholder","Power Consumption [W]"],["formControlName","summerDay","status","info"],["formControlName","summerNight","status","info"],["formControlName","winterDay","status","info"],["formControlName","winterNight","status","info"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"disabled","click"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","warning"],[2,"width","40%"],[2,"width","20%"],[4,"ngFor","ngForOf"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","disabled","","type","text","placeholder","Name",3,"value"],["nbInput","","disabled","","type","number","placeholder","Power Consumption [W]",3,"value"],["disabled","","status","info",3,"checked"],["nbButton","","outline","","status","primary",3,"disabled","click"],["nbButton","","outline","","status","danger",3,"disabled","click"],["nbButton","","outline","","status","success",3,"disabled","click"]],template:function(e,t){1&e&&(o.Sb(0,"div",0),o.Sb(1,"div",1),o.Sb(2,"nb-card",2),o.Sb(3,"nb-card-header"),o.xc(4),o.Sb(5,"a",3),o.xc(6,"Back to Surfaces"),o.Rb(),o.Rb(),o.Sb(7,"nb-card-body"),o.Sb(8,"form",4),o.Nb(9,"input",5),o.Nb(10,"input",6),o.Sb(11,"nb-toggle",7),o.xc(12,"Consume In Summer Day"),o.Rb(),o.Sb(13,"nb-toggle",8),o.xc(14,"Consume In Summer Night"),o.Rb(),o.Sb(15,"nb-toggle",9),o.xc(16,"Consume In Winter Day"),o.Rb(),o.Sb(17,"nb-toggle",10),o.xc(18,"Consume In Winter Night"),o.Rb(),o.Sb(19,"button",11),o.Zb("click",(function(){return t.saveArtifact()})),o.xc(20),o.Rb(),o.Sb(21,"button",12),o.Zb("click",(function(){return t.cleanForm()})),o.xc(22),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(23,"div",0),o.Sb(24,"div",1),o.vc(25,P,6,1,"nb-card",13),o.Rb(),o.Rb(),o.Sb(26,"div",0),o.Sb(27,"div",1),o.Sb(28,"nb-card",14),o.Sb(29,"nb-card-header"),o.xc(30,"Common Artifacts"),o.Rb(),o.Sb(31,"nb-card-body"),o.Sb(32,"table"),o.Sb(33,"thead"),o.Sb(34,"tr"),o.Sb(35,"th",15),o.xc(36,"Artifact Name"),o.Rb(),o.Sb(37,"th",16),o.xc(38,"Power"),o.Rb(),o.Sb(39,"th",16),o.xc(40,"Action"),o.Rb(),o.Rb(),o.Rb(),o.Sb(41,"tbody"),o.vc(42,T,8,3,"tr",17),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb()),2&e&&(o.Bb(4),o.zc("Artifact for environment: ",t.environment," "),o.Bb(1),o.hc("routerLink","../../../surfaces/"+t.projectId),o.Bb(3),o.hc("formGroup",t.artifactForm),o.Bb(11),o.hc("disabled",t.isFormInvalid()),o.Bb(1),o.yc(t.isEdit?"Update Artifact":"Save Artifact"),o.Bb(1),o.hc("disabled",!t.isDirty()),o.Bb(1),o.yc(t.isEdit?"Cancel":"Clean"),o.Bb(3),o.hc("ngIf",(null==t.artifacts?null:t.artifacts.length)>0),o.Bb(17),o.hc("ngForOf",t.commonArtifacts()))},directives:[s.j,s.k,s.g,n.f,s.i,c.s,c.k,c.d,s.v,c.a,c.j,c.c,c.f,c.n,s.T,r.m,r.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),e})(),j=(()=>{class e{constructor(e){this.projectsService=e}saveCircuit(e,t){let i=this.projectsService.getProjects(),r=i.findIndex(t=>t.id==e);if(-1!=r){let n=i[r];n.circuits||(n.circuits=[]),n.circuits=this.addCircuit(n.circuits,t),this.projectsService.updateProject(e,n)}}addCircuit(e,t){if(t.circuitType===S.LAP)e.push(t);else{const i=e.findIndex(e=>e.circuitType===S.LAP);-1===i?e.push(t):e.splice(i,0,t)}return e}updateCircuit(e,t){var i;let r=this.projectsService.getProjects(),n=r.findIndex(t=>t.id==e);if(-1!=n){let c=null===(i=r[n])||void 0===i?void 0:i.circuits;if(c){let i=c.findIndex(e=>e.name==t.name);-1!=i&&(c[i]=t,r[n].circuits=c,this.projectsService.updateProject(e,r[n]))}}}deleteCircuit(e,t){let i=this.projectsService.getProjects(),r=i.findIndex(t=>t.id==e);if(-1!=r){let n=i[r];n.circuits=n.circuits.filter(e=>e.name!=t),this.projectsService.updateProject(e,n)}}getCircuit(e,t){const i=this.projectsService.getProjectById(e);return(null==i?void 0:i.circuits)?null==i?void 0:i.circuits.find(e=>e.name==t):null}getCircuits(e){const t=this.projectsService.getProjectById(e);return(null==t?void 0:t.circuits)||[]}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(a))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function B(e,t){if(1&e){const e=o.Tb();o.Sb(0,"button",18),o.Zb("click",(function(){return o.nc(e),o.bc().cleanForm()})),o.xc(1,"Cancel"),o.Rb()}}function F(e,t){if(1&e){const e=o.Tb();o.Sb(0,"li",19),o.Nb(1,"input",30),o.Nb(2,"input",31),o.Nb(3,"input",32),o.Nb(4,"input",33),o.Nb(5,"input",34),o.Nb(6,"input",35),o.Nb(7,"input",36),o.Nb(8,"input",37),o.Nb(9,"input",38),o.Sb(10,"button",39),o.Zb("click",(function(){o.nc(e);const i=t.$implicit;return o.bc(2).editCircuit(i.name)})),o.xc(11,"Edit"),o.Rb(),o.Sb(12,"button",40),o.Zb("click",(function(){o.nc(e);const i=t.$implicit;return o.bc(2).deleteCircuit(i.name)})),o.xc(13,"Delete"),o.Rb(),o.Rb()}if(2&e){const e=t.$implicit,r=o.bc(2);var i;o.Bb(1),o.hc("value",e.name),o.Bb(1),o.hc("value",e.circuitType),o.Bb(1),o.hc("status",e.numberOfMouths<=r.maxNumberOfMouths(e.circuitType)?"success":"danger")("value",e.numberOfMouths),o.Bb(1),o.hc("value",e.length),o.Bb(1),o.hc("value",r.powerLoad(e.circuitType)),o.Bb(1),o.hc("value",r.calculateCurrent(e.circuitType)),o.Bb(1),o.hc("value",r.nominalSection(e)),o.Bb(1),o.hc("status",r.isValidTension(e)?"success":"danger")("value",r.calculateTensionDrop(e)),o.Bb(1),o.hc("status",r.isValidProtection(e,r.calculateProtection(e))?"success":"danger")("value",null==(i=r.calculateProtection(e))?null:i.protectionType)}}function L(e,t){if(1&e&&(o.Sb(0,"nb-card",2),o.Sb(1,"nb-card-header"),o.xc(2,"Circuits"),o.Rb(),o.Sb(3,"nb-card-body"),o.Sb(4,"ul"),o.Sb(5,"li",19),o.Nb(6,"input",20),o.Nb(7,"input",21),o.Nb(8,"input",22),o.Nb(9,"input",23),o.Nb(10,"input",24),o.Nb(11,"input",25),o.Nb(12,"input",26),o.Nb(13,"input",27),o.Nb(14,"input",28),o.Rb(),o.Rb(),o.Sb(15,"ul"),o.vc(16,F,14,12,"li",29),o.Rb(),o.Rb(),o.Rb()),2&e){const e=o.bc();o.Bb(16),o.hc("ngForOf",e.circuits)}}function k(e,t){if(1&e&&(o.Sb(0,"tr"),o.Sb(1,"td"),o.xc(2),o.Rb(),o.Sb(3,"td"),o.xc(4),o.Rb(),o.Rb()),2&e){const e=t.$implicit;o.Bb(2),o.zc(" ",e.nominalSection," "),o.Bb(2),o.zc(" ",e.allowableCurrentIntensityInPipes," ")}}function U(e,t){if(1&e&&(o.Sb(0,"tr"),o.Sb(1,"td"),o.xc(2),o.Rb(),o.Sb(3,"td"),o.xc(4),o.Rb(),o.Rb()),2&e){const e=t.$implicit;o.Bb(2),o.zc(" ",e.circuitType," "),o.Bb(2),o.zc(" <= ",e.maxTensionDrop," % ")}}function V(e,t){if(1&e&&(o.Sb(0,"tr"),o.Sb(1,"td"),o.xc(2),o.Rb(),o.Sb(3,"td"),o.xc(4),o.Rb(),o.Rb()),2&e){const e=t.$implicit;o.Bb(2),o.zc(" ",e.circuitType," "),o.Bb(2),o.zc(" >= ",e.minSectionNominal," mm2 ")}}function G(e,t){if(1&e&&(o.Sb(0,"nb-card",41),o.Sb(1,"nb-card-header"),o.xc(2,"References"),o.Rb(),o.Sb(3,"nb-card-body"),o.Sb(4,"div",42),o.Sb(5,"div",1),o.Sb(6,"nb-card",43),o.Sb(7,"nb-card-header"),o.xc(8,"Number of Mouths"),o.Rb(),o.Sb(9,"nb-card-body"),o.Sb(10,"table"),o.Sb(11,"thead"),o.Sb(12,"tr"),o.Sb(13,"th",44),o.xc(14,"Circuit Type"),o.Rb(),o.Sb(15,"th",44),o.xc(16,"Designation"),o.Rb(),o.Sb(17,"th",44),o.xc(18,"Maximum Number of Mouths"),o.Rb(),o.Sb(19,"th",44),o.xc(20,"Power Load"),o.Rb(),o.Sb(21,"th",44),o.xc(22,"Factor Load"),o.Rb(),o.Rb(),o.Rb(),o.Sb(23,"tbody"),o.Sb(24,"tr"),o.Sb(25,"td"),o.xc(26),o.Rb(),o.Sb(27,"td"),o.xc(28," General purpose lighting "),o.Rb(),o.Sb(29,"td"),o.xc(30),o.Rb(),o.Sb(31,"td"),o.xc(32),o.Rb(),o.Sb(33,"td"),o.xc(34),o.Rb(),o.Rb(),o.Sb(35,"tr"),o.Sb(36,"td"),o.xc(37),o.Rb(),o.Sb(38,"td"),o.xc(39," General purpose sockets "),o.Rb(),o.Sb(40,"td"),o.xc(41),o.Rb(),o.Sb(42,"td"),o.xc(43),o.Rb(),o.Sb(44,"td"),o.xc(45),o.Rb(),o.Rb(),o.Sb(46,"tr"),o.Sb(47,"td"),o.xc(48),o.Rb(),o.Sb(49,"td"),o.xc(50," Special use lighting "),o.Rb(),o.Sb(51,"td"),o.xc(52),o.Rb(),o.Sb(53,"td"),o.xc(54),o.Rb(),o.Sb(55,"td"),o.xc(56),o.Rb(),o.Rb(),o.Sb(57,"tr"),o.Sb(58,"td"),o.xc(59),o.Rb(),o.Sb(60,"td"),o.xc(61," Special purpose sockets "),o.Rb(),o.Sb(62,"td"),o.xc(63),o.Rb(),o.Sb(64,"td"),o.xc(65),o.Rb(),o.Sb(66,"td"),o.xc(67),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(68,"div",42),o.Sb(69,"div",1),o.Sb(70,"nb-card",45),o.Sb(71,"nb-card-header"),o.xc(72,"Simultaneity Coefficient"),o.Rb(),o.Sb(73,"nb-card-body"),o.Sb(74,"table"),o.Sb(75,"thead"),o.Sb(76,"tr"),o.Sb(77,"th",44),o.xc(78,"Electrification Degree"),o.Rb(),o.Sb(79,"th",44),o.xc(80,"Simultaneity Coefficient"),o.Rb(),o.Rb(),o.Rb(),o.Sb(81,"tbody"),o.Sb(82,"tr"),o.Sb(83,"td"),o.xc(84),o.Rb(),o.Sb(85,"td"),o.xc(86),o.Rb(),o.Rb(),o.Sb(87,"tr"),o.Sb(88,"td"),o.xc(89),o.Rb(),o.Sb(90,"td"),o.xc(91),o.Rb(),o.Rb(),o.Sb(92,"tr"),o.Sb(93,"td"),o.xc(94),o.Rb(),o.Sb(95,"td"),o.xc(96),o.Rb(),o.Rb(),o.Sb(97,"tr"),o.Sb(98,"td"),o.xc(99),o.Rb(),o.Sb(100,"td"),o.xc(101),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(102,"div",42),o.Sb(103,"div",1),o.Sb(104,"nb-card",46),o.Sb(105,"nb-card-header"),o.xc(106,"Technical Features"),o.Rb(),o.Sb(107,"nb-card-body"),o.Sb(108,"table"),o.Sb(109,"thead"),o.Sb(110,"tr"),o.Sb(111,"th",44),o.xc(112,"Nominal Section"),o.Rb(),o.Sb(113,"th",44),o.xc(114,"Allowable CurrentIntensity In Pipes"),o.Rb(),o.Rb(),o.Rb(),o.Sb(115,"tbody"),o.vc(116,k,5,2,"tr",47),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(117,"div",42),o.Sb(118,"div",1),o.Sb(119,"nb-card",46),o.Sb(120,"nb-card-header"),o.xc(121,"Tension Drops"),o.Rb(),o.Sb(122,"nb-card-body"),o.Sb(123,"table"),o.Sb(124,"thead"),o.Sb(125,"tr"),o.Sb(126,"th",44),o.xc(127,"Circuit Type"),o.Rb(),o.Sb(128,"th",44),o.xc(129,"[e%]"),o.Rb(),o.Rb(),o.Rb(),o.Sb(130,"tbody"),o.vc(131,U,5,2,"tr",47),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(132,"div",42),o.Sb(133,"div",1),o.Sb(134,"nb-card",46),o.Sb(135,"nb-card-header"),o.xc(136,"Nominal Sections"),o.Rb(),o.Sb(137,"nb-card-body"),o.Sb(138,"table"),o.Sb(139,"thead"),o.Sb(140,"tr"),o.Sb(141,"th",44),o.xc(142,"Circuit Type"),o.Rb(),o.Sb(143,"th",44),o.xc(144,"Nominal Section"),o.Rb(),o.Rb(),o.Rb(),o.Sb(145,"tbody"),o.vc(146,V,5,2,"tr",47),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb()),2&e){const e=o.bc();o.Bb(26),o.zc(" ",e.circuitType("IUG")," "),o.Bb(4),o.zc(" ",e.maxNumberOfMouths("IUG")," "),o.Bb(2),o.zc(" ",e.powerLoad("IUG")," "),o.Bb(2),o.zc(" ",e.factorLoad("IUG")," "),o.Bb(3),o.zc(" ",e.circuitType("TUG")," "),o.Bb(4),o.zc(" ",e.maxNumberOfMouths("TUG")," "),o.Bb(2),o.zc(" ",e.powerLoad("TUG")," "),o.Bb(2),o.zc(" ",e.factorLoad("TUG")," "),o.Bb(3),o.zc(" ",e.circuitType("IUE")," "),o.Bb(4),o.zc(" ",e.maxNumberOfMouths("IUE")," "),o.Bb(2),o.zc(" ",e.powerLoad("IUE")," "),o.Bb(2),o.zc(" ",e.factorLoad("IUE")," "),o.Bb(3),o.zc(" ",e.circuitType("TUE")," "),o.Bb(4),o.zc(" ",e.maxNumberOfMouths("TUE")," "),o.Bb(2),o.zc(" ",e.powerLoad("TUE")," "),o.Bb(2),o.zc(" ",e.factorLoad("TUE")," "),o.Bb(15),o.sc(e.simultaneityCoefficientDetermined()==e.simultaneityCoefficient("Minimal")?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),o.Bb(2),o.zc(" ",e.electrificationDegree("Minimal")," "),o.Bb(2),o.zc(" ",e.simultaneityCoefficient("Minimal")," "),o.Bb(1),o.sc(e.simultaneityCoefficientDetermined()==e.simultaneityCoefficient("Medium")?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),o.Bb(2),o.zc(" ",e.electrificationDegree("Medium")," "),o.Bb(2),o.zc(" ",e.simultaneityCoefficient("Medium")," "),o.Bb(1),o.sc(e.simultaneityCoefficientDetermined()==e.simultaneityCoefficient("High")?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),o.Bb(2),o.zc(" ",e.electrificationDegree("High")," "),o.Bb(2),o.zc(" ",e.simultaneityCoefficient("High")," "),o.Bb(1),o.sc(e.simultaneityCoefficientDetermined()==e.simultaneityCoefficient("Upper")?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),o.Bb(2),o.zc(" ",e.electrificationDegree("Upper")," "),o.Bb(2),o.zc(" ",e.simultaneityCoefficient("Upper")," "),o.Bb(15),o.hc("ngForOf",e.technicalFeatures()),o.Bb(15),o.hc("ngForOf",e.tensionDrops()),o.Bb(15),o.hc("ngForOf",e.sectionNominals())}}const _=[{path:"",component:d},{path:"surfaces/:projectId",component:O},{path:"circuits/:projectId",component:(()=>{class e{constructor(e,t,i,r,n){this.circuitsService=e,this.surfacesService=t,this.fb=i,this.activatedRoute=r,this.projectsCalculatorService=n}ngOnInit(){this.circuitForm=this.fb.group({name:["",c.r.required],circuitType:["",c.r.required],numberOfMouths:["",c.r.required],length:["",c.r.required]}),this.projectId=parseInt(this.activatedRoute.snapshot.params.projectId),this.circuits=this.circuitsService.getCircuits(parseInt(this.activatedRoute.snapshot.params.projectId)),this.isEdit=!1;let e=this.projectsCalculatorService.protections().find(e=>e.protectionType==C.C05);this.maxProtectionCalculated=e}saveCircuit(){if(this.circuitForm.invalid)alert("the form is invalid");else{if(this.isEdit){let e=this.circuitForm.value;this.selectedCircuit.name=e.name,this.selectedCircuit.circuitType=e.circuitType,this.selectedCircuit.numberOfMouths=e.numberOfMouths,this.selectedCircuit.length=e.length,this.circuitsService.updateCircuit(this.projectId,this.selectedCircuit)}else this.circuitsService.saveCircuit(this.projectId,this.circuitForm.value);this.cleanForm()}}cleanForm(){this.isEdit=!1,this.circuitForm.controls.name.setValue(""),this.circuitForm.controls.circuitType.setValue(""),this.circuitForm.controls.numberOfMouths.setValue(""),this.circuitForm.controls.length.setValue(""),this.circuits=this.circuitsService.getCircuits(this.projectId)}editCircuit(e){this.selectedCircuit=this.circuitsService.getCircuit(this.projectId,e),this.circuitForm.patchValue(this.selectedCircuit),this.isEdit=!0}deleteCircuit(e){this.circuitsService.deleteCircuit(this.projectId,e),this.cleanForm()}isFormInvalid(){return this.circuitForm.controls.name.hasError("required")||this.circuitForm.controls.circuitType.hasError("required")||this.circuitForm.controls.numberOfMouths.hasError("required")||this.circuitForm.controls.length.hasError("required")}circuitType(e){return e}maxNumberOfMouths(e){return this.projectsCalculatorService.maxNumberOfMouths(e)}powerLoad(e){return e==S.LAP?this.circuitLAPTotal():this.projectsCalculatorService.powerLoad(e)}factorLoad(e){return this.projectsCalculatorService.factorLoad(e)}simultaneityCoefficient(e){return this.projectsCalculatorService.simultaneityCoefficient(e)}electrificationDegree(e){return e}circuitLAPTotal(){let e=this.surfacesService.getSurfaces(this.projectId),t=this.projectsCalculatorService.totalSurface(e),i=this.projectsCalculatorService.apparentPower(e),r=this.projectsCalculatorService.electrificationDegree(t,i),n=this.simultaneityCoefficient(r);return Math.ceil(this.projectsCalculatorService.circuitLAPTotal(this.circuits,n))}simultaneityCoefficientDetermined(){let e=this.surfacesService.getSurfaces(this.projectId),t=this.projectsCalculatorService.totalSurface(e),i=this.projectsCalculatorService.apparentPower(e),r=this.projectsCalculatorService.electrificationDegree(t,i);return this.simultaneityCoefficient(r)}calculateCurrent(e){return e==S.LAP?parseFloat((this.circuitLAPTotal()/198).toFixed(2)):parseFloat((this.powerLoad(e)/198).toFixed(2))}nominalSection(e){let t=this.calculateCurrent(e.circuitType),i=this.projectsCalculatorService.nominalSectionByCurrentIntensity(t),r=this.projectsCalculatorService.sectionNominals().find(t=>t.circuitType==e.circuitType),n=e.circuitType==S.LAP;return this.projectsCalculatorService.validateNominalSection(this.technicalFeatures(),e,r&&i>r.minSectionNominal?i:r.minSectionNominal,this.powerLoad(e.circuitType),n)}technicalFeatures(){return this.projectsCalculatorService.tecnicalFeatures()}calculateTensionDrop(e){let t=this.nominalSection(e),i=this.powerLoad(e.circuitType);return this.projectsCalculatorService.calcuteTensionDrop(e,t,i)}tensionDrops(){return this.projectsCalculatorService.tensionDrops()}tensionDrop(e){let t=this.projectsCalculatorService.tensionDrops().find(t=>t.circuitType==e);return(null==t?void 0:t.maxTensionDrop)||0}isValidTension(e){return this.calculateTensionDrop(e)<=this.tensionDrop(e.circuitType)}sectionNominals(){return this.projectsCalculatorService.sectionNominals()}calculateProtection(e){let t=this.calculateCurrent(e.circuitType),i=e.circuitType==S.LAP,r=this.projectsCalculatorService.calculateProtection(t,i);if(!this.isValidProtection(e,r)){let n=this.nominalSection(e),c=this.projectsCalculatorService.tecnicalFeatures().find(e=>e.nominalSection==n);Math.abs(c.allowableCurrentIntensityInPipes-t)<1&&(r=this.projectsCalculatorService.calculateProtection(c.allowableCurrentIntensityInPipes,i))}return i&&r.protectionValue<this.maxProtectionCalculated.protectionValue&&(r=this.findNextProtection(e,this.maxProtectionCalculated)),!i&&this.maxProtectionCalculated.protectionValue<r.protectionValue&&(this.maxProtectionCalculated=r),r}findNextProtection(e,t){if(e.circuitType==S.LAP){let t=this.projectsCalculatorService.protections().find(e=>e.protectionValue>this.maxProtectionCalculated.protectionValue);if(this.isValidProtection(e,t))return t}return t}isValidProtection(e,t){let i=this.nominalSection(e),r=this.calculateCurrent(e.circuitType),n=this.projectsCalculatorService.tecnicalFeatures().find(e=>e.nominalSection==i).allowableCurrentIntensityInPipes,c=t;return r<parseFloat((1.13*c.protectionValue).toFixed(2))&&c.protectionValue<=n}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(j),o.Mb(p),o.Mb(c.b),o.Mb(n.a),o.Mb(g))},e.\u0275cmp=o.Gb({type:e,selectors:[["circuits"]],decls:32,vars:7,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Name","maxlength","100"],["placeholder","Choose a circuit type","formControlName","circuitType"],["value","IUG"],["value","TUG"],["value","IUE"],["value","TUE"],["value","LAP"],["nbInput","","formControlName","numberOfMouths","type","number","placeholder","Number Of Mouths"],["nbInput","","formControlName","length","type","number","placeholder","Length [m]"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","info",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],[1,"form-inline"],["nbInput","","disabled","","type","text","value","Name",1,"input-inline-name"],["nbInput","","disabled","","type","text","value","Circuit Type",1,"input-inline-circuit-type"],["nbInput","","disabled","","type","text","placeholder","Number Of Mouths","value","Number Of Mouths",1,"input-inline-mouths"],["nbInput","","disabled","","type","text","placeholder","Length","value","Length [m]",1,"input-inline-length"],["nbInput","","disabled","","type","text","placeholder","Power [W]","value","Power [W]",1,"input-inline-power"],["nbInput","","disabled","","type","text","placeholder","Current [A]","value","Current [A]",1,"input-inline-current"],["nbInput","","disabled","","type","text","placeholder","Section [mm2]","value","Section [mm2]",1,"input-inline-section"],["nbInput","","disabled","","type","text","placeholder","[e%]","value","[e%]",1,"input-inline-tension"],["nbInput","","disabled","","type","text","placeholder","Protection","value","Protection",1,"input-inline-protection"],["class","form-inline",4,"ngFor","ngForOf"],["nbInput","","disabled","","type","text","placeholder","Name",1,"input-inline-name",3,"value"],["nbInput","","disabled","","type","text","placeholder","Circuit Type",1,"input-inline-circuit-type",3,"value"],["nbInput","","readonly","","type","number","placeholder","Number Of Mouths",1,"input-inline-mouths",3,"status","value"],["nbInput","","disabled","","type","number","placeholder","Length",1,"input-inline-length",3,"value"],["nbInput","","disabled","","type","number","placeholder","Power [W]",1,"input-inline-power",3,"value"],["nbInput","","disabled","","type","text","placeholder","Current [A]",1,"input-inline-current",3,"value"],["nbInput","","disabled","","type","text","placeholder","Section [mm2]",1,"input-inline-section",3,"value"],["nbInput","","readonly","","type","text","placeholder","[e%]",1,"input-inline-tension",3,"status","value"],["nbInput","","readonly","","type","text","placeholder","Protection",1,"input-inline-protection",3,"status","value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["accent","info"],[1,"form-group","row","form-horizontal"],["accent","danger"],[2,"width","20%"],["accent","success"],["accent","warning"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(o.Sb(0,"div",0),o.Sb(1,"div",1),o.Sb(2,"nb-card",2),o.Sb(3,"nb-card-header"),o.xc(4,"Circuit "),o.Sb(5,"a",3),o.xc(6,"Back to Proyects"),o.Rb(),o.Rb(),o.Sb(7,"nb-card-body"),o.Sb(8,"form",4),o.Nb(9,"input",5),o.Sb(10,"nb-select",6),o.Sb(11,"nb-option",7),o.xc(12,"IUG"),o.Rb(),o.Sb(13,"nb-option",8),o.xc(14,"TUG"),o.Rb(),o.Sb(15,"nb-option",9),o.xc(16,"IUE"),o.Rb(),o.Sb(17,"nb-option",10),o.xc(18,"TUE"),o.Rb(),o.Sb(19,"nb-option",11),o.xc(20,"LAP"),o.Rb(),o.Rb(),o.Nb(21,"input",12),o.Nb(22,"input",13),o.Sb(23,"button",14),o.Zb("click",(function(){return t.saveCircuit()})),o.xc(24),o.Rb(),o.vc(25,B,2,0,"button",15),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(26,"div",0),o.Sb(27,"div",1),o.vc(28,L,17,1,"nb-card",16),o.Rb(),o.Rb(),o.Sb(29,"div",0),o.Sb(30,"div",1),o.vc(31,G,147,35,"nb-card",17),o.Rb(),o.Rb()),2&e&&(o.Bb(5),o.hc("routerLink","../../../projects"),o.Bb(3),o.hc("formGroup",t.circuitForm),o.Bb(15),o.hc("disabled",t.isFormInvalid()),o.Bb(1),o.yc(t.isEdit?"Update Circuit":"Save Circuit"),o.Bb(1),o.hc("ngIf",t.isEdit),o.Bb(3),o.hc("ngIf",(null==t.circuits?null:t.circuits.length)>0),o.Bb(3),o.hc("ngIf",(null==t.circuits?null:t.circuits.length)>0))},directives:[s.j,s.k,s.g,n.f,s.i,c.s,c.k,c.d,s.v,c.a,c.j,c.c,c.f,s.K,s.I,c.n,r.m,r.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}.input-inline-name[_ngcontent-%COMP%]{width:5rem}.input-inline-circuit-type[_ngcontent-%COMP%]{width:7.5rem}.input-inline-mouths[_ngcontent-%COMP%]{width:11rem}.input-inline-length[_ngcontent-%COMP%]{width:7rem}.input-inline-power[_ngcontent-%COMP%]{width:6.8rem}.input-inline-current[_ngcontent-%COMP%]{width:7rem}.input-inline-section[_ngcontent-%COMP%]{width:9rem}.input-inline-tension[_ngcontent-%COMP%]{width:5rem}.input-inline-protection[_ngcontent-%COMP%]{width:7rem}span.text[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}span.text[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),e})()},{path:"artifacts/:projectId/:environment",component:M}];let H=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[n.g.forChild(_)],n.g]}),e})(),W=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[r.c,H,s.l,s.P,c.e,s.h,c.p,s.w,s.L,s.U]]}),e})()},dgmN:function(e,t,i){"use strict";i.r(t),i.d(t,"PagesModule",(function(){return m}));var r=i("aceb"),n=i("vTDv"),c=i("tyNb");const o=[{title:"Projects",icon:"home-outline",link:"/pages/projects",home:!0}];var a=i("fXoL"),s=i("mgFL");const u=[{path:"",component:(()=>{class e{constructor(){this.menu=o}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Gb({type:e,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(a.Sb(0,"ngx-one-column-layout"),a.Nb(1,"nb-menu",0),a.Nb(2,"router-outlet"),a.Rb()),2&e&&(a.Bb(1),a.hc("items",t.menu))},directives:[s.a,r.F,c.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}"]}),e})(),children:[{path:"",redirectTo:"projects"},{path:"projects",loadChildren:()=>Promise.resolve().then(i.bind(null,"0B1/")).then(e=>e.ProjectsModule)}]}];let l=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[c.g.forChild(u)],c.g]}),e})();var b=i("0B1/");let m=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[l,n.a,r.G,b.ProjectsModule]]}),e})()}}]);
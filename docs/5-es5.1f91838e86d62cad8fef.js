!function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0B1/":function(e,i,r){"use strict";r.r(i),r.d(i,"ProjectsModule",(function(){return ae}));var o,c=r("ofXK"),a=r("tyNb"),u=r("3Pt+"),s=function e(t){var i,r;if(n(this,e),this.id=null!==(i=t.id)&&void 0!==i?i:function(){throw new Error("id cannot be null or undefined")}(),this.name=null!==(r=t.name)&&void 0!==r?r:function(){throw new Error("id cannot be null or undefined")}(),t.id<=0)throw new Error("id must be greater than 0");this.surfaces=t.surfaces,this.circuits=t.circuits,t.surfaces||(this.surfaces=[]),t.circuits||(this.circuits=[])},l=r("fXoL"),b=((o=function(){function e(){n(this,e),this.key="projects"}return t(e,[{key:"saveProject",value:function(e){var t=this.getProjects(),n=new s({id:t.length+1,name:e});(t=t.filter((function(e){return e.id!=n.id}))).push(n),localStorage.setItem(this.key,JSON.stringify(t))}},{key:"updateProject",value:function(e){var t=this.getProjects(),n=t.findIndex((function(t){return t.id==e.id}));n>-1&&(t[n]=new s(e),localStorage.setItem(this.key,JSON.stringify(t)))}},{key:"deleteProject",value:function(e){var t=this.getProjects().filter((function(t){return t.id!=e}));t&&localStorage.setItem(this.key,JSON.stringify(t))}},{key:"getProjects",value:function(){var e=localStorage.getItem(this.key);return e?JSON.parse(e):[]}},{key:"getProjectById",value:function(e){var t,n=localStorage.getItem(this.key);return n?null===(t=JSON.parse(n))||void 0===t?void 0:t.find((function(t){return t.id==e})):void 0}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275prov=l.Ib({token:o,factory:o.\u0275fac,providedIn:"root"}),o),m=r("aceb");function d(e,t){if(1&e){var n=l.Tb();l.Sb(0,"button",8),l.Zb("click",(function(){return l.nc(n),l.bc().cleanForm()})),l.xc(1,"Cancel"),l.Rb()}}function p(e,t){if(1&e&&(l.Sb(0,"span"),l.Sb(1,"a",17),l.xc(2,"Circuits"),l.Rb(),l.Rb()),2&e){var n=l.bc().$implicit;l.Bb(1),l.hc("routerLink","./circuits/"+n.id)}}function h(e,t){if(1&e){var n=l.Tb();l.Sb(0,"li",10),l.Nb(1,"input",11),l.Nb(2,"input",12),l.Sb(3,"button",13),l.Zb("click",(function(){l.nc(n);var e=t.$implicit;return l.bc(2).editProject(e.id)})),l.xc(4,"Edit"),l.Rb(),l.Sb(5,"button",14),l.Zb("click",(function(){l.nc(n);var e=t.$implicit;return l.bc(2).deleteProject(e.id)})),l.xc(6,"Delete"),l.Rb(),l.Sb(7,"a",15),l.xc(8,"Surfaces"),l.Rb(),l.vc(9,p,3,1,"span",16),l.Rb()}if(2&e){var i=t.$implicit;l.Bb(1),l.hc("value",i.id),l.Bb(1),l.hc("value",i.name),l.Bb(5),l.hc("routerLink","./surfaces/"+i.id),l.Bb(2),l.hc("ngIf",(null==i.surfaces?null:i.surfaces.length)>0)}}function f(e,t){if(1&e&&(l.Sb(0,"nb-card",2),l.Sb(1,"nb-card-header"),l.xc(2,"Proyects"),l.Rb(),l.Sb(3,"nb-card-body"),l.Sb(4,"ul"),l.vc(5,h,10,4,"li",9),l.Rb(),l.Rb(),l.Rb()),2&e){var n=l.bc();l.Bb(5),l.hc("ngForOf",n.projects)}}var g,y=((g=function(){function e(t,i){n(this,e),this.projectsService=t,this.fb=i}return t(e,[{key:"ngOnInit",value:function(){this.projectForm=this.fb.group({name:["",u.r.required]}),this.projects=this.projectsService.getProjects(),this.isEdit=!1}},{key:"saveProject",value:function(){this.projectForm.invalid?alert("the form is invalid"):(this.isEdit?(this.selectedProject.name=this.projectForm.value.name,this.projectsService.updateProject(new s(this.selectedProject))):this.projectsService.saveProject(this.projectForm.value),this.cleanForm())}},{key:"cleanForm",value:function(){this.isEdit=!1,this.projectForm.controls.name.setValue(""),this.projects=this.projectsService.getProjects()}},{key:"editProject",value:function(e){this.selectedProject=new s(this.projectsService.getProjectById(e)),this.projectForm.patchValue(this.selectedProject),this.isEdit=!0}},{key:"deleteProject",value:function(e){this.projectsService.deleteProject(e),this.cleanForm()}}]),e}()).\u0275fac=function(e){return new(e||g)(l.Mb(b),l.Mb(u.b))},g.\u0275cmp=l.Gb({type:g,selectors:[["projects"]],decls:14,vars:5,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Project Name","maxlength","100"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","type","text","disabled","",3,"value"],["nbInput","","type","text","disabled","","maxlength","100",3,"value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["nbButton","","outline","","status","info",3,"routerLink"],[4,"ngIf"],["nbButton","","outline","","status","success",3,"routerLink"]],template:function(e,t){1&e&&(l.Sb(0,"div",0),l.Sb(1,"div",1),l.Sb(2,"nb-card",2),l.Sb(3,"nb-card-header"),l.xc(4,"Project"),l.Rb(),l.Sb(5,"nb-card-body"),l.Sb(6,"form",3),l.Nb(7,"input",4),l.Sb(8,"button",5),l.Zb("click",(function(){return t.saveProject()})),l.xc(9),l.Rb(),l.vc(10,d,2,0,"button",6),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(11,"div",0),l.Sb(12,"div",1),l.vc(13,f,6,1,"nb-card",7),l.Rb(),l.Rb()),2&e&&(l.Bb(6),l.hc("formGroup",t.projectForm),l.Bb(2),l.hc("disabled",t.projectForm.controls.name.hasError("required")),l.Bb(1),l.yc(t.isEdit?"Update Project":"Save Project"),l.Bb(1),l.hc("ngIf",t.isEdit),l.Bb(3),l.hc("ngIf",(null==t.projects?null:t.projects.length)>0))},directives:[m.j,m.k,m.i,u.s,u.k,u.d,m.v,u.a,u.j,u.c,u.f,m.g,c.m,c.l,a.f],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}"]}),g),v=function(e){return e[e.Covered=0]="Covered",e[e.SemiCovered=1]="SemiCovered",e}({}),S=function(e){return e.Minimal="Minimal",e.Medium="Medium",e.High="High",e.Upper="Upper",e}({}),C=function e(t){var i,r,o,c;if(n(this,e),this.name=null!==(i=t.name)&&void 0!==i?i:function(){throw new Error("name cannot be null or undefined")}(),this.circuitType=null!==(r=t.circuitType)&&void 0!==r?r:function(){throw new Error("circuitType cannot be null or undefined")}(),this.numberOfMouths=null!==(o=t.numberOfMouths)&&void 0!==o?o:function(){throw new Error("numberOfMouths cannot be null or undefined")}(),this.length=null!==(c=t.length)&&void 0!==c?c:function(){throw new Error("length cannot be null or undefined")}(),t.numberOfMouths<0)throw new Error("numberOfMouths cannot be less than zero");if(t.length<=0)throw new Error("length cannot be zero or less")},R=function(e){return e.IUG="IUG",e.TUG="TUG",e.IUE="IUE",e.TUE="TUE",e.LAP="LAP",e}({}),w=function(e){return e.C05="C05",e.C1="C1",e.C2="C2",e.C3="C3",e.C4="C4",e.C6="C6",e.C10="C10",e.C16="C16",e.C20="C20",e.C25="C25",e.C32="C32",e.C40="C40",e.C50="C50",e.C63="C63",e}({}),D=function(){function e(){n(this,e)}return t(e,null,[{key:"protections",get:function(){return[{protectionType:w.C05,protectionValue:.5},{protectionType:w.C1,protectionValue:1},{protectionType:w.C2,protectionValue:2},{protectionType:w.C3,protectionValue:3},{protectionType:w.C4,protectionValue:4},{protectionType:w.C6,protectionValue:6},{protectionType:w.C10,protectionValue:10},{protectionType:w.C16,protectionValue:16},{protectionType:w.C20,protectionValue:20},{protectionType:w.C25,protectionValue:25},{protectionType:w.C32,protectionValue:32},{protectionType:w.C40,protectionValue:40},{protectionType:w.C50,protectionValue:50},{protectionType:w.C63,protectionValue:63}]}}]),e}(),N=function(){function e(){n(this,e)}return t(e,null,[{key:"sectionNominals",get:function(){return[{circuitType:R.LAP,minSectionNominal:4},{circuitType:R.IUG,minSectionNominal:1.5},{circuitType:R.TUG,minSectionNominal:2.5},{circuitType:R.IUE,minSectionNominal:2.5},{circuitType:R.TUE,minSectionNominal:2.5}]}}]),e}(),E=function e(t){var i,r,o,c;if(n(this,e),this.type=null!==(i=t.type)&&void 0!==i?i:function(){throw new Error("type cannot be null or undefined")}(),this.environment=null!==(r=t.environment)&&void 0!==r?r:function(){throw new Error("environment cannot be null or undefined")}(),this.width=null!==(o=t.width)&&void 0!==o?o:function(){throw new Error("width cannot be null or undefined")}(),this.length=null!==(c=t.length)&&void 0!==c?c:function(){throw new Error("length cannot be null or undefined")}(),t.width<=0)throw new Error("width cannot be zero or less");if(t.length<=0)throw new Error("length cannot be zero or less");this.artifacts=t.artifacts,t.artifacts||(this.artifacts=[])},I=function(){function e(){n(this,e)}return t(e,null,[{key:"tecnicalFeatures",get:function(){return[{nominalSection:.75,allowableCurrentIntensityInPipes:8},{nominalSection:1,allowableCurrentIntensityInPipes:10.5},{nominalSection:1.5,allowableCurrentIntensityInPipes:13},{nominalSection:2.5,allowableCurrentIntensityInPipes:18},{nominalSection:4,allowableCurrentIntensityInPipes:25},{nominalSection:6,allowableCurrentIntensityInPipes:32},{nominalSection:10,allowableCurrentIntensityInPipes:44},{nominalSection:16,allowableCurrentIntensityInPipes:59},{nominalSection:25,allowableCurrentIntensityInPipes:77},{nominalSection:35,allowableCurrentIntensityInPipes:96},{nominalSection:50,allowableCurrentIntensityInPipes:117},{nominalSection:70,allowableCurrentIntensityInPipes:149},{nominalSection:95,allowableCurrentIntensityInPipes:180},{nominalSection:120,allowableCurrentIntensityInPipes:208}]}}]),e}(),A=function(){function e(){n(this,e)}return t(e,null,[{key:"tensionDrops",get:function(){return[{circuitType:R.LAP,maxTensionDrop:1},{circuitType:R.IUG,maxTensionDrop:2},{circuitType:R.TUG,maxTensionDrop:2},{circuitType:R.IUE,maxTensionDrop:2},{circuitType:R.TUE,maxTensionDrop:2}]}}]),e}(),M=function(){function e(t){n(this,e),this._circuit=t}return t(e,[{key:"getCircuit",value:function(){return this._circuit}},{key:"isLap",value:function(){return this._circuit.circuitType==R.LAP}},{key:"maxNumberOfMouths",value:function(){switch(this._circuit.circuitType){case R.IUG:case R.TUG:return 15;case R.IUE:case R.TUE:return 12;default:return 0}}},{key:"powerLoad",value:function(){switch(this._circuit.circuitType){case R.IUG:return 810;case R.TUG:return 1980;case R.IUE:case R.TUE:return 2970;default:return 0}}},{key:"factorLoad",value:function(){switch(this._circuit.circuitType){case R.IUG:return.66;case R.TUG:case R.IUE:case R.TUE:return 1;default:return 0}}},{key:"circuitSubtotal",value:function(){return parseFloat((this.powerLoad()*this.factorLoad()).toFixed(2))}},{key:"currentCalculated",value:function(){return parseFloat((this.powerLoad()/198).toFixed(2))}}]),e}(),x=function e(t){var i,r,o,c,a,u;if(n(this,e),this.name=null!==(i=t.name)&&void 0!==i?i:function(){throw new Error("name cannot be null or undefined")}(),this.powerConsumption=null!==(r=t.powerConsumption)&&void 0!==r?r:function(){throw new Error("powerConsumption cannot be null or undefined")}(),this.summerDay=null!==(o=t.summerDay)&&void 0!==o?o:function(){throw new Error("summerDay cannot be null or undefined")}(),this.summerNight=null!==(c=t.summerNight)&&void 0!==c?c:function(){throw new Error("summerNight cannot be null or undefined")}(),this.winterDay=null!==(a=t.winterDay)&&void 0!==a?a:function(){throw new Error("winterDay cannot be null or undefined")}(),this.winterNight=null!==(u=t.winterNight)&&void 0!==u?u:function(){throw new Error("winterNight cannot be null or undefined")}(),t.powerConsumption<=0)throw new Error("powerConsumption cannot be zero or less")},O=function(){function e(t){n(this,e),this._surface=t}return t(e,[{key:"getSurface",value:function(){return this._surface}},{key:"totalConsumition",value:function(){return this._surface.artifacts.reduce((function(e,t){return t.summerDay&&(e.summerDayConsumptionDetermined+=t.powerConsumption),t.summerNight&&(e.summerNightConsumptionDetermined+=t.powerConsumption),t.winterDay&&(e.winterDayConsumptionDetermined+=t.powerConsumption),t.winterNight&&(e.winterNightConsumptionDetermined+=t.powerConsumption),e}),{summerDayConsumptionDetermined:0,summerNightConsumptionDetermined:0,winterDayConsumptionDetermined:0,winterNightConsumptionDetermined:0})}},{key:"addArtifact",value:function(e,t,n,i,r,o){if(this.getArtifact(e))throw new Error("Artifact already exists");var c=new x({name:e,powerConsumption:t,summerDay:n,summerNight:i,winterDay:r,winterNight:o});this._surface.artifacts.push(c)}},{key:"udpateArtifact",value:function(e){if(!this.existArtifact(e.name))throw new Error("Surface does not exist");var t=this.getIndexArtifact(e.name);this._surface.artifacts[t]=e}},{key:"deleteArtifact",value:function(e){if(!this.existArtifact(e))throw new Error("Circuit does not exist");var t=this.getIndexArtifact(e);this._surface.artifacts.splice(t,1)}},{key:"getArtifact",value:function(e){return this._surface.artifacts.find((function(t){return t.name==e}))}},{key:"existArtifact",value:function(e){return this._surface.artifacts.some((function(t){return t.name==e}))}},{key:"getIndexArtifact",value:function(e){return this._surface.artifacts.findIndex((function(t){return t.name==e}))}}]),e}(),P=function(){function e(t,i){n(this,e),this._projectService=i,this._project=this._projectService.getProjectById(t)}return t(e,[{key:"surfaceManager",value:function(e){var t=this.getSurface(e);return new O(t)}},{key:"circuitManager",value:function(e){var t=this.getCircuit(e);return new M(t)}},{key:"getProject",value:function(){return this._project}},{key:"addSurface",value:function(e,t,n,i){if(this.getSurface(t))throw new Error("Surface already exists");var r=new E({type:e,environment:t,width:n,length:i});this._project.surfaces.push(r),this.updateProject()}},{key:"udpateSurface",value:function(e){if(!this.existSurface(e.environment))throw new Error("Surface does not exist");var t=this.getIndexSurface(e.environment);this._project.surfaces[t]=e,this.updateProject()}},{key:"deleteSurface",value:function(e){if(!this.existSurface(e))throw new Error("Surface does not exist");var t=this.getIndexSurface(e);this._project.surfaces.splice(t,1),this.updateProject()}},{key:"getSurface",value:function(e){return this._project.surfaces.find((function(t){return t.environment===e}))}},{key:"existSurface",value:function(e){return this._project.surfaces.some((function(t){return t.environment===e}))}},{key:"getIndexSurface",value:function(e){return this._project.surfaces.findIndex((function(t){return t.environment===e}))}},{key:"addCircuit",value:function(e,t,n,i){if(this.getCircuit(e))throw new Error("Circuit already exists");var r=new C({name:e,circuitType:t,numberOfMouths:n,length:i});if(t===R.LAP)this._project.circuits.push(r);else{var o=this._project.circuits.findIndex((function(e){return e.circuitType===R.LAP}));-1===o?this._project.circuits.push(r):this._project.circuits.splice(o,0,r)}this._project.circuits.push(r),this.updateProject()}},{key:"udpateCircuit",value:function(e){if(!this.existCircuit(e.name))throw new Error("Circuit does not exist");var t=this.getIndexCircuit(e.name);this._project.circuits[t]=e,this.updateProject()}},{key:"deleteCircuit",value:function(e){if(!this.existCircuit(e))throw new Error("Circuit does not exist");var t=this.getIndexCircuit(e);this._project.circuits.splice(t,1),this.updateProject()}},{key:"getCircuit",value:function(e){return this._project.circuits.find((function(t){return t.name===e}))}},{key:"existCircuit",value:function(e){return this._project.circuits.some((function(t){return t.name===e}))}},{key:"getIndexCircuit",value:function(e){return this._project.circuits.findIndex((function(t){return t.name===e}))}},{key:"totalSurfaceCovered",value:function(){return this._project.surfaces.reduce((function(e,t){return t.type==v.Covered?e+parseFloat((t.width*t.length).toFixed(2)):e+0}),0)}},{key:"totalSurfaceSemiCovered",value:function(){return this._project.surfaces.reduce((function(e,t){return t.type==v.SemiCovered?e+parseFloat((t.width*t.length).toFixed(2)):e+0}),0)}},{key:"totalSurface",value:function(){return this.totalSurfaceCovered()+this.totalSurfaceSemiCovered()/2}},{key:"apparentPower",value:function(){var e=this.calculateMaximumConsumptionDetermined();return parseFloat((e/.9/1e3).toFixed(2))}},{key:"electrificationDegree",value:function(){return this.totalSurface()<=60&&this.apparentPower()<=3.7?S.Minimal:this.totalSurface()<=130&&this.apparentPower()<=7?S.Medium:this.totalSurface()<=200&&this.apparentPower()<=11?S.High:S.Upper}},{key:"simultaneityCoefficientDetermined",value:function(){switch(this.electrificationDegree()){case S.Minimal:return 1;case S.Medium:return.9;case S.High:return.8;case S.Upper:return.7;default:return 0}}},{key:"circuitsByelectrificationDegree",value:function(){var e=[];switch(this.electrificationDegree()){case S.Minimal:case S.Medium:e.push(R.IUG),e.push(R.TUG);break;case S.High:default:e.push(R.IUG),e.push(R.IUG),e.push(R.TUG),e.push(R.TUG),e.push(R.TUE)}return e}},{key:"calculateMaximumConsumptionDetermined",value:function(){var e=0,t=this.calculateAllSurfaceConsumption();return t.summerDayConsumptionDetermined>=e&&(e=t.summerDayConsumptionDetermined),t.summerNightConsumptionDetermined>=e&&(e=t.summerNightConsumptionDetermined),t.winterDayConsumptionDetermined>=e&&(e=t.winterDayConsumptionDetermined),t.winterNightConsumptionDetermined>=e&&(e=t.winterNightConsumptionDetermined),e}},{key:"circuitLAPTotal",value:function(){var e=this,t=this._project.circuits.filter((function(e){return e.circuitType!=R.LAP})).reduce((function(t,n){var i=e.circuitManager(n.name);return t+parseFloat((i.powerLoad()*i.factorLoad()).toFixed(2))}),0);return Math.ceil(parseFloat((t*this.simultaneityCoefficientDetermined()).toFixed(2)))}},{key:"currentCalculatedLAP",value:function(){return parseFloat((this.circuitLAPTotal()/198).toFixed(2))}},{key:"calcuteTensionDrop",value:function(e,t,n){var i=Math.pow(220,2);return parseFloat((200*n*e/(47.5*i*t)).toFixed(2))}},{key:"validateNominalSection",value:function(e,t,n,i,r,o){var c=i,a=N.sectionNominals.find((function(e){return e.circuitType==t}));if(o&&t==R.LAP){var u=e.findIndex((function(e){return e.nominalSection==c}));if(u>0&&i>a.minSectionNominal)return this.validateNominalSection(e,t,n,e[u-1].nominalSection,r,!1)}if(this.calcuteTensionDrop(n,i,r)>=A.tensionDrops.find((function(e){return e.circuitType==t})).maxTensionDrop){var s=e.filter((function(e){return e.nominalSection>i}));return this.validateNominalSection(s,t,n,s[0].nominalSection,r,!1)}return i}},{key:"calculateProtection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;return D.protections.find(t?function(e){return n<=e.protectionValue}:function(e){return n<e.protectionValue})}},{key:"nominalSectionByCurrentIntensity",value:function(e){return I.tecnicalFeatures.find((function(t){return e<=t.allowableCurrentIntensityInPipes})).nominalSection}},{key:"calculateAllSurfaceConsumption",value:function(){var e=this;return this._project.surfaces.reduce((function(t,n){new E(n);var i=e.surfaceManager(n.environment);return t.summerDayConsumptionDetermined+=i.totalConsumition().summerDayConsumptionDetermined,t.summerNightConsumptionDetermined+=i.totalConsumition().summerNightConsumptionDetermined,t.winterDayConsumptionDetermined+=i.totalConsumition().winterDayConsumptionDetermined,t.winterNightConsumptionDetermined+=i.totalConsumition().winterNightConsumptionDetermined,t}),{summerDayConsumptionDetermined:0,summerNightConsumptionDetermined:0,winterDayConsumptionDetermined:0,winterNightConsumptionDetermined:0})}},{key:"updateProject",value:function(){this._projectService.updateProject(this._project)}}]),e}();function k(e,t){if(1&e){var n=l.Tb();l.Sb(0,"button",15),l.Zb("click",(function(){return l.nc(n),l.bc().cleanForm()})),l.xc(1,"Cancel"),l.Rb()}}function j(e,t){if(1&e){var n=l.Tb();l.Sb(0,"li",17),l.Nb(1,"input",18),l.Nb(2,"input",19),l.Nb(3,"input",20),l.Nb(4,"input",21),l.Sb(5,"button",22),l.Zb("click",(function(){l.nc(n);var e=t.$implicit;return l.bc(2).editSurface(e.environment)})),l.xc(6,"Edit"),l.Rb(),l.Sb(7,"button",23),l.Zb("click",(function(){l.nc(n);var e=t.$implicit;return l.bc(2).deleteSurface(e.environment)})),l.xc(8,"Delete"),l.Rb(),l.Sb(9,"a",3),l.xc(10,"Artifacts"),l.Rb(),l.Rb()}if(2&e){var i=t.$implicit,r=l.bc(2);l.Bb(1),l.hc("value",i.environment),l.Bb(1),l.hc("value",i.width),l.Bb(1),l.hc("value",i.length),l.Bb(1),l.hc("value",(i.width*i.length).toFixed(2)),l.Bb(5),l.hc("routerLink","../../artifacts/"+r.project().id+"/"+i.environment)}}function T(e,t){if(1&e&&(l.Sb(0,"nb-card",2),l.Sb(1,"nb-card-header"),l.xc(2,"Surfaces Covered"),l.Rb(),l.Sb(3,"nb-card-body"),l.Sb(4,"ul"),l.vc(5,j,11,5,"li",16),l.Rb(),l.Rb(),l.Rb()),2&e){var n=l.bc();l.Bb(5),l.hc("ngForOf",n.coveredSurfaces())}}function B(e,t){if(1&e){var n=l.Tb();l.Sb(0,"li",17),l.Nb(1,"input",18),l.Nb(2,"input",24),l.Nb(3,"input",25),l.Nb(4,"input",21),l.Sb(5,"button",22),l.Zb("click",(function(){l.nc(n);var e=t.$implicit;return l.bc(2).editSurface(e.environment)})),l.xc(6,"Edit"),l.Rb(),l.Sb(7,"button",23),l.Zb("click",(function(){l.nc(n);var e=t.$implicit;return l.bc(2).deleteSurface(e.environment)})),l.xc(8,"Delete"),l.Rb(),l.Sb(9,"a",3),l.xc(10,"Artifacts"),l.Rb(),l.Rb()}if(2&e){var i=t.$implicit,r=l.bc(2);l.Bb(1),l.hc("value",i.environment),l.Bb(1),l.hc("value",i.width),l.Bb(1),l.hc("value",i.length),l.Bb(1),l.hc("value",(i.width*i.length).toFixed(2)),l.Bb(5),l.hc("routerLink","../../artifacts/"+r.project().id+"/"+i.environment)}}function F(e,t){if(1&e&&(l.Sb(0,"nb-card",2),l.Sb(1,"nb-card-header"),l.xc(2,"Surfaces Semi Covered"),l.Rb(),l.Sb(3,"nb-card-body"),l.Sb(4,"ul"),l.vc(5,B,11,5,"li",16),l.Rb(),l.Rb(),l.Rb()),2&e){var n=l.bc();l.Bb(5),l.hc("ngForOf",n.semiCoveredSurfaces())}}function _(e,t){if(1&e&&(l.Sb(0,"span"),l.Sb(1,"a",44),l.xc(2,"Circuits"),l.Rb(),l.Rb()),2&e){var n=l.bc(2);l.Bb(1),l.hc("routerLink","../../circuits/"+n.project().id)}}function L(e,t){if(1&e&&(l.Sb(0,"div",45),l.Sb(1,"div",46),l.Nb(2,"input",47),l.Rb(),l.Rb()),2&e){var n=t.$implicit;l.Bb(2),l.hc("placeholder",n)("value",n)}}function U(e,t){if(1&e&&(l.Sb(0,"nb-card",26),l.Sb(1,"nb-card-header"),l.xc(2,"Totals"),l.Rb(),l.Sb(3,"nb-card-body"),l.Sb(4,"div",27),l.Sb(5,"div",28),l.Sb(6,"div",29),l.Sb(7,"div",28),l.Sb(8,"span"),l.xc(9,"Covered Surface: "),l.Rb(),l.Rb(),l.Sb(10,"div",30),l.Nb(11,"input",31),l.Rb(),l.Rb(),l.Sb(12,"div",29),l.Sb(13,"div",28),l.Sb(14,"span",32),l.xc(15,"Semi Covered Surface: "),l.Rb(),l.Rb(),l.Sb(16,"div",30),l.Nb(17,"input",33),l.Rb(),l.Rb(),l.Sb(18,"div",29),l.Sb(19,"div",28),l.Sb(20,"span",32),l.xc(21,"Semi Covered Surface 50%: "),l.Rb(),l.Rb(),l.Sb(22,"div",30),l.Nb(23,"input",34),l.Rb(),l.Rb(),l.Sb(24,"div",29),l.Sb(25,"div",28),l.Sb(26,"span",32),l.xc(27,"Total Surface [m2]: "),l.Rb(),l.Rb(),l.Sb(28,"div",30),l.Nb(29,"input",21),l.Rb(),l.Rb(),l.Sb(30,"div",29),l.Sb(31,"div",28),l.Sb(32,"span",32),l.xc(33,"Maximum Consumption Determined [W]: "),l.Rb(),l.Rb(),l.Sb(34,"div",30),l.Nb(35,"input",35),l.Rb(),l.Rb(),l.Sb(36,"div",29),l.Sb(37,"div",28),l.Sb(38,"span",32),l.xc(39,"Apparent Power [KVA]: "),l.Rb(),l.Rb(),l.Sb(40,"div",30),l.Nb(41,"input",36),l.Rb(),l.Rb(),l.Sb(42,"div",29),l.Sb(43,"div",28),l.Sb(44,"span",32),l.xc(45,"Degree of electrification: "),l.Rb(),l.Rb(),l.Sb(46,"div",30),l.Nb(47,"input",37),l.Rb(),l.Rb(),l.Rb(),l.Sb(48,"div",30),l.Sb(49,"div",0),l.Sb(50,"div",1),l.Sb(51,"nb-card",38),l.Sb(52,"nb-card-header"),l.xc(53,"Degrees of electrification"),l.Rb(),l.Sb(54,"nb-card-body"),l.Sb(55,"table"),l.Sb(56,"thead"),l.Sb(57,"tr"),l.Sb(58,"th",39),l.xc(59,"Degree of electrification"),l.Rb(),l.Sb(60,"th",40),l.xc(61,"Surface (Application limit)"),l.Rb(),l.Sb(62,"th",41),l.xc(63,"Calculated maximum simultaneous power demand (only to determine the degree of electrification)"),l.Rb(),l.Rb(),l.Rb(),l.Sb(64,"tbody"),l.Sb(65,"tr"),l.Sb(66,"td"),l.xc(67," Minimal "),l.Rb(),l.Sb(68,"td"),l.xc(69," <= 60 m2 "),l.Rb(),l.Sb(70,"td"),l.xc(71," <= 3,7 kVA "),l.Rb(),l.Rb(),l.Sb(72,"tr"),l.Sb(73,"td"),l.xc(74," Medium "),l.Rb(),l.Sb(75,"td"),l.xc(76," > 60 m2 && <= 130 m2 "),l.Rb(),l.Sb(77,"td"),l.xc(78," <= 7 kVA "),l.Rb(),l.Rb(),l.Sb(79,"tr"),l.Sb(80,"td"),l.xc(81," High "),l.Rb(),l.Sb(82,"td"),l.xc(83," > 130 m2 && <= 200 m2 "),l.Rb(),l.Sb(84,"td"),l.xc(85," <= 11 kVA "),l.Rb(),l.Rb(),l.Sb(86,"tr"),l.Sb(87,"td"),l.xc(88," Upper "),l.Rb(),l.Sb(89,"td"),l.xc(90," > 200 m2 "),l.Rb(),l.Sb(91,"td"),l.xc(92," > 11 kVA "),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(93,"div",0),l.Sb(94,"div",1),l.Sb(95,"nb-card",38),l.Sb(96,"nb-card-header"),l.xc(97," Minimal circuits according to degree of electrification "),l.vc(98,_,3,1,"span",42),l.Rb(),l.Sb(99,"nb-card-body",17),l.vc(100,L,3,2,"div",43),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&e){var n=l.bc();l.Bb(11),l.hc("value",n.totals.totalSurfaceCovered),l.Bb(6),l.hc("value",n.totals.totalSurfaceSemiCovered),l.Bb(6),l.hc("value",n.totals.totalSurfaceSemiCovered/2),l.Bb(6),l.hc("value",n.totals.totalSurface),l.Bb(6),l.hc("value",n.totals.calculateMaximumConsumptionDetermined),l.Bb(6),l.hc("value",n.totals.apparentPower),l.Bb(6),l.hc("value",n.totals.electrificationDegree),l.Bb(18),l.sc(n.isMinimalElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),l.Bb(7),l.sc(n.isMediumElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),l.Bb(7),l.sc(n.isHighElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),l.Bb(7),l.sc(n.isUpperElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),l.Bb(12),l.hc("ngIf",(null==n.project().surfaces?null:n.project().surfaces.length)>0),l.Bb(2),l.hc("ngForOf",n.circuitsByelectrificationDegree)}}var V,G=((V=function(){function e(t,i,r){n(this,e),this.projectsService=t,this.fb=i,this.activatedRoute=r}return t(e,[{key:"ngOnInit",value:function(){this.surfaceForm=this.fb.group({type:["",u.r.required],environment:["",u.r.required],width:["",u.r.required],length:["",u.r.required]}),this._projectManager=new P(parseInt(this.activatedRoute.snapshot.params.projectId),this.projectsService),this.isEdit=!1}},{key:"project",value:function(){return this._projectManager.getProject()}},{key:"saveSurface",value:function(){if(this.surfaceForm.invalid)alert("the form is invalid");else{if(this.isEdit){var e=this.surfaceForm.value;this.selectedSurface.type=e.type,this.selectedSurface.width=e.width,this.selectedSurface.length=e.length,this._projectManager.udpateSurface(this.selectedSurface)}else{var t=this.surfaceForm.value;this._projectManager.addSurface(t.type,t.environment,t.width,t.length)}this.cleanForm()}}},{key:"cleanForm",value:function(){this.isEdit=!1,this.surfaceForm.controls.type.setValue(""),this.surfaceForm.controls.environment.setValue(""),this.surfaceForm.controls.width.setValue(""),this.surfaceForm.controls.length.setValue(""),this._projectManager=new P(this._projectManager.getProject().id,this.projectsService)}},{key:"editSurface",value:function(e){this.selectedSurface=this._projectManager.getSurface(e),this.surfaceForm.patchValue(this.selectedSurface),this.isEdit=!0}},{key:"deleteSurface",value:function(e){this._projectManager.deleteSurface(e),this.projectsService.updateProject(this._projectManager.getProject()),this.cleanForm()}},{key:"isFormInvalid",value:function(){return this.surfaceForm.controls.type.hasError("required")||this.surfaceForm.controls.environment.hasError("required")||this.surfaceForm.controls.width.hasError("required")||this.surfaceForm.controls.length.hasError("required")}},{key:"coveredSurfaces",value:function(){return this._projectManager.getProject().surfaces.filter((function(e){return e.type==v.Covered}))}},{key:"semiCoveredSurfaces",value:function(){return this._projectManager.getProject().surfaces.filter((function(e){return e.type==v.SemiCovered}))}},{key:"isMinimalElectrificationDegree",value:function(){return this._projectManager.electrificationDegree()==S.Minimal}},{key:"isMediumElectrificationDegree",value:function(){return this._projectManager.electrificationDegree()==S.Medium}},{key:"isHighElectrificationDegree",value:function(){return this._projectManager.electrificationDegree()==S.High}},{key:"isUpperElectrificationDegree",value:function(){return this._projectManager.electrificationDegree()==S.Upper}},{key:"circuitsByelectrificationDegree",get:function(){return this._projectManager.circuitsByelectrificationDegree()}},{key:"totals",get:function(){return{totalSurfaceCovered:this._projectManager.totalSurfaceCovered(),totalSurfaceSemiCovered:this._projectManager.totalSurfaceSemiCovered(),totalSurface:this._projectManager.totalSurface(),calculateMaximumConsumptionDetermined:this._projectManager.calculateMaximumConsumptionDetermined(),apparentPower:this._projectManager.apparentPower(),electrificationDegree:this._projectManager.electrificationDegree()}}}]),e}()).\u0275fac=function(e){return new(e||V)(l.Mb(b),l.Mb(u.b),l.Mb(a.a))},V.\u0275cmp=l.Gb({type:V,selectors:[["surfaces"]],decls:29,vars:9,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["placeholder","Choose a surface type","formControlName","type"],["value","0"],["value","1"],["nbInput","","formControlName","environment","type","text","placeholder","Environment","maxlength","100",3,"readonly"],["nbInput","","formControlName","width","type","number","placeholder","Width [m]"],["nbInput","","formControlName","length","type","number","placeholder","Length [m]"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","info",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","disabled","","type","text","placeholder","Environment",3,"value"],["nbInput","","disabled","","type","number","placeholder","Width [m]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Length [m]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Surface [m2]",3,"value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["nbInput","","disabled","","type","number","placeholder","Width",3,"value"],["nbInput","","disabled","","type","number","placeholder","Length",3,"value"],["accent","info"],[1,"form-group","row","form-horizontal"],[1,"col-md-5"],[1,"form-group","row"],[1,"col-md-7"],["nbInput","","disabled","","type","number","placeholder","Surface Covered [m2]",3,"value"],[1,"text"],["nbInput","","disabled","","type","number","placeholder","Surface Semi Covered [m2]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Surface Semi Covered %50 [m2]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Maximum Consumption Determined [W]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Apparent Power [KVA]",3,"value"],["nbInput","","disabled","","type","text","placeholder","Apparent Power [KVA]",3,"value"],["accent","danger"],[2,"width","20%"],[2,"width","40%"],[2,"width","60%"],[4,"ngIf"],["class","row inline-form-card",4,"ngFor","ngForOf"],["nbButton","","outline","","status","success",3,"routerLink"],[1,"row","inline-form-card"],[1,"col-md-2"],["nbInput","","disabled","","type","text",3,"placeholder","value"]],template:function(e,t){var n,i;1&e&&(l.Sb(0,"div",0),l.Sb(1,"div",1),l.Sb(2,"nb-card",2),l.Sb(3,"nb-card-header"),l.xc(4,"Surface "),l.Sb(5,"a",3),l.xc(6,"Back to Proyects"),l.Rb(),l.Rb(),l.Sb(7,"nb-card-body"),l.Sb(8,"form",4),l.Sb(9,"nb-select",5),l.Sb(10,"nb-option",6),l.xc(11,"Covered"),l.Rb(),l.Sb(12,"nb-option",7),l.xc(13,"Semi-Covered"),l.Rb(),l.Rb(),l.Nb(14,"input",8),l.Nb(15,"input",9),l.Nb(16,"input",10),l.Sb(17,"button",11),l.Zb("click",(function(){return t.saveSurface()})),l.xc(18),l.Rb(),l.vc(19,k,2,0,"button",12),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(20,"div",0),l.Sb(21,"div",1),l.vc(22,T,6,1,"nb-card",13),l.Rb(),l.Rb(),l.Sb(23,"div",0),l.Sb(24,"div",1),l.vc(25,F,6,1,"nb-card",13),l.Rb(),l.Rb(),l.Sb(26,"div",0),l.Sb(27,"div",1),l.vc(28,U,101,17,"nb-card",14),l.Rb(),l.Rb()),2&e&&(l.Bb(5),l.hc("routerLink","../../../projects"),l.Bb(3),l.hc("formGroup",t.surfaceForm),l.Bb(6),l.hc("readonly",t.isEdit),l.Bb(3),l.hc("disabled",t.isFormInvalid()),l.Bb(1),l.yc(t.isEdit?"Update Surface":"Save Surface"),l.Bb(1),l.hc("ngIf",t.isEdit),l.Bb(3),l.hc("ngIf",(null==(n=t.coveredSurfaces())?null:n.length)>0),l.Bb(3),l.hc("ngIf",(null==(i=t.semiCoveredSurfaces())?null:i.length)>0),l.Bb(3),l.hc("ngIf",(null==t.project().surfaces?null:t.project().surfaces.length)>0))},directives:[m.j,m.k,m.g,a.f,m.i,u.s,u.k,u.d,m.K,u.j,u.c,m.I,m.v,u.a,u.f,u.n,c.m,c.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}span.text[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}span.text[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),V),H=function(){function e(t){n(this,e),this._artifact=t}return t(e,[{key:"getArtifact",value:function(){return this._artifact}}],[{key:"commonArtifacts",get:function(){return[{name:"AFEITADORA",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 2200 FRIGOR\xcdAS F/C",powerConsumption:1350,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 3500 FRIGOR\xcdAS F/C",powerConsumption:2150,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 4500 FRIGOR\xcdAS F/C",powerConsumption:2800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 2200 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:877.5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 3500 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:1397.5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 4500 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:1820,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 120 MM DE DI\xc1METRO",powerConsumption:750,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 140 MM DE DI\xc1METRO",powerConsumption:1250,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 175 MM DE DI\xc1METRO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 200 MM DE DI\xc1METRO",powerConsumption:1800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 215 MM DE DI\xc1METRO",powerConsumption:2110,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 220 MM DE DI\xc1METRO",powerConsumption:2350,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE RESISTIVO CON HORNALLA DE 150 MM DE DI\xc1METRO",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE RESISTIVO CON HORNALLA DE 190 MM DE DI\xc1METRO",powerConsumption:2e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ASPIRADORA",powerConsumption:1200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BATIDORA DE MANO",powerConsumption:300,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BOMBA DE AGUA DE 1/2 HP",powerConsumption:380,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BOMBA DE AGUA DE 3/4 HP",powerConsumption:570,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CAFETERA DE FILTRO EL\xc9CTRICA",powerConsumption:900,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CALOVENTILADOR CHICO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CARGADOR DE CELULAR GEN\xc9RICO",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"COMPUTADORA (S\xd3LO LA CPU)",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 80 M3/HORA",powerConsumption:12,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 200 M3/HORA",powerConsumption:20,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 1200 M3/HORA",powerConsumption:50,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ESTUFA HAL\xd3GENA DE 3 VELAS C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ESTUFA DE CUARZO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"FREEZER",powerConsumption:250,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA",powerConsumption:150,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA CON FREEZER",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA CON FREEZER - INVERTER",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HORNO EL\xc9CTRICO DE 25 A 30 LITROS C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HORNO EL\xc9CTRICO DE 73 LITROS C/TERMOSTATO, PARA EMPOTRAR",powerConsumption:2450,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 11W",powerConsumption:11,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 15W",powerConsumption:15,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 20W",powerConsumption:20,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 100 W",powerConsumption:100,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 40 W",powerConsumption:40,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 60 W",powerConsumption:60,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 5 W",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 7 W",powerConsumption:7,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 9 W",powerConsumption:9,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 12 W",powerConsumption:12,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"LICUADORA",powerConsumption:400,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"MICROONDAS 800 W",powerConsumption:800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"MINIPIMER",powerConsumption:400,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PARRILLA EL\xc9CTRICA 2000 W",powerConsumption:2e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PAVA EL\xc9CTRICA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PLANCHA PARA ROPA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PLANCHA PARA ROPA A VAPOR",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PULIDORA",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"RADIO",powerConsumption:15,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SECADOR DE PELO",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SOMMIER C/LEVANTACOLCH\xd3N",powerConsumption:130,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SPOT DICROICA 50 W",powerConsumption:50,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TELEVISOR DE 42''",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TOSTADORA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TURBO CALOVENTILADOR CHICO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"VENTILADOR DE MESA CHICO",powerConsumption:55,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"VENTILADOR DE PIE GRANDE",powerConsumption:110,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1}]}}]),e}();function W(e,t){if(1&e){var n=l.Tb();l.Sb(0,"li",19),l.Nb(1,"input",20),l.Nb(2,"input",21),l.Sb(3,"nb-toggle",22),l.xc(4,"Consume In Summer Day"),l.Rb(),l.Sb(5,"nb-toggle",22),l.xc(6,"Consume In Summer Night"),l.Rb(),l.Sb(7,"nb-toggle",22),l.xc(8,"Consume In Winter Day"),l.Rb(),l.Sb(9,"nb-toggle",22),l.xc(10,"Consume In Winter Night"),l.Rb(),l.Sb(11,"button",23),l.Zb("click",(function(){l.nc(n);var e=t.$implicit;return l.bc(2).editArtifact(e.name)})),l.xc(12,"Edit"),l.Rb(),l.Sb(13,"button",24),l.Zb("click",(function(){l.nc(n);var e=t.$implicit;return l.bc(2).deleteArtifact(e.name)})),l.xc(14,"Delete"),l.Rb(),l.Rb()}if(2&e){var i=t.$implicit,r=l.bc(2);l.Bb(1),l.hc("value",i.name),l.Bb(1),l.hc("value",i.powerConsumption),l.Bb(1),l.hc("checked",i.summerDay),l.Bb(2),l.hc("checked",i.summerNight),l.Bb(2),l.hc("checked",i.winterDay),l.Bb(2),l.hc("checked",i.winterNight),l.Bb(2),l.hc("disabled",r.isEdit),l.Bb(2),l.hc("disabled",r.isEdit)}}function q(e,t){if(1&e&&(l.Sb(0,"nb-card",2),l.Sb(1,"nb-card-header"),l.xc(2,"Artifacts"),l.Rb(),l.Sb(3,"nb-card-body"),l.Sb(4,"ul"),l.vc(5,W,15,8,"li",18),l.Rb(),l.Rb(),l.Rb()),2&e){var n=l.bc();l.Bb(5),l.hc("ngForOf",n.artifacts)}}function z(e,t){if(1&e){var n=l.Tb();l.Sb(0,"tr"),l.Sb(1,"td"),l.xc(2),l.Rb(),l.Sb(3,"td"),l.xc(4),l.Rb(),l.Sb(5,"td"),l.Sb(6,"button",25),l.Zb("click",(function(){l.nc(n);var e=t.$implicit;return l.bc().addArtifact(e)})),l.xc(7,"Add"),l.Rb(),l.Rb(),l.Rb()}if(2&e){var i=t.$implicit,r=l.bc();l.Bb(2),l.zc(" ",i.name," "),l.Bb(2),l.zc(" ",i.powerConsumption," "),l.Bb(2),l.hc("disabled",r.isEdit)}}var Z,$=((Z=function(){function e(t,i,r){n(this,e),this.projectsService=t,this.fb=i,this.activatedRoute=r}return t(e,[{key:"ngOnInit",value:function(){this.artifactForm=this.fb.group({name:["",u.r.required],powerConsumption:["",u.r.required],summerDay:[!1,u.r.required],summerNight:[!1,u.r.required],winterDay:[!1,u.r.required],winterNight:[!1,u.r.required]}),this._projectManager=new P(parseInt(this.activatedRoute.snapshot.params.projectId),this.projectsService),this.environment=this.activatedRoute.snapshot.params.environment,this.isEdit=!1}},{key:"project",value:function(){return this._projectManager.getProject()}},{key:"saveArtifact",value:function(){if(this.artifactForm.invalid)alert("the form is invalid");else{var e=this._projectManager.surfaceManager(this.environment);if(this.isEdit)e.udpateArtifact(new x(this.artifactForm.value));else{var t=this.artifactForm.value;e.addArtifact(t.name,t.powerConsumption,t.summerDay,t.summerNight,t.winterDay,t.winterNight)}this._projectManager.udpateSurface(e.getSurface()),this.cleanForm()}}},{key:"cleanForm",value:function(){this.isEdit=!1,this.artifactForm.reset(),this._projectManager=new P(this._projectManager.getProject().id,this.projectsService)}},{key:"editArtifact",value:function(e){var t=this._projectManager.surfaceManager(this.environment);this.selectedArtifact=t.getArtifact(e),this.artifactForm.patchValue(this.selectedArtifact),this.artifactForm.markAsDirty(),this.isEdit=!0}},{key:"addArtifact",value:function(e){this.artifactForm.patchValue(e),this.artifactForm.markAsDirty()}},{key:"deleteArtifact",value:function(e){var t=this._projectManager.surfaceManager(this.environment);t.deleteArtifact(e),this._projectManager.udpateSurface(t.getSurface()),this.cleanForm()}},{key:"isFormInvalid",value:function(){return this.artifactForm.controls.name.hasError("required")||this.artifactForm.controls.powerConsumption.hasError("required")||this.artifactForm.controls.summerDay.hasError("required")||this.artifactForm.controls.summerNight.hasError("required")||this.artifactForm.controls.winterDay.hasError("required")||this.artifactForm.controls.winterNight.hasError("required")}},{key:"isDirty",value:function(){return this.artifactForm.dirty}},{key:"commonArtifacts",value:function(){return H.commonArtifacts}},{key:"artifacts",get:function(){return new E(this._projectManager.getSurface(this.environment)).artifacts}}]),e}()).\u0275fac=function(e){return new(e||Z)(l.Mb(b),l.Mb(u.b),l.Mb(a.a))},Z.\u0275cmp=l.Gb({type:Z,selectors:[["artifacts"]],decls:43,vars:10,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Name","maxlength","100",3,"readOnly"],["nbInput","","formControlName","powerConsumption","type","number","placeholder","Power Consumption [W]"],["formControlName","summerDay","status","info"],["formControlName","summerNight","status","info"],["formControlName","winterDay","status","info"],["formControlName","winterNight","status","info"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"disabled","click"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","warning"],[2,"width","40%"],[2,"width","20%"],[4,"ngFor","ngForOf"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","disabled","","type","text","placeholder","Name",3,"value"],["nbInput","","disabled","","type","number","placeholder","Power Consumption [W]",3,"value"],["disabled","","status","info",3,"checked"],["nbButton","","outline","","status","primary",3,"disabled","click"],["nbButton","","outline","","status","danger",3,"disabled","click"],["nbButton","","outline","","status","success",3,"disabled","click"]],template:function(e,t){1&e&&(l.Sb(0,"div",0),l.Sb(1,"div",1),l.Sb(2,"nb-card",2),l.Sb(3,"nb-card-header"),l.xc(4),l.Sb(5,"a",3),l.xc(6,"Back to Surfaces"),l.Rb(),l.Rb(),l.Sb(7,"nb-card-body"),l.Sb(8,"form",4),l.Nb(9,"input",5),l.Nb(10,"input",6),l.Sb(11,"nb-toggle",7),l.xc(12,"Consume In Summer Day"),l.Rb(),l.Sb(13,"nb-toggle",8),l.xc(14,"Consume In Summer Night"),l.Rb(),l.Sb(15,"nb-toggle",9),l.xc(16,"Consume In Winter Day"),l.Rb(),l.Sb(17,"nb-toggle",10),l.xc(18,"Consume In Winter Night"),l.Rb(),l.Sb(19,"button",11),l.Zb("click",(function(){return t.saveArtifact()})),l.xc(20),l.Rb(),l.Sb(21,"button",12),l.Zb("click",(function(){return t.cleanForm()})),l.xc(22),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(23,"div",0),l.Sb(24,"div",1),l.vc(25,q,6,1,"nb-card",13),l.Rb(),l.Rb(),l.Sb(26,"div",0),l.Sb(27,"div",1),l.Sb(28,"nb-card",14),l.Sb(29,"nb-card-header"),l.xc(30,"Common Artifacts"),l.Rb(),l.Sb(31,"nb-card-body"),l.Sb(32,"table"),l.Sb(33,"thead"),l.Sb(34,"tr"),l.Sb(35,"th",15),l.xc(36,"Artifact Name"),l.Rb(),l.Sb(37,"th",16),l.xc(38,"Power"),l.Rb(),l.Sb(39,"th",16),l.xc(40,"Action"),l.Rb(),l.Rb(),l.Rb(),l.Sb(41,"tbody"),l.vc(42,z,8,3,"tr",17),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&e&&(l.Bb(4),l.zc(" Artifact for environment: ",t.environment," "),l.Bb(1),l.hc("routerLink","../../../surfaces/"+t.project().id),l.Bb(3),l.hc("formGroup",t.artifactForm),l.Bb(1),l.hc("readOnly",t.isEdit),l.Bb(10),l.hc("disabled",t.isFormInvalid()),l.Bb(1),l.yc(t.isEdit?"Update Artifact":"Save Artifact"),l.Bb(1),l.hc("disabled",!t.isDirty()),l.Bb(1),l.yc(t.isEdit?"Cancel":"Clean"),l.Bb(3),l.hc("ngIf",(null==t.artifacts?null:t.artifacts.length)>0),l.Bb(17),l.hc("ngForOf",t.commonArtifacts()))},directives:[m.j,m.k,m.g,a.f,m.i,u.s,u.k,u.d,m.v,u.a,u.j,u.c,u.f,u.n,m.T,c.m,c.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),Z);function J(e,t){if(1&e){var n=l.Tb();l.Sb(0,"button",18),l.Zb("click",(function(){return l.nc(n),l.bc().cleanForm()})),l.xc(1,"Cancel"),l.Rb()}}function K(e,t){if(1&e){var n=l.Tb();l.Sb(0,"li",19),l.Nb(1,"input",30),l.Nb(2,"input",31),l.Nb(3,"input",32),l.Nb(4,"input",33),l.Nb(5,"input",34),l.Nb(6,"input",35),l.Nb(7,"input",36),l.Nb(8,"input",37),l.Nb(9,"input",38),l.Sb(10,"button",39),l.Zb("click",(function(){l.nc(n);var e=t.$implicit;return l.bc(2).editCircuit(e.name)})),l.xc(11,"Edit"),l.Rb(),l.Sb(12,"button",40),l.Zb("click",(function(){l.nc(n);var e=t.$implicit;return l.bc(2).deleteCircuit(e.name)})),l.xc(13,"Delete"),l.Rb(),l.Rb()}if(2&e){var i,r=t.$implicit,o=l.bc(2);l.Bb(1),l.hc("value",r.name),l.Bb(1),l.hc("value",r.circuitType),l.Bb(1),l.hc("status",r.numberOfMouths<=o.maxNumberOfMouths(r.name)?"success":"danger")("value",r.numberOfMouths),l.Bb(1),l.hc("value",r.length),l.Bb(1),l.hc("value",o.powerLoad(r.name)),l.Bb(1),l.hc("value",o.current(r.name)),l.Bb(1),l.hc("value",o.nominalSection(r.name)),l.Bb(1),l.hc("status",o.isValidTension(r.name)?"success":"danger")("value",o.calculateTensionDrop(r.name)),l.Bb(1),l.hc("status",o.isValidProtection(r.name,o.calculateProtection(r.name))?"success":"danger")("value",null==(i=o.calculateProtection(r.name))?null:i.protectionType)}}function X(e,t){if(1&e&&(l.Sb(0,"nb-card",2),l.Sb(1,"nb-card-header"),l.xc(2,"Circuits"),l.Rb(),l.Sb(3,"nb-card-body"),l.Sb(4,"ul"),l.Sb(5,"li",19),l.Nb(6,"input",20),l.Nb(7,"input",21),l.Nb(8,"input",22),l.Nb(9,"input",23),l.Nb(10,"input",24),l.Nb(11,"input",25),l.Nb(12,"input",26),l.Nb(13,"input",27),l.Nb(14,"input",28),l.Rb(),l.Rb(),l.Sb(15,"ul"),l.vc(16,K,14,12,"li",29),l.Rb(),l.Rb(),l.Rb()),2&e){var n=l.bc();l.Bb(16),l.hc("ngForOf",n.project().circuits)}}function Q(e,t){if(1&e&&(l.Sb(0,"tr"),l.Sb(1,"td"),l.xc(2),l.Rb(),l.Sb(3,"td"),l.xc(4),l.Rb(),l.Rb()),2&e){var n=t.$implicit;l.Bb(2),l.zc(" ",n.nominalSection," "),l.Bb(2),l.zc(" ",n.allowableCurrentIntensityInPipes," ")}}function Y(e,t){if(1&e&&(l.Sb(0,"tr"),l.Sb(1,"td"),l.xc(2),l.Rb(),l.Sb(3,"td"),l.xc(4),l.Rb(),l.Rb()),2&e){var n=t.$implicit;l.Bb(2),l.zc(" ",n.circuitType," "),l.Bb(2),l.zc(" <= ",n.maxTensionDrop," % ")}}function ee(e,t){if(1&e&&(l.Sb(0,"tr"),l.Sb(1,"td"),l.xc(2),l.Rb(),l.Sb(3,"td"),l.xc(4),l.Rb(),l.Rb()),2&e){var n=t.$implicit;l.Bb(2),l.zc(" ",n.circuitType," "),l.Bb(2),l.zc(" >= ",n.minSectionNominal," mm2 ")}}function te(e,t){if(1&e&&(l.Sb(0,"nb-card",41),l.Sb(1,"nb-card-header"),l.xc(2,"References"),l.Rb(),l.Sb(3,"nb-card-body"),l.Sb(4,"div",42),l.Sb(5,"div",1),l.Sb(6,"nb-card",43),l.Sb(7,"nb-card-header"),l.xc(8,"Number of Mouths"),l.Rb(),l.Sb(9,"nb-card-body"),l.Sb(10,"table"),l.Sb(11,"thead"),l.Sb(12,"tr"),l.Sb(13,"th",44),l.xc(14,"Circuit Type"),l.Rb(),l.Sb(15,"th",44),l.xc(16,"Designation"),l.Rb(),l.Sb(17,"th",44),l.xc(18,"Maximum Number of Mouths"),l.Rb(),l.Sb(19,"th",44),l.xc(20,"Power Load"),l.Rb(),l.Sb(21,"th",44),l.xc(22,"Factor Load"),l.Rb(),l.Rb(),l.Rb(),l.Sb(23,"tbody"),l.Sb(24,"tr"),l.Sb(25,"td"),l.xc(26),l.Rb(),l.Sb(27,"td"),l.xc(28," General purpose lighting "),l.Rb(),l.Sb(29,"td"),l.xc(30," 15 "),l.Rb(),l.Sb(31,"td"),l.xc(32," 810 "),l.Rb(),l.Sb(33,"td"),l.xc(34," 0,66 "),l.Rb(),l.Rb(),l.Sb(35,"tr"),l.Sb(36,"td"),l.xc(37),l.Rb(),l.Sb(38,"td"),l.xc(39," General purpose sockets "),l.Rb(),l.Sb(40,"td"),l.xc(41," 15 "),l.Rb(),l.Sb(42,"td"),l.xc(43," 1980 "),l.Rb(),l.Sb(44,"td"),l.xc(45," 1 "),l.Rb(),l.Rb(),l.Sb(46,"tr"),l.Sb(47,"td"),l.xc(48),l.Rb(),l.Sb(49,"td"),l.xc(50," Special use lighting "),l.Rb(),l.Sb(51,"td"),l.xc(52," 12 "),l.Rb(),l.Sb(53,"td"),l.xc(54," 1980 "),l.Rb(),l.Sb(55,"td"),l.xc(56," 1 "),l.Rb(),l.Rb(),l.Sb(57,"tr"),l.Sb(58,"td"),l.xc(59),l.Rb(),l.Sb(60,"td"),l.xc(61," Special purpose sockets "),l.Rb(),l.Sb(62,"td"),l.xc(63," 12 "),l.Rb(),l.Sb(64,"td"),l.xc(65," 1980 "),l.Rb(),l.Sb(66,"td"),l.xc(67," 1 "),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(68,"div",42),l.Sb(69,"div",1),l.Sb(70,"nb-card",45),l.Sb(71,"nb-card-header"),l.xc(72,"Simultaneity Coefficient"),l.Rb(),l.Sb(73,"nb-card-body"),l.Sb(74,"table"),l.Sb(75,"thead"),l.Sb(76,"tr"),l.Sb(77,"th",44),l.xc(78,"Electrification Degree"),l.Rb(),l.Sb(79,"th",44),l.xc(80,"Simultaneity Coefficient"),l.Rb(),l.Rb(),l.Rb(),l.Sb(81,"tbody"),l.Sb(82,"tr"),l.Sb(83,"td"),l.xc(84),l.Rb(),l.Sb(85,"td"),l.xc(86," 1 "),l.Rb(),l.Rb(),l.Sb(87,"tr"),l.Sb(88,"td"),l.xc(89),l.Rb(),l.Sb(90,"td"),l.xc(91," 0,9 "),l.Rb(),l.Rb(),l.Sb(92,"tr"),l.Sb(93,"td"),l.xc(94),l.Rb(),l.Sb(95,"td"),l.xc(96," 0,8 "),l.Rb(),l.Rb(),l.Sb(97,"tr"),l.Sb(98,"td"),l.xc(99),l.Rb(),l.Sb(100,"td"),l.xc(101," 0,7 "),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(102,"div",42),l.Sb(103,"div",1),l.Sb(104,"nb-card",46),l.Sb(105,"nb-card-header"),l.xc(106,"Technical Features"),l.Rb(),l.Sb(107,"nb-card-body"),l.Sb(108,"table"),l.Sb(109,"thead"),l.Sb(110,"tr"),l.Sb(111,"th",44),l.xc(112,"Nominal Section"),l.Rb(),l.Sb(113,"th",44),l.xc(114,"Allowable CurrentIntensity In Pipes"),l.Rb(),l.Rb(),l.Rb(),l.Sb(115,"tbody"),l.vc(116,Q,5,2,"tr",47),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(117,"div",42),l.Sb(118,"div",1),l.Sb(119,"nb-card",46),l.Sb(120,"nb-card-header"),l.xc(121,"Tension Drops"),l.Rb(),l.Sb(122,"nb-card-body"),l.Sb(123,"table"),l.Sb(124,"thead"),l.Sb(125,"tr"),l.Sb(126,"th",44),l.xc(127,"Circuit Type"),l.Rb(),l.Sb(128,"th",44),l.xc(129,"[e%]"),l.Rb(),l.Rb(),l.Rb(),l.Sb(130,"tbody"),l.vc(131,Y,5,2,"tr",47),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(132,"div",42),l.Sb(133,"div",1),l.Sb(134,"nb-card",46),l.Sb(135,"nb-card-header"),l.xc(136,"Nominal Sections"),l.Rb(),l.Sb(137,"nb-card-body"),l.Sb(138,"table"),l.Sb(139,"thead"),l.Sb(140,"tr"),l.Sb(141,"th",44),l.xc(142,"Circuit Type"),l.Rb(),l.Sb(143,"th",44),l.xc(144,"Nominal Section"),l.Rb(),l.Rb(),l.Rb(),l.Sb(145,"tbody"),l.vc(146,ee,5,2,"tr",47),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&e){var n=l.bc();l.Bb(26),l.zc(" ",n.circuitType("IUG")," "),l.Bb(11),l.zc(" ",n.circuitType("TUG")," "),l.Bb(11),l.zc(" ",n.circuitType("IUE")," "),l.Bb(11),l.zc(" ",n.circuitType("TUE")," "),l.Bb(23),l.sc(n.isMinimalElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),l.Bb(2),l.zc(" ",n.electrificationDegree("Minimal")," "),l.Bb(3),l.sc(n.isMediumElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),l.Bb(2),l.zc(" ",n.electrificationDegree("Medium")," "),l.Bb(3),l.sc(n.isHighElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),l.Bb(2),l.zc(" ",n.electrificationDegree("High")," "),l.Bb(3),l.sc(n.isUpperElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),l.Bb(2),l.zc(" ",n.electrificationDegree("Upper")," "),l.Bb(17),l.hc("ngForOf",n.technicalFeatures()),l.Bb(15),l.hc("ngForOf",n.tensionDrops()),l.Bb(15),l.hc("ngForOf",n.sectionNominals())}}var ne,ie,re,oe=[{path:"",component:y},{path:"surfaces/:projectId",component:G},{path:"circuits/:projectId",component:(ne=function(){function e(t,i,r){n(this,e),this.projectsService=t,this.fb=i,this.activatedRoute=r}return t(e,[{key:"ngOnInit",value:function(){this.circuitForm=this.fb.group({name:["",u.r.required],circuitType:["",u.r.required],numberOfMouths:["",u.r.required],length:["",u.r.required]}),this._projectManager=new P(parseInt(this.activatedRoute.snapshot.params.projectId),this.projectsService),this.isEdit=!1;var e=D.protections.find((function(e){return e.protectionType==w.C05}));this.maxProtectionCalculated=e}},{key:"project",value:function(){return this._projectManager.getProject()}},{key:"maxNumberOfMouths",value:function(e){return this._projectManager.circuitManager(e).maxNumberOfMouths()}},{key:"saveCircuit",value:function(){if(this.circuitForm.invalid)alert("the form is invalid");else{if(this.isEdit){var e=this.circuitForm.value;this.selectedCircuit.circuitType=e.circuitType,this.selectedCircuit.numberOfMouths=e.numberOfMouths,this.selectedCircuit.length=e.length,this._projectManager.udpateCircuit(new C(this.selectedCircuit))}else{var t=this.circuitForm.value;this._projectManager.addCircuit(t.name,t.circuitType,t.numberOfMouths,t.length)}this.cleanForm()}}},{key:"cleanForm",value:function(){this.isEdit=!1,this.circuitForm.controls.name.setValue(""),this.circuitForm.controls.circuitType.setValue(""),this.circuitForm.controls.numberOfMouths.setValue(""),this.circuitForm.controls.length.setValue(""),this._projectManager=new P(this._projectManager.getProject().id,this.projectsService)}},{key:"editCircuit",value:function(e){this.selectedCircuit=this._projectManager.getCircuit(e),this.circuitForm.patchValue(this.selectedCircuit),this.isEdit=!0}},{key:"deleteCircuit",value:function(e){this._projectManager.deleteCircuit(e),this.cleanForm()}},{key:"isFormInvalid",value:function(){return this.circuitForm.controls.name.hasError("required")||this.circuitForm.controls.circuitType.hasError("required")||this.circuitForm.controls.numberOfMouths.hasError("required")||this.circuitForm.controls.length.hasError("required")}},{key:"isCircuitTypeEditable",value:function(){return this.isEdit&&this.circuitForm.controls.circuitType.value!=R.LAP}},{key:"circuitType",value:function(e){return e}},{key:"powerLoad",value:function(e){var t=this._projectManager.circuitManager(e);return t.isLap()?this._projectManager.circuitLAPTotal():t.powerLoad()}},{key:"current",value:function(e){var t=this._projectManager.circuitManager(e);return t.isLap()?this._projectManager.currentCalculatedLAP():t.currentCalculated()}},{key:"isMinimalElectrificationDegree",value:function(){return this._projectManager.electrificationDegree()==S.Minimal}},{key:"isMediumElectrificationDegree",value:function(){return this._projectManager.electrificationDegree()==S.Medium}},{key:"isHighElectrificationDegree",value:function(){return this._projectManager.electrificationDegree()==S.High}},{key:"isUpperElectrificationDegree",value:function(){return this._projectManager.electrificationDegree()==S.Upper}},{key:"electrificationDegree",value:function(e){return e}},{key:"nominalSection",value:function(e){var t=this._projectManager.circuitManager(e),n=t.getCircuit(),i=this.current(e),r=this._projectManager.nominalSectionByCurrentIntensity(i),o=N.sectionNominals.find((function(e){return e.circuitType==n.circuitType}));return this._projectManager.validateNominalSection(this.technicalFeatures(),n.circuitType,n.length,o&&r>o.minSectionNominal?r:o.minSectionNominal,t.powerLoad(),t.isLap())}},{key:"technicalFeatures",value:function(){return I.tecnicalFeatures}},{key:"calculateTensionDrop",value:function(e){var t=this._projectManager.circuitManager(e),n=this.nominalSection(t.getCircuit().name),i=this.powerLoad(e),r=t.getCircuit();return this._projectManager.calcuteTensionDrop(r.length,n,i)}},{key:"tensionDrops",value:function(){return A.tensionDrops}},{key:"tensionDrop",value:function(e){var t=A.tensionDrops.find((function(t){return t.circuitType==e}));return(null==t?void 0:t.maxTensionDrop)||0}},{key:"isValidTension",value:function(e){var t=this._projectManager.circuitManager(e);return this.calculateTensionDrop(e)<=this.tensionDrop(t.getCircuit().circuitType)}},{key:"sectionNominals",value:function(){return N.sectionNominals}},{key:"calculateProtection",value:function(e){var t=this._projectManager.circuitManager(e),n=this.current(e),i=this._projectManager.calculateProtection(n,t.isLap());if(!this.isValidProtection(t.getCircuit().name,i)){var r=this.nominalSection(t.getCircuit().name),o=I.tecnicalFeatures.find((function(e){return e.nominalSection==r}));Math.abs(o.allowableCurrentIntensityInPipes-n)<1&&(i=this._projectManager.calculateProtection(o.allowableCurrentIntensityInPipes,t.isLap()))}return t.isLap()&&i.protectionValue<this.maxProtectionCalculated.protectionValue&&(i=this.findNextProtection(t.getCircuit().name,this.maxProtectionCalculated)),!t.isLap()&&this.maxProtectionCalculated.protectionValue<i.protectionValue&&(this.maxProtectionCalculated=i),i}},{key:"findNextProtection",value:function(e,t){var n=this,i=this._projectManager.circuitManager(e);if(i.getCircuit().circuitType==R.LAP){var r=D.protections.find((function(e){return e.protectionValue>n.maxProtectionCalculated.protectionValue}));if(this.isValidProtection(i.getCircuit().name,r))return r}return t}},{key:"isValidProtection",value:function(e,t){var n=this._projectManager.circuitManager(e),i=this.nominalSection(n.getCircuit().name),r=this.current(e),o=I.tecnicalFeatures.find((function(e){return e.nominalSection==i})).allowableCurrentIntensityInPipes,c=t;return r<parseFloat((1.13*c.protectionValue).toFixed(2))&&c.protectionValue<=o}}]),e}(),ne.\u0275fac=function(e){return new(e||ne)(l.Mb(b),l.Mb(u.b),l.Mb(a.a))},ne.\u0275cmp=l.Gb({type:ne,selectors:[["circuits"]],decls:32,vars:9,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Name","maxlength","100",3,"readonly"],["placeholder","Choose a circuit type","formControlName","circuitType"],["value","IUG"],["value","TUG"],["value","IUE"],["value","TUE"],["value","LAP"],["nbInput","","formControlName","numberOfMouths","type","number","placeholder","Number Of Mouths",3,"readonly"],["nbInput","","formControlName","length","type","number","placeholder","Length [m]"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","info",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],[1,"form-inline"],["nbInput","","disabled","","type","text","value","Name",1,"input-inline-name"],["nbInput","","disabled","","type","text","value","Circuit Type",1,"input-inline-circuit-type"],["nbInput","","disabled","","type","text","placeholder","Number Of Mouths","value","Number Of Mouths",1,"input-inline-mouths"],["nbInput","","disabled","","type","text","placeholder","Length","value","Length [m]",1,"input-inline-length"],["nbInput","","disabled","","type","text","placeholder","Power [W]","value","Power [W]",1,"input-inline-power"],["nbInput","","disabled","","type","text","placeholder","Current [A]","value","Current [A]",1,"input-inline-current"],["nbInput","","disabled","","type","text","placeholder","Section [mm2]","value","Section [mm2]",1,"input-inline-section"],["nbInput","","disabled","","type","text","placeholder","[e%]","value","[e%]",1,"input-inline-tension"],["nbInput","","disabled","","type","text","placeholder","Protection","value","Protection",1,"input-inline-protection"],["class","form-inline",4,"ngFor","ngForOf"],["nbInput","","disabled","","type","text","placeholder","Name",1,"input-inline-name",3,"value"],["nbInput","","disabled","","type","text","placeholder","Circuit Type",1,"input-inline-circuit-type",3,"value"],["nbInput","","readonly","","type","number","placeholder","Number Of Mouths",1,"input-inline-mouths",3,"status","value"],["nbInput","","disabled","","type","number","placeholder","Length",1,"input-inline-length",3,"value"],["nbInput","","disabled","","type","number","placeholder","Power [W]",1,"input-inline-power",3,"value"],["nbInput","","disabled","","type","text","placeholder","Current [A]",1,"input-inline-current",3,"value"],["nbInput","","disabled","","type","text","placeholder","Section [mm2]",1,"input-inline-section",3,"value"],["nbInput","","readonly","","type","text","placeholder","[e%]",1,"input-inline-tension",3,"status","value"],["nbInput","","readonly","","type","text","placeholder","Protection",1,"input-inline-protection",3,"status","value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["accent","info"],[1,"form-group","row","form-horizontal"],["accent","danger"],[2,"width","20%"],["accent","success"],["accent","warning"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(l.Sb(0,"div",0),l.Sb(1,"div",1),l.Sb(2,"nb-card",2),l.Sb(3,"nb-card-header"),l.xc(4,"Circuit "),l.Sb(5,"a",3),l.xc(6,"Back to Proyects"),l.Rb(),l.Rb(),l.Sb(7,"nb-card-body"),l.Sb(8,"form",4),l.Nb(9,"input",5),l.Sb(10,"nb-select",6),l.Sb(11,"nb-option",7),l.xc(12,"IUG"),l.Rb(),l.Sb(13,"nb-option",8),l.xc(14,"TUG"),l.Rb(),l.Sb(15,"nb-option",9),l.xc(16,"IUE"),l.Rb(),l.Sb(17,"nb-option",10),l.xc(18,"TUE"),l.Rb(),l.Sb(19,"nb-option",11),l.xc(20,"LAP"),l.Rb(),l.Rb(),l.Nb(21,"input",12),l.Nb(22,"input",13),l.Sb(23,"button",14),l.Zb("click",(function(){return t.saveCircuit()})),l.xc(24),l.Rb(),l.vc(25,J,2,0,"button",15),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(26,"div",0),l.Sb(27,"div",1),l.vc(28,X,17,1,"nb-card",16),l.Rb(),l.Rb(),l.Sb(29,"div",0),l.Sb(30,"div",1),l.vc(31,te,147,19,"nb-card",17),l.Rb(),l.Rb()),2&e&&(l.Bb(5),l.hc("routerLink","../../../projects"),l.Bb(3),l.hc("formGroup",t.circuitForm),l.Bb(1),l.hc("readonly",t.isEdit),l.Bb(12),l.hc("readonly",!t.isCircuitTypeEditable()),l.Bb(2),l.hc("disabled",t.isFormInvalid()),l.Bb(1),l.yc(t.isEdit?"Update Circuit":"Save Circuit"),l.Bb(1),l.hc("ngIf",t.isEdit),l.Bb(3),l.hc("ngIf",(null==t.project().circuits?null:t.project().circuits.length)>0),l.Bb(3),l.hc("ngIf",(null==t.project().circuits?null:t.project().circuits.length)>0))},directives:[m.j,m.k,m.g,a.f,m.i,u.s,u.k,u.d,m.v,u.a,u.j,u.c,u.f,m.K,m.I,u.n,c.m,c.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}.input-inline-name[_ngcontent-%COMP%]{width:5rem}.input-inline-circuit-type[_ngcontent-%COMP%]{width:7.5rem}.input-inline-mouths[_ngcontent-%COMP%]{width:11rem}.input-inline-length[_ngcontent-%COMP%]{width:7rem}.input-inline-power[_ngcontent-%COMP%]{width:6.8rem}.input-inline-current[_ngcontent-%COMP%]{width:7rem}.input-inline-section[_ngcontent-%COMP%]{width:9rem}.input-inline-tension[_ngcontent-%COMP%]{width:5rem}.input-inline-protection[_ngcontent-%COMP%]{width:7rem}span.text[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}span.text[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),ne)},{path:"artifacts/:projectId/:environment",component:$}],ce=((re=function e(){n(this,e)}).\u0275mod=l.Kb({type:re}),re.\u0275inj=l.Jb({factory:function(e){return new(e||re)},imports:[[a.g.forChild(oe)],a.g]}),re),ae=((ie=function e(){n(this,e)}).\u0275mod=l.Kb({type:ie}),ie.\u0275inj=l.Jb({factory:function(e){return new(e||ie)},imports:[[c.c,ce,m.l,m.P,u.e,m.h,u.p,m.w,m.L,m.U]]}),ie)},dgmN:function(e,t,i){"use strict";i.r(t),i.d(t,"PagesModule",(function(){return f}));var r,o,c,a=i("aceb"),u=i("vTDv"),s=i("tyNb"),l=[{title:"Projects",icon:"home-outline",link:"/pages/projects",home:!0}],b=i("fXoL"),m=i("mgFL"),d=[{path:"",component:(r=function e(){n(this,e),this.menu=l},r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Gb({type:r,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(b.Sb(0,"ngx-one-column-layout"),b.Nb(1,"nb-menu",0),b.Nb(2,"router-outlet"),b.Rb()),2&e&&(b.Bb(1),b.hc("items",t.menu))},directives:[m.a,a.F,s.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}"]}),r),children:[{path:"",redirectTo:"projects"},{path:"projects",loadChildren:function(){return Promise.resolve().then(i.bind(null,"0B1/")).then((function(e){return e.ProjectsModule}))}}]}],p=((o=function e(){n(this,e)}).\u0275mod=b.Kb({type:o}),o.\u0275inj=b.Jb({factory:function(e){return new(e||o)},imports:[[s.g.forChild(d)],s.g]}),o),h=i("0B1/"),f=((c=function e(){n(this,e)}).\u0275mod=b.Kb({type:c}),c.\u0275inj=b.Jb({factory:function(e){return new(e||c)},imports:[[p,u.a,a.G,h.ProjectsModule]]}),c)}}])}();
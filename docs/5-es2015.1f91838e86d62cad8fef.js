(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0B1/":function(e,t,i){"use strict";i.r(t),i.d(t,"ProjectsModule",(function(){return Q}));var n=i("ofXK"),r=i("tyNb"),o=i("3Pt+");class c{constructor(e){var t,i;if(this.id=null!==(t=e.id)&&void 0!==t?t:(()=>{throw new Error("id cannot be null or undefined")})(),this.name=null!==(i=e.name)&&void 0!==i?i:(()=>{throw new Error("id cannot be null or undefined")})(),e.id<=0)throw new Error("id must be greater than 0");this.surfaces=e.surfaces,this.circuits=e.circuits,e.surfaces||(this.surfaces=[]),e.circuits||(this.circuits=[])}}var a=i("fXoL");let s=(()=>{class e{constructor(){this.key="projects"}saveProject(e){let t=this.getProjects(),i=new c({id:t.length+1,name:e});t=t.filter(e=>e.id!=i.id),t.push(i),localStorage.setItem(this.key,JSON.stringify(t))}updateProject(e){let t=this.getProjects();const i=t.findIndex(t=>t.id==e.id);i>-1&&(t[i]=new c(e),localStorage.setItem(this.key,JSON.stringify(t)))}deleteProject(e){const t=this.getProjects().filter(t=>t.id!=e);t&&localStorage.setItem(this.key,JSON.stringify(t))}getProjects(){const e=localStorage.getItem(this.key);return e?JSON.parse(e):[]}getProjectById(e){var t;const i=localStorage.getItem(this.key);return i?null===(t=JSON.parse(i))||void 0===t?void 0:t.find(t=>t.id==e):void 0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=i("aceb");function b(e,t){if(1&e){const e=a.Tb();a.Sb(0,"button",8),a.Zb("click",(function(){return a.nc(e),a.bc().cleanForm()})),a.xc(1,"Cancel"),a.Rb()}}function l(e,t){if(1&e&&(a.Sb(0,"span"),a.Sb(1,"a",17),a.xc(2,"Circuits"),a.Rb(),a.Rb()),2&e){const e=a.bc().$implicit;a.Bb(1),a.hc("routerLink","./circuits/"+e.id)}}function m(e,t){if(1&e){const e=a.Tb();a.Sb(0,"li",10),a.Nb(1,"input",11),a.Nb(2,"input",12),a.Sb(3,"button",13),a.Zb("click",(function(){a.nc(e);const i=t.$implicit;return a.bc(2).editProject(i.id)})),a.xc(4,"Edit"),a.Rb(),a.Sb(5,"button",14),a.Zb("click",(function(){a.nc(e);const i=t.$implicit;return a.bc(2).deleteProject(i.id)})),a.xc(6,"Delete"),a.Rb(),a.Sb(7,"a",15),a.xc(8,"Surfaces"),a.Rb(),a.vc(9,l,3,1,"span",16),a.Rb()}if(2&e){const e=t.$implicit;a.Bb(1),a.hc("value",e.id),a.Bb(1),a.hc("value",e.name),a.Bb(5),a.hc("routerLink","./surfaces/"+e.id),a.Bb(2),a.hc("ngIf",(null==e.surfaces?null:e.surfaces.length)>0)}}function d(e,t){if(1&e&&(a.Sb(0,"nb-card",2),a.Sb(1,"nb-card-header"),a.xc(2,"Proyects"),a.Rb(),a.Sb(3,"nb-card-body"),a.Sb(4,"ul"),a.vc(5,m,10,4,"li",9),a.Rb(),a.Rb(),a.Rb()),2&e){const e=a.bc();a.Bb(5),a.hc("ngForOf",e.projects)}}let p=(()=>{class e{constructor(e,t){this.projectsService=e,this.fb=t}ngOnInit(){this.projectForm=this.fb.group({name:["",o.r.required]}),this.projects=this.projectsService.getProjects(),this.isEdit=!1}saveProject(){this.projectForm.invalid?alert("the form is invalid"):(this.isEdit?(this.selectedProject.name=this.projectForm.value.name,this.projectsService.updateProject(new c(this.selectedProject))):this.projectsService.saveProject(this.projectForm.value),this.cleanForm())}cleanForm(){this.isEdit=!1,this.projectForm.controls.name.setValue(""),this.projects=this.projectsService.getProjects()}editProject(e){this.selectedProject=new c(this.projectsService.getProjectById(e)),this.projectForm.patchValue(this.selectedProject),this.isEdit=!0}deleteProject(e){this.projectsService.deleteProject(e),this.cleanForm()}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(s),a.Mb(o.b))},e.\u0275cmp=a.Gb({type:e,selectors:[["projects"]],decls:14,vars:5,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Project Name","maxlength","100"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","type","text","disabled","",3,"value"],["nbInput","","type","text","disabled","","maxlength","100",3,"value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["nbButton","","outline","","status","info",3,"routerLink"],[4,"ngIf"],["nbButton","","outline","","status","success",3,"routerLink"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"nb-card",2),a.Sb(3,"nb-card-header"),a.xc(4,"Project"),a.Rb(),a.Sb(5,"nb-card-body"),a.Sb(6,"form",3),a.Nb(7,"input",4),a.Sb(8,"button",5),a.Zb("click",(function(){return t.saveProject()})),a.xc(9),a.Rb(),a.vc(10,b,2,0,"button",6),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(11,"div",0),a.Sb(12,"div",1),a.vc(13,d,6,1,"nb-card",7),a.Rb(),a.Rb()),2&e&&(a.Bb(6),a.hc("formGroup",t.projectForm),a.Bb(2),a.hc("disabled",t.projectForm.controls.name.hasError("required")),a.Bb(1),a.yc(t.isEdit?"Update Project":"Save Project"),a.Bb(1),a.hc("ngIf",t.isEdit),a.Bb(3),a.hc("ngIf",(null==t.projects?null:t.projects.length)>0))},directives:[u.j,u.k,u.i,o.s,o.k,o.d,u.v,o.a,o.j,o.c,o.f,u.g,n.m,n.l,r.f],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}"]}),e})();var h=function(e){return e[e.Covered=0]="Covered",e[e.SemiCovered=1]="SemiCovered",e}({}),f=function(e){return e.Minimal="Minimal",e.Medium="Medium",e.High="High",e.Upper="Upper",e}({});class g{constructor(e){var t,i,n,r;if(this.name=null!==(t=e.name)&&void 0!==t?t:(()=>{throw new Error("name cannot be null or undefined")})(),this.circuitType=null!==(i=e.circuitType)&&void 0!==i?i:(()=>{throw new Error("circuitType cannot be null or undefined")})(),this.numberOfMouths=null!==(n=e.numberOfMouths)&&void 0!==n?n:(()=>{throw new Error("numberOfMouths cannot be null or undefined")})(),this.length=null!==(r=e.length)&&void 0!==r?r:(()=>{throw new Error("length cannot be null or undefined")})(),e.numberOfMouths<0)throw new Error("numberOfMouths cannot be less than zero");if(e.length<=0)throw new Error("length cannot be zero or less")}}var S=function(e){return e.IUG="IUG",e.TUG="TUG",e.IUE="IUE",e.TUE="TUE",e.LAP="LAP",e}({}),C=function(e){return e.C05="C05",e.C1="C1",e.C2="C2",e.C3="C3",e.C4="C4",e.C6="C6",e.C10="C10",e.C16="C16",e.C20="C20",e.C25="C25",e.C32="C32",e.C40="C40",e.C50="C50",e.C63="C63",e}({});class R{static get protections(){return[{protectionType:C.C05,protectionValue:.5},{protectionType:C.C1,protectionValue:1},{protectionType:C.C2,protectionValue:2},{protectionType:C.C3,protectionValue:3},{protectionType:C.C4,protectionValue:4},{protectionType:C.C6,protectionValue:6},{protectionType:C.C10,protectionValue:10},{protectionType:C.C16,protectionValue:16},{protectionType:C.C20,protectionValue:20},{protectionType:C.C25,protectionValue:25},{protectionType:C.C32,protectionValue:32},{protectionType:C.C40,protectionValue:40},{protectionType:C.C50,protectionValue:50},{protectionType:C.C63,protectionValue:63}]}}class w{static get sectionNominals(){return[{circuitType:S.LAP,minSectionNominal:4},{circuitType:S.IUG,minSectionNominal:1.5},{circuitType:S.TUG,minSectionNominal:2.5},{circuitType:S.IUE,minSectionNominal:2.5},{circuitType:S.TUE,minSectionNominal:2.5}]}}class y{constructor(e){var t,i,n,r;if(this.type=null!==(t=e.type)&&void 0!==t?t:(()=>{throw new Error("type cannot be null or undefined")})(),this.environment=null!==(i=e.environment)&&void 0!==i?i:(()=>{throw new Error("environment cannot be null or undefined")})(),this.width=null!==(n=e.width)&&void 0!==n?n:(()=>{throw new Error("width cannot be null or undefined")})(),this.length=null!==(r=e.length)&&void 0!==r?r:(()=>{throw new Error("length cannot be null or undefined")})(),e.width<=0)throw new Error("width cannot be zero or less");if(e.length<=0)throw new Error("length cannot be zero or less");this.artifacts=e.artifacts,e.artifacts||(this.artifacts=[])}}class D{static get tecnicalFeatures(){return[{nominalSection:.75,allowableCurrentIntensityInPipes:8},{nominalSection:1,allowableCurrentIntensityInPipes:10.5},{nominalSection:1.5,allowableCurrentIntensityInPipes:13},{nominalSection:2.5,allowableCurrentIntensityInPipes:18},{nominalSection:4,allowableCurrentIntensityInPipes:25},{nominalSection:6,allowableCurrentIntensityInPipes:32},{nominalSection:10,allowableCurrentIntensityInPipes:44},{nominalSection:16,allowableCurrentIntensityInPipes:59},{nominalSection:25,allowableCurrentIntensityInPipes:77},{nominalSection:35,allowableCurrentIntensityInPipes:96},{nominalSection:50,allowableCurrentIntensityInPipes:117},{nominalSection:70,allowableCurrentIntensityInPipes:149},{nominalSection:95,allowableCurrentIntensityInPipes:180},{nominalSection:120,allowableCurrentIntensityInPipes:208}]}}class v{static get tensionDrops(){return[{circuitType:S.LAP,maxTensionDrop:1},{circuitType:S.IUG,maxTensionDrop:2},{circuitType:S.TUG,maxTensionDrop:2},{circuitType:S.IUE,maxTensionDrop:2},{circuitType:S.TUE,maxTensionDrop:2}]}}class N{constructor(e){this._circuit=e}getCircuit(){return this._circuit}isLap(){return this._circuit.circuitType==S.LAP}maxNumberOfMouths(){switch(this._circuit.circuitType){case S.IUG:case S.TUG:return 15;case S.IUE:case S.TUE:return 12;default:return 0}}powerLoad(){switch(this._circuit.circuitType){case S.IUG:return 810;case S.TUG:return 1980;case S.IUE:case S.TUE:return 2970;default:return 0}}factorLoad(){switch(this._circuit.circuitType){case S.IUG:return.66;case S.TUG:case S.IUE:case S.TUE:return 1;default:return 0}}circuitSubtotal(){return parseFloat((this.powerLoad()*this.factorLoad()).toFixed(2))}currentCalculated(){return parseFloat((this.powerLoad()/198).toFixed(2))}}class E{constructor(e){var t,i,n,r,o,c;if(this.name=null!==(t=e.name)&&void 0!==t?t:(()=>{throw new Error("name cannot be null or undefined")})(),this.powerConsumption=null!==(i=e.powerConsumption)&&void 0!==i?i:(()=>{throw new Error("powerConsumption cannot be null or undefined")})(),this.summerDay=null!==(n=e.summerDay)&&void 0!==n?n:(()=>{throw new Error("summerDay cannot be null or undefined")})(),this.summerNight=null!==(r=e.summerNight)&&void 0!==r?r:(()=>{throw new Error("summerNight cannot be null or undefined")})(),this.winterDay=null!==(o=e.winterDay)&&void 0!==o?o:(()=>{throw new Error("winterDay cannot be null or undefined")})(),this.winterNight=null!==(c=e.winterNight)&&void 0!==c?c:(()=>{throw new Error("winterNight cannot be null or undefined")})(),e.powerConsumption<=0)throw new Error("powerConsumption cannot be zero or less")}}class I{constructor(e){this._surface=e}getSurface(){return this._surface}totalConsumition(){return this._surface.artifacts.reduce((e,t)=>(t.summerDay&&(e.summerDayConsumptionDetermined+=t.powerConsumption),t.summerNight&&(e.summerNightConsumptionDetermined+=t.powerConsumption),t.winterDay&&(e.winterDayConsumptionDetermined+=t.powerConsumption),t.winterNight&&(e.winterNightConsumptionDetermined+=t.powerConsumption),e),{summerDayConsumptionDetermined:0,summerNightConsumptionDetermined:0,winterDayConsumptionDetermined:0,winterNightConsumptionDetermined:0})}addArtifact(e,t,i,n,r,o){if(this.getArtifact(e))throw new Error("Artifact already exists");const c=new E({name:e,powerConsumption:t,summerDay:i,summerNight:n,winterDay:r,winterNight:o});this._surface.artifacts.push(c)}udpateArtifact(e){if(!this.existArtifact(e.name))throw new Error("Surface does not exist");let t=this.getIndexArtifact(e.name);this._surface.artifacts[t]=e}deleteArtifact(e){if(!this.existArtifact(e))throw new Error("Circuit does not exist");const t=this.getIndexArtifact(e);this._surface.artifacts.splice(t,1)}getArtifact(e){return this._surface.artifacts.find(t=>t.name==e)}existArtifact(e){return this._surface.artifacts.some(t=>t.name==e)}getIndexArtifact(e){return this._surface.artifacts.findIndex(t=>t.name==e)}}class A{constructor(e,t){this._projectService=t,this._project=this._projectService.getProjectById(e)}surfaceManager(e){let t=this.getSurface(e);return new I(t)}circuitManager(e){let t=this.getCircuit(e);return new N(t)}getProject(){return this._project}addSurface(e,t,i,n){if(this.getSurface(t))throw new Error("Surface already exists");const r=new y({type:e,environment:t,width:i,length:n});this._project.surfaces.push(r),this.updateProject()}udpateSurface(e){if(!this.existSurface(e.environment))throw new Error("Surface does not exist");let t=this.getIndexSurface(e.environment);this._project.surfaces[t]=e,this.updateProject()}deleteSurface(e){if(!this.existSurface(e))throw new Error("Surface does not exist");const t=this.getIndexSurface(e);this._project.surfaces.splice(t,1),this.updateProject()}getSurface(e){return this._project.surfaces.find(t=>t.environment===e)}existSurface(e){return this._project.surfaces.some(t=>t.environment===e)}getIndexSurface(e){return this._project.surfaces.findIndex(t=>t.environment===e)}addCircuit(e,t,i,n){if(this.getCircuit(e))throw new Error("Circuit already exists");const r=new g({name:e,circuitType:t,numberOfMouths:i,length:n});if(t===S.LAP)this._project.circuits.push(r);else{const e=this._project.circuits.findIndex(e=>e.circuitType===S.LAP);-1===e?this._project.circuits.push(r):this._project.circuits.splice(e,0,r)}this._project.circuits.push(r),this.updateProject()}udpateCircuit(e){if(!this.existCircuit(e.name))throw new Error("Circuit does not exist");let t=this.getIndexCircuit(e.name);this._project.circuits[t]=e,this.updateProject()}deleteCircuit(e){if(!this.existCircuit(e))throw new Error("Circuit does not exist");const t=this.getIndexCircuit(e);this._project.circuits.splice(t,1),this.updateProject()}getCircuit(e){return this._project.circuits.find(t=>t.name===e)}existCircuit(e){return this._project.circuits.some(t=>t.name===e)}getIndexCircuit(e){return this._project.circuits.findIndex(t=>t.name===e)}totalSurfaceCovered(){return this._project.surfaces.reduce((e,t)=>t.type==h.Covered?e+parseFloat((t.width*t.length).toFixed(2)):e+0,0)}totalSurfaceSemiCovered(){return this._project.surfaces.reduce((e,t)=>t.type==h.SemiCovered?e+parseFloat((t.width*t.length).toFixed(2)):e+0,0)}totalSurface(){return this.totalSurfaceCovered()+this.totalSurfaceSemiCovered()/2}apparentPower(){let e=this.calculateMaximumConsumptionDetermined();return parseFloat((e/.9/1e3).toFixed(2))}electrificationDegree(){return this.totalSurface()<=60&&this.apparentPower()<=3.7?f.Minimal:this.totalSurface()<=130&&this.apparentPower()<=7?f.Medium:this.totalSurface()<=200&&this.apparentPower()<=11?f.High:f.Upper}simultaneityCoefficientDetermined(){switch(this.electrificationDegree()){case f.Minimal:return 1;case f.Medium:return.9;case f.High:return.8;case f.Upper:return.7;default:return 0}}circuitsByelectrificationDegree(){let e=[];switch(this.electrificationDegree()){case f.Minimal:case f.Medium:e.push(S.IUG),e.push(S.TUG);break;case f.High:default:e.push(S.IUG),e.push(S.IUG),e.push(S.TUG),e.push(S.TUG),e.push(S.TUE)}return e}calculateMaximumConsumptionDetermined(){let e=0,t=this.calculateAllSurfaceConsumption();return t.summerDayConsumptionDetermined>=e&&(e=t.summerDayConsumptionDetermined),t.summerNightConsumptionDetermined>=e&&(e=t.summerNightConsumptionDetermined),t.winterDayConsumptionDetermined>=e&&(e=t.winterDayConsumptionDetermined),t.winterNightConsumptionDetermined>=e&&(e=t.winterNightConsumptionDetermined),e}circuitLAPTotal(){let e=this._project.circuits.filter(e=>e.circuitType!=S.LAP).reduce((e,t)=>{let i=this.circuitManager(t.name);return e+parseFloat((i.powerLoad()*i.factorLoad()).toFixed(2))},0);return Math.ceil(parseFloat((e*this.simultaneityCoefficientDetermined()).toFixed(2)))}currentCalculatedLAP(){return parseFloat((this.circuitLAPTotal()/198).toFixed(2))}calcuteTensionDrop(e,t,i){let n=Math.pow(220,2);return parseFloat((200*i*e/(47.5*n*t)).toFixed(2))}validateNominalSection(e,t,i,n,r,o){let c=n,a=w.sectionNominals.find(e=>e.circuitType==t);if(o&&t==S.LAP){const o=e.findIndex(e=>e.nominalSection==c);if(o>0&&n>a.minSectionNominal)return this.validateNominalSection(e,t,i,e[o-1].nominalSection,r,!1)}if(this.calcuteTensionDrop(i,n,r)>=v.tensionDrops.find(e=>e.circuitType==t).maxTensionDrop){let o=e.filter(e=>e.nominalSection>n);return this.validateNominalSection(o,t,i,o[0].nominalSection,r,!1)}return n}calculateProtection(e,t=!1){let i=e;return R.protections.find(t?e=>i<=e.protectionValue:e=>i<e.protectionValue)}nominalSectionByCurrentIntensity(e){return D.tecnicalFeatures.find(t=>e<=t.allowableCurrentIntensityInPipes).nominalSection}calculateAllSurfaceConsumption(){return this._project.surfaces.reduce((e,t)=>{new y(t);let i=this.surfaceManager(t.environment);return e.summerDayConsumptionDetermined+=i.totalConsumition().summerDayConsumptionDetermined,e.summerNightConsumptionDetermined+=i.totalConsumition().summerNightConsumptionDetermined,e.winterDayConsumptionDetermined+=i.totalConsumition().winterDayConsumptionDetermined,e.winterNightConsumptionDetermined+=i.totalConsumition().winterNightConsumptionDetermined,e},{summerDayConsumptionDetermined:0,summerNightConsumptionDetermined:0,winterDayConsumptionDetermined:0,winterNightConsumptionDetermined:0})}updateProject(){this._projectService.updateProject(this._project)}}function M(e,t){if(1&e){const e=a.Tb();a.Sb(0,"button",15),a.Zb("click",(function(){return a.nc(e),a.bc().cleanForm()})),a.xc(1,"Cancel"),a.Rb()}}function x(e,t){if(1&e){const e=a.Tb();a.Sb(0,"li",17),a.Nb(1,"input",18),a.Nb(2,"input",19),a.Nb(3,"input",20),a.Nb(4,"input",21),a.Sb(5,"button",22),a.Zb("click",(function(){a.nc(e);const i=t.$implicit;return a.bc(2).editSurface(i.environment)})),a.xc(6,"Edit"),a.Rb(),a.Sb(7,"button",23),a.Zb("click",(function(){a.nc(e);const i=t.$implicit;return a.bc(2).deleteSurface(i.environment)})),a.xc(8,"Delete"),a.Rb(),a.Sb(9,"a",3),a.xc(10,"Artifacts"),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=a.bc(2);a.Bb(1),a.hc("value",e.environment),a.Bb(1),a.hc("value",e.width),a.Bb(1),a.hc("value",e.length),a.Bb(1),a.hc("value",(e.width*e.length).toFixed(2)),a.Bb(5),a.hc("routerLink","../../artifacts/"+i.project().id+"/"+e.environment)}}function O(e,t){if(1&e&&(a.Sb(0,"nb-card",2),a.Sb(1,"nb-card-header"),a.xc(2,"Surfaces Covered"),a.Rb(),a.Sb(3,"nb-card-body"),a.Sb(4,"ul"),a.vc(5,x,11,5,"li",16),a.Rb(),a.Rb(),a.Rb()),2&e){const e=a.bc();a.Bb(5),a.hc("ngForOf",e.coveredSurfaces())}}function P(e,t){if(1&e){const e=a.Tb();a.Sb(0,"li",17),a.Nb(1,"input",18),a.Nb(2,"input",24),a.Nb(3,"input",25),a.Nb(4,"input",21),a.Sb(5,"button",22),a.Zb("click",(function(){a.nc(e);const i=t.$implicit;return a.bc(2).editSurface(i.environment)})),a.xc(6,"Edit"),a.Rb(),a.Sb(7,"button",23),a.Zb("click",(function(){a.nc(e);const i=t.$implicit;return a.bc(2).deleteSurface(i.environment)})),a.xc(8,"Delete"),a.Rb(),a.Sb(9,"a",3),a.xc(10,"Artifacts"),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=a.bc(2);a.Bb(1),a.hc("value",e.environment),a.Bb(1),a.hc("value",e.width),a.Bb(1),a.hc("value",e.length),a.Bb(1),a.hc("value",(e.width*e.length).toFixed(2)),a.Bb(5),a.hc("routerLink","../../artifacts/"+i.project().id+"/"+e.environment)}}function j(e,t){if(1&e&&(a.Sb(0,"nb-card",2),a.Sb(1,"nb-card-header"),a.xc(2,"Surfaces Semi Covered"),a.Rb(),a.Sb(3,"nb-card-body"),a.Sb(4,"ul"),a.vc(5,P,11,5,"li",16),a.Rb(),a.Rb(),a.Rb()),2&e){const e=a.bc();a.Bb(5),a.hc("ngForOf",e.semiCoveredSurfaces())}}function T(e,t){if(1&e&&(a.Sb(0,"span"),a.Sb(1,"a",44),a.xc(2,"Circuits"),a.Rb(),a.Rb()),2&e){const e=a.bc(2);a.Bb(1),a.hc("routerLink","../../circuits/"+e.project().id)}}function B(e,t){if(1&e&&(a.Sb(0,"div",45),a.Sb(1,"div",46),a.Nb(2,"input",47),a.Rb(),a.Rb()),2&e){const e=t.$implicit;a.Bb(2),a.hc("placeholder",e)("value",e)}}function F(e,t){if(1&e&&(a.Sb(0,"nb-card",26),a.Sb(1,"nb-card-header"),a.xc(2,"Totals"),a.Rb(),a.Sb(3,"nb-card-body"),a.Sb(4,"div",27),a.Sb(5,"div",28),a.Sb(6,"div",29),a.Sb(7,"div",28),a.Sb(8,"span"),a.xc(9,"Covered Surface: "),a.Rb(),a.Rb(),a.Sb(10,"div",30),a.Nb(11,"input",31),a.Rb(),a.Rb(),a.Sb(12,"div",29),a.Sb(13,"div",28),a.Sb(14,"span",32),a.xc(15,"Semi Covered Surface: "),a.Rb(),a.Rb(),a.Sb(16,"div",30),a.Nb(17,"input",33),a.Rb(),a.Rb(),a.Sb(18,"div",29),a.Sb(19,"div",28),a.Sb(20,"span",32),a.xc(21,"Semi Covered Surface 50%: "),a.Rb(),a.Rb(),a.Sb(22,"div",30),a.Nb(23,"input",34),a.Rb(),a.Rb(),a.Sb(24,"div",29),a.Sb(25,"div",28),a.Sb(26,"span",32),a.xc(27,"Total Surface [m2]: "),a.Rb(),a.Rb(),a.Sb(28,"div",30),a.Nb(29,"input",21),a.Rb(),a.Rb(),a.Sb(30,"div",29),a.Sb(31,"div",28),a.Sb(32,"span",32),a.xc(33,"Maximum Consumption Determined [W]: "),a.Rb(),a.Rb(),a.Sb(34,"div",30),a.Nb(35,"input",35),a.Rb(),a.Rb(),a.Sb(36,"div",29),a.Sb(37,"div",28),a.Sb(38,"span",32),a.xc(39,"Apparent Power [KVA]: "),a.Rb(),a.Rb(),a.Sb(40,"div",30),a.Nb(41,"input",36),a.Rb(),a.Rb(),a.Sb(42,"div",29),a.Sb(43,"div",28),a.Sb(44,"span",32),a.xc(45,"Degree of electrification: "),a.Rb(),a.Rb(),a.Sb(46,"div",30),a.Nb(47,"input",37),a.Rb(),a.Rb(),a.Rb(),a.Sb(48,"div",30),a.Sb(49,"div",0),a.Sb(50,"div",1),a.Sb(51,"nb-card",38),a.Sb(52,"nb-card-header"),a.xc(53,"Degrees of electrification"),a.Rb(),a.Sb(54,"nb-card-body"),a.Sb(55,"table"),a.Sb(56,"thead"),a.Sb(57,"tr"),a.Sb(58,"th",39),a.xc(59,"Degree of electrification"),a.Rb(),a.Sb(60,"th",40),a.xc(61,"Surface (Application limit)"),a.Rb(),a.Sb(62,"th",41),a.xc(63,"Calculated maximum simultaneous power demand (only to determine the degree of electrification)"),a.Rb(),a.Rb(),a.Rb(),a.Sb(64,"tbody"),a.Sb(65,"tr"),a.Sb(66,"td"),a.xc(67," Minimal "),a.Rb(),a.Sb(68,"td"),a.xc(69," <= 60 m2 "),a.Rb(),a.Sb(70,"td"),a.xc(71," <= 3,7 kVA "),a.Rb(),a.Rb(),a.Sb(72,"tr"),a.Sb(73,"td"),a.xc(74," Medium "),a.Rb(),a.Sb(75,"td"),a.xc(76," > 60 m2 && <= 130 m2 "),a.Rb(),a.Sb(77,"td"),a.xc(78," <= 7 kVA "),a.Rb(),a.Rb(),a.Sb(79,"tr"),a.Sb(80,"td"),a.xc(81," High "),a.Rb(),a.Sb(82,"td"),a.xc(83," > 130 m2 && <= 200 m2 "),a.Rb(),a.Sb(84,"td"),a.xc(85," <= 11 kVA "),a.Rb(),a.Rb(),a.Sb(86,"tr"),a.Sb(87,"td"),a.xc(88," Upper "),a.Rb(),a.Sb(89,"td"),a.xc(90," > 200 m2 "),a.Rb(),a.Sb(91,"td"),a.xc(92," > 11 kVA "),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(93,"div",0),a.Sb(94,"div",1),a.Sb(95,"nb-card",38),a.Sb(96,"nb-card-header"),a.xc(97," Minimal circuits according to degree of electrification "),a.vc(98,T,3,1,"span",42),a.Rb(),a.Sb(99,"nb-card-body",17),a.vc(100,B,3,2,"div",43),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e){const e=a.bc();a.Bb(11),a.hc("value",e.totals.totalSurfaceCovered),a.Bb(6),a.hc("value",e.totals.totalSurfaceSemiCovered),a.Bb(6),a.hc("value",e.totals.totalSurfaceSemiCovered/2),a.Bb(6),a.hc("value",e.totals.totalSurface),a.Bb(6),a.hc("value",e.totals.calculateMaximumConsumptionDetermined),a.Bb(6),a.hc("value",e.totals.apparentPower),a.Bb(6),a.hc("value",e.totals.electrificationDegree),a.Bb(18),a.sc(e.isMinimalElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),a.Bb(7),a.sc(e.isMediumElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),a.Bb(7),a.sc(e.isHighElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),a.Bb(7),a.sc(e.isUpperElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),a.Bb(12),a.hc("ngIf",(null==e.project().surfaces?null:e.project().surfaces.length)>0),a.Bb(2),a.hc("ngForOf",e.circuitsByelectrificationDegree)}}let _=(()=>{class e{constructor(e,t,i){this.projectsService=e,this.fb=t,this.activatedRoute=i}ngOnInit(){this.surfaceForm=this.fb.group({type:["",o.r.required],environment:["",o.r.required],width:["",o.r.required],length:["",o.r.required]}),this._projectManager=new A(parseInt(this.activatedRoute.snapshot.params.projectId),this.projectsService),this.isEdit=!1}project(){return this._projectManager.getProject()}get circuitsByelectrificationDegree(){return this._projectManager.circuitsByelectrificationDegree()}get totals(){return{totalSurfaceCovered:this._projectManager.totalSurfaceCovered(),totalSurfaceSemiCovered:this._projectManager.totalSurfaceSemiCovered(),totalSurface:this._projectManager.totalSurface(),calculateMaximumConsumptionDetermined:this._projectManager.calculateMaximumConsumptionDetermined(),apparentPower:this._projectManager.apparentPower(),electrificationDegree:this._projectManager.electrificationDegree()}}saveSurface(){if(this.surfaceForm.invalid)alert("the form is invalid");else{if(this.isEdit){let e=this.surfaceForm.value;this.selectedSurface.type=e.type,this.selectedSurface.width=e.width,this.selectedSurface.length=e.length,this._projectManager.udpateSurface(this.selectedSurface)}else{let e=this.surfaceForm.value;this._projectManager.addSurface(e.type,e.environment,e.width,e.length)}this.cleanForm()}}cleanForm(){this.isEdit=!1,this.surfaceForm.controls.type.setValue(""),this.surfaceForm.controls.environment.setValue(""),this.surfaceForm.controls.width.setValue(""),this.surfaceForm.controls.length.setValue(""),this._projectManager=new A(this._projectManager.getProject().id,this.projectsService)}editSurface(e){this.selectedSurface=this._projectManager.getSurface(e),this.surfaceForm.patchValue(this.selectedSurface),this.isEdit=!0}deleteSurface(e){this._projectManager.deleteSurface(e),this.projectsService.updateProject(this._projectManager.getProject()),this.cleanForm()}isFormInvalid(){return this.surfaceForm.controls.type.hasError("required")||this.surfaceForm.controls.environment.hasError("required")||this.surfaceForm.controls.width.hasError("required")||this.surfaceForm.controls.length.hasError("required")}coveredSurfaces(){return this._projectManager.getProject().surfaces.filter(e=>e.type==h.Covered)}semiCoveredSurfaces(){return this._projectManager.getProject().surfaces.filter(e=>e.type==h.SemiCovered)}isMinimalElectrificationDegree(){return this._projectManager.electrificationDegree()==f.Minimal}isMediumElectrificationDegree(){return this._projectManager.electrificationDegree()==f.Medium}isHighElectrificationDegree(){return this._projectManager.electrificationDegree()==f.High}isUpperElectrificationDegree(){return this._projectManager.electrificationDegree()==f.Upper}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(s),a.Mb(o.b),a.Mb(r.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["surfaces"]],decls:29,vars:9,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["placeholder","Choose a surface type","formControlName","type"],["value","0"],["value","1"],["nbInput","","formControlName","environment","type","text","placeholder","Environment","maxlength","100",3,"readonly"],["nbInput","","formControlName","width","type","number","placeholder","Width [m]"],["nbInput","","formControlName","length","type","number","placeholder","Length [m]"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","info",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","disabled","","type","text","placeholder","Environment",3,"value"],["nbInput","","disabled","","type","number","placeholder","Width [m]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Length [m]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Surface [m2]",3,"value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["nbInput","","disabled","","type","number","placeholder","Width",3,"value"],["nbInput","","disabled","","type","number","placeholder","Length",3,"value"],["accent","info"],[1,"form-group","row","form-horizontal"],[1,"col-md-5"],[1,"form-group","row"],[1,"col-md-7"],["nbInput","","disabled","","type","number","placeholder","Surface Covered [m2]",3,"value"],[1,"text"],["nbInput","","disabled","","type","number","placeholder","Surface Semi Covered [m2]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Surface Semi Covered %50 [m2]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Maximum Consumption Determined [W]",3,"value"],["nbInput","","disabled","","type","number","placeholder","Apparent Power [KVA]",3,"value"],["nbInput","","disabled","","type","text","placeholder","Apparent Power [KVA]",3,"value"],["accent","danger"],[2,"width","20%"],[2,"width","40%"],[2,"width","60%"],[4,"ngIf"],["class","row inline-form-card",4,"ngFor","ngForOf"],["nbButton","","outline","","status","success",3,"routerLink"],[1,"row","inline-form-card"],[1,"col-md-2"],["nbInput","","disabled","","type","text",3,"placeholder","value"]],template:function(e,t){var i,n;1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"nb-card",2),a.Sb(3,"nb-card-header"),a.xc(4,"Surface "),a.Sb(5,"a",3),a.xc(6,"Back to Proyects"),a.Rb(),a.Rb(),a.Sb(7,"nb-card-body"),a.Sb(8,"form",4),a.Sb(9,"nb-select",5),a.Sb(10,"nb-option",6),a.xc(11,"Covered"),a.Rb(),a.Sb(12,"nb-option",7),a.xc(13,"Semi-Covered"),a.Rb(),a.Rb(),a.Nb(14,"input",8),a.Nb(15,"input",9),a.Nb(16,"input",10),a.Sb(17,"button",11),a.Zb("click",(function(){return t.saveSurface()})),a.xc(18),a.Rb(),a.vc(19,M,2,0,"button",12),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(20,"div",0),a.Sb(21,"div",1),a.vc(22,O,6,1,"nb-card",13),a.Rb(),a.Rb(),a.Sb(23,"div",0),a.Sb(24,"div",1),a.vc(25,j,6,1,"nb-card",13),a.Rb(),a.Rb(),a.Sb(26,"div",0),a.Sb(27,"div",1),a.vc(28,F,101,17,"nb-card",14),a.Rb(),a.Rb()),2&e&&(a.Bb(5),a.hc("routerLink","../../../projects"),a.Bb(3),a.hc("formGroup",t.surfaceForm),a.Bb(6),a.hc("readonly",t.isEdit),a.Bb(3),a.hc("disabled",t.isFormInvalid()),a.Bb(1),a.yc(t.isEdit?"Update Surface":"Save Surface"),a.Bb(1),a.hc("ngIf",t.isEdit),a.Bb(3),a.hc("ngIf",(null==(i=t.coveredSurfaces())?null:i.length)>0),a.Bb(3),a.hc("ngIf",(null==(n=t.semiCoveredSurfaces())?null:n.length)>0),a.Bb(3),a.hc("ngIf",(null==t.project().surfaces?null:t.project().surfaces.length)>0))},directives:[u.j,u.k,u.g,r.f,u.i,o.s,o.k,o.d,u.K,o.j,o.c,u.I,u.v,o.a,o.f,o.n,n.m,n.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}span.text[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}span.text[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),e})();class L{constructor(e){this._artifact=e}getArtifact(){return this._artifact}static get commonArtifacts(){return[{name:"AFEITADORA",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 2200 FRIGOR\xcdAS F/C",powerConsumption:1350,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 3500 FRIGOR\xcdAS F/C",powerConsumption:2150,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 4500 FRIGOR\xcdAS F/C",powerConsumption:2800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 2200 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:877.5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 3500 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:1397.5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"AIRE ACONDICIONADO DE 4500 FRIGOR\xcdAS F/C - INVERTER",powerConsumption:1820,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 120 MM DE DI\xc1METRO",powerConsumption:750,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 140 MM DE DI\xc1METRO",powerConsumption:1250,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 175 MM DE DI\xc1METRO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 200 MM DE DI\xc1METRO",powerConsumption:1800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 215 MM DE DI\xc1METRO",powerConsumption:2110,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE VITROCER\xc1MICA CON HORNALLA DE 220 MM DE DI\xc1METRO",powerConsumption:2350,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE RESISTIVO CON HORNALLA DE 150 MM DE DI\xc1METRO",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ANAFE RESISTIVO CON HORNALLA DE 190 MM DE DI\xc1METRO",powerConsumption:2e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ASPIRADORA",powerConsumption:1200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BATIDORA DE MANO",powerConsumption:300,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BOMBA DE AGUA DE 1/2 HP",powerConsumption:380,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"BOMBA DE AGUA DE 3/4 HP",powerConsumption:570,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CAFETERA DE FILTRO EL\xc9CTRICA",powerConsumption:900,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CALOVENTILADOR CHICO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"CARGADOR DE CELULAR GEN\xc9RICO",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"COMPUTADORA (S\xd3LO LA CPU)",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 80 M3/HORA",powerConsumption:12,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 200 M3/HORA",powerConsumption:20,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"EXTRACTOR DE AIRE PARA COCINA O BA\xd1O - 1200 M3/HORA",powerConsumption:50,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ESTUFA HAL\xd3GENA DE 3 VELAS C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"ESTUFA DE CUARZO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"FREEZER",powerConsumption:250,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA",powerConsumption:150,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA CON FREEZER",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HELADERA CON FREEZER - INVERTER",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HORNO EL\xc9CTRICO DE 25 A 30 LITROS C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"HORNO EL\xc9CTRICO DE 73 LITROS C/TERMOSTATO, PARA EMPOTRAR",powerConsumption:2450,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 11W",powerConsumption:11,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 15W",powerConsumption:15,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA DE BAJO CONSUMO DE 20W",powerConsumption:20,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 100 W",powerConsumption:100,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 40 W",powerConsumption:40,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA HAL\xd3GENA DE 60 W",powerConsumption:60,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 5 W",powerConsumption:5,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 7 W",powerConsumption:7,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 9 W",powerConsumption:9,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"L\xc1MPARA LED DE 12 W",powerConsumption:12,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"LICUADORA",powerConsumption:400,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"MICROONDAS 800 W",powerConsumption:800,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"MINIPIMER",powerConsumption:400,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PARRILLA EL\xc9CTRICA 2000 W",powerConsumption:2e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PAVA EL\xc9CTRICA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PLANCHA PARA ROPA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PLANCHA PARA ROPA A VAPOR",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"PULIDORA",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"RADIO",powerConsumption:15,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SECADOR DE PELO",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SOMMIER C/LEVANTACOLCH\xd3N",powerConsumption:130,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"SPOT DICROICA 50 W",powerConsumption:50,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TELEVISOR DE 42''",powerConsumption:200,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TOSTADORA",powerConsumption:1e3,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"TURBO CALOVENTILADOR CHICO C/TERMOSTATO",powerConsumption:1500,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"VENTILADOR DE MESA CHICO",powerConsumption:55,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1},{name:"VENTILADOR DE PIE GRANDE",powerConsumption:110,summerDay:!1,summerNight:!1,winterDay:!1,winterNight:!1}]}}function k(e,t){if(1&e){const e=a.Tb();a.Sb(0,"li",19),a.Nb(1,"input",20),a.Nb(2,"input",21),a.Sb(3,"nb-toggle",22),a.xc(4,"Consume In Summer Day"),a.Rb(),a.Sb(5,"nb-toggle",22),a.xc(6,"Consume In Summer Night"),a.Rb(),a.Sb(7,"nb-toggle",22),a.xc(8,"Consume In Winter Day"),a.Rb(),a.Sb(9,"nb-toggle",22),a.xc(10,"Consume In Winter Night"),a.Rb(),a.Sb(11,"button",23),a.Zb("click",(function(){a.nc(e);const i=t.$implicit;return a.bc(2).editArtifact(i.name)})),a.xc(12,"Edit"),a.Rb(),a.Sb(13,"button",24),a.Zb("click",(function(){a.nc(e);const i=t.$implicit;return a.bc(2).deleteArtifact(i.name)})),a.xc(14,"Delete"),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=a.bc(2);a.Bb(1),a.hc("value",e.name),a.Bb(1),a.hc("value",e.powerConsumption),a.Bb(1),a.hc("checked",e.summerDay),a.Bb(2),a.hc("checked",e.summerNight),a.Bb(2),a.hc("checked",e.winterDay),a.Bb(2),a.hc("checked",e.winterNight),a.Bb(2),a.hc("disabled",i.isEdit),a.Bb(2),a.hc("disabled",i.isEdit)}}function U(e,t){if(1&e&&(a.Sb(0,"nb-card",2),a.Sb(1,"nb-card-header"),a.xc(2,"Artifacts"),a.Rb(),a.Sb(3,"nb-card-body"),a.Sb(4,"ul"),a.vc(5,k,15,8,"li",18),a.Rb(),a.Rb(),a.Rb()),2&e){const e=a.bc();a.Bb(5),a.hc("ngForOf",e.artifacts)}}function V(e,t){if(1&e){const e=a.Tb();a.Sb(0,"tr"),a.Sb(1,"td"),a.xc(2),a.Rb(),a.Sb(3,"td"),a.xc(4),a.Rb(),a.Sb(5,"td"),a.Sb(6,"button",25),a.Zb("click",(function(){a.nc(e);const i=t.$implicit;return a.bc().addArtifact(i)})),a.xc(7,"Add"),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=a.bc();a.Bb(2),a.zc(" ",e.name," "),a.Bb(2),a.zc(" ",e.powerConsumption," "),a.Bb(2),a.hc("disabled",i.isEdit)}}let G=(()=>{class e{constructor(e,t,i){this.projectsService=e,this.fb=t,this.activatedRoute=i}ngOnInit(){this.artifactForm=this.fb.group({name:["",o.r.required],powerConsumption:["",o.r.required],summerDay:[!1,o.r.required],summerNight:[!1,o.r.required],winterDay:[!1,o.r.required],winterNight:[!1,o.r.required]}),this._projectManager=new A(parseInt(this.activatedRoute.snapshot.params.projectId),this.projectsService),this.environment=this.activatedRoute.snapshot.params.environment,this.isEdit=!1}project(){return this._projectManager.getProject()}saveArtifact(){if(this.artifactForm.invalid)alert("the form is invalid");else{let e=this._projectManager.surfaceManager(this.environment);if(this.isEdit)e.udpateArtifact(new E(this.artifactForm.value));else{let t=this.artifactForm.value;e.addArtifact(t.name,t.powerConsumption,t.summerDay,t.summerNight,t.winterDay,t.winterNight)}this._projectManager.udpateSurface(e.getSurface()),this.cleanForm()}}cleanForm(){this.isEdit=!1,this.artifactForm.reset(),this._projectManager=new A(this._projectManager.getProject().id,this.projectsService)}editArtifact(e){let t=this._projectManager.surfaceManager(this.environment);this.selectedArtifact=t.getArtifact(e),this.artifactForm.patchValue(this.selectedArtifact),this.artifactForm.markAsDirty(),this.isEdit=!0}addArtifact(e){this.artifactForm.patchValue(e),this.artifactForm.markAsDirty()}deleteArtifact(e){let t=this._projectManager.surfaceManager(this.environment);t.deleteArtifact(e),this._projectManager.udpateSurface(t.getSurface()),this.cleanForm()}isFormInvalid(){return this.artifactForm.controls.name.hasError("required")||this.artifactForm.controls.powerConsumption.hasError("required")||this.artifactForm.controls.summerDay.hasError("required")||this.artifactForm.controls.summerNight.hasError("required")||this.artifactForm.controls.winterDay.hasError("required")||this.artifactForm.controls.winterNight.hasError("required")}isDirty(){return this.artifactForm.dirty}commonArtifacts(){return L.commonArtifacts}get artifacts(){return new y(this._projectManager.getSurface(this.environment)).artifacts}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(s),a.Mb(o.b),a.Mb(r.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["artifacts"]],decls:43,vars:10,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Name","maxlength","100",3,"readOnly"],["nbInput","","formControlName","powerConsumption","type","number","placeholder","Power Consumption [W]"],["formControlName","summerDay","status","info"],["formControlName","summerNight","status","info"],["formControlName","winterDay","status","info"],["formControlName","winterNight","status","info"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"disabled","click"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","warning"],[2,"width","40%"],[2,"width","20%"],[4,"ngFor","ngForOf"],["class","form-inline",4,"ngFor","ngForOf"],[1,"form-inline"],["nbInput","","disabled","","type","text","placeholder","Name",3,"value"],["nbInput","","disabled","","type","number","placeholder","Power Consumption [W]",3,"value"],["disabled","","status","info",3,"checked"],["nbButton","","outline","","status","primary",3,"disabled","click"],["nbButton","","outline","","status","danger",3,"disabled","click"],["nbButton","","outline","","status","success",3,"disabled","click"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"nb-card",2),a.Sb(3,"nb-card-header"),a.xc(4),a.Sb(5,"a",3),a.xc(6,"Back to Surfaces"),a.Rb(),a.Rb(),a.Sb(7,"nb-card-body"),a.Sb(8,"form",4),a.Nb(9,"input",5),a.Nb(10,"input",6),a.Sb(11,"nb-toggle",7),a.xc(12,"Consume In Summer Day"),a.Rb(),a.Sb(13,"nb-toggle",8),a.xc(14,"Consume In Summer Night"),a.Rb(),a.Sb(15,"nb-toggle",9),a.xc(16,"Consume In Winter Day"),a.Rb(),a.Sb(17,"nb-toggle",10),a.xc(18,"Consume In Winter Night"),a.Rb(),a.Sb(19,"button",11),a.Zb("click",(function(){return t.saveArtifact()})),a.xc(20),a.Rb(),a.Sb(21,"button",12),a.Zb("click",(function(){return t.cleanForm()})),a.xc(22),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(23,"div",0),a.Sb(24,"div",1),a.vc(25,U,6,1,"nb-card",13),a.Rb(),a.Rb(),a.Sb(26,"div",0),a.Sb(27,"div",1),a.Sb(28,"nb-card",14),a.Sb(29,"nb-card-header"),a.xc(30,"Common Artifacts"),a.Rb(),a.Sb(31,"nb-card-body"),a.Sb(32,"table"),a.Sb(33,"thead"),a.Sb(34,"tr"),a.Sb(35,"th",15),a.xc(36,"Artifact Name"),a.Rb(),a.Sb(37,"th",16),a.xc(38,"Power"),a.Rb(),a.Sb(39,"th",16),a.xc(40,"Action"),a.Rb(),a.Rb(),a.Rb(),a.Sb(41,"tbody"),a.vc(42,V,8,3,"tr",17),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.Bb(4),a.zc(" Artifact for environment: ",t.environment," "),a.Bb(1),a.hc("routerLink","../../../surfaces/"+t.project().id),a.Bb(3),a.hc("formGroup",t.artifactForm),a.Bb(1),a.hc("readOnly",t.isEdit),a.Bb(10),a.hc("disabled",t.isFormInvalid()),a.Bb(1),a.yc(t.isEdit?"Update Artifact":"Save Artifact"),a.Bb(1),a.hc("disabled",!t.isDirty()),a.Bb(1),a.yc(t.isEdit?"Cancel":"Clean"),a.Bb(3),a.hc("ngIf",(null==t.artifacts?null:t.artifacts.length)>0),a.Bb(17),a.hc("ngForOf",t.commonArtifacts()))},directives:[u.j,u.k,u.g,r.f,u.i,o.s,o.k,o.d,u.v,o.a,o.j,o.c,o.f,o.n,u.T,n.m,n.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),e})();function H(e,t){if(1&e){const e=a.Tb();a.Sb(0,"button",18),a.Zb("click",(function(){return a.nc(e),a.bc().cleanForm()})),a.xc(1,"Cancel"),a.Rb()}}function W(e,t){if(1&e){const e=a.Tb();a.Sb(0,"li",19),a.Nb(1,"input",30),a.Nb(2,"input",31),a.Nb(3,"input",32),a.Nb(4,"input",33),a.Nb(5,"input",34),a.Nb(6,"input",35),a.Nb(7,"input",36),a.Nb(8,"input",37),a.Nb(9,"input",38),a.Sb(10,"button",39),a.Zb("click",(function(){a.nc(e);const i=t.$implicit;return a.bc(2).editCircuit(i.name)})),a.xc(11,"Edit"),a.Rb(),a.Sb(12,"button",40),a.Zb("click",(function(){a.nc(e);const i=t.$implicit;return a.bc(2).deleteCircuit(i.name)})),a.xc(13,"Delete"),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,n=a.bc(2);var i;a.Bb(1),a.hc("value",e.name),a.Bb(1),a.hc("value",e.circuitType),a.Bb(1),a.hc("status",e.numberOfMouths<=n.maxNumberOfMouths(e.name)?"success":"danger")("value",e.numberOfMouths),a.Bb(1),a.hc("value",e.length),a.Bb(1),a.hc("value",n.powerLoad(e.name)),a.Bb(1),a.hc("value",n.current(e.name)),a.Bb(1),a.hc("value",n.nominalSection(e.name)),a.Bb(1),a.hc("status",n.isValidTension(e.name)?"success":"danger")("value",n.calculateTensionDrop(e.name)),a.Bb(1),a.hc("status",n.isValidProtection(e.name,n.calculateProtection(e.name))?"success":"danger")("value",null==(i=n.calculateProtection(e.name))?null:i.protectionType)}}function q(e,t){if(1&e&&(a.Sb(0,"nb-card",2),a.Sb(1,"nb-card-header"),a.xc(2,"Circuits"),a.Rb(),a.Sb(3,"nb-card-body"),a.Sb(4,"ul"),a.Sb(5,"li",19),a.Nb(6,"input",20),a.Nb(7,"input",21),a.Nb(8,"input",22),a.Nb(9,"input",23),a.Nb(10,"input",24),a.Nb(11,"input",25),a.Nb(12,"input",26),a.Nb(13,"input",27),a.Nb(14,"input",28),a.Rb(),a.Rb(),a.Sb(15,"ul"),a.vc(16,W,14,12,"li",29),a.Rb(),a.Rb(),a.Rb()),2&e){const e=a.bc();a.Bb(16),a.hc("ngForOf",e.project().circuits)}}function z(e,t){if(1&e&&(a.Sb(0,"tr"),a.Sb(1,"td"),a.xc(2),a.Rb(),a.Sb(3,"td"),a.xc(4),a.Rb(),a.Rb()),2&e){const e=t.$implicit;a.Bb(2),a.zc(" ",e.nominalSection," "),a.Bb(2),a.zc(" ",e.allowableCurrentIntensityInPipes," ")}}function Z(e,t){if(1&e&&(a.Sb(0,"tr"),a.Sb(1,"td"),a.xc(2),a.Rb(),a.Sb(3,"td"),a.xc(4),a.Rb(),a.Rb()),2&e){const e=t.$implicit;a.Bb(2),a.zc(" ",e.circuitType," "),a.Bb(2),a.zc(" <= ",e.maxTensionDrop," % ")}}function $(e,t){if(1&e&&(a.Sb(0,"tr"),a.Sb(1,"td"),a.xc(2),a.Rb(),a.Sb(3,"td"),a.xc(4),a.Rb(),a.Rb()),2&e){const e=t.$implicit;a.Bb(2),a.zc(" ",e.circuitType," "),a.Bb(2),a.zc(" >= ",e.minSectionNominal," mm2 ")}}function J(e,t){if(1&e&&(a.Sb(0,"nb-card",41),a.Sb(1,"nb-card-header"),a.xc(2,"References"),a.Rb(),a.Sb(3,"nb-card-body"),a.Sb(4,"div",42),a.Sb(5,"div",1),a.Sb(6,"nb-card",43),a.Sb(7,"nb-card-header"),a.xc(8,"Number of Mouths"),a.Rb(),a.Sb(9,"nb-card-body"),a.Sb(10,"table"),a.Sb(11,"thead"),a.Sb(12,"tr"),a.Sb(13,"th",44),a.xc(14,"Circuit Type"),a.Rb(),a.Sb(15,"th",44),a.xc(16,"Designation"),a.Rb(),a.Sb(17,"th",44),a.xc(18,"Maximum Number of Mouths"),a.Rb(),a.Sb(19,"th",44),a.xc(20,"Power Load"),a.Rb(),a.Sb(21,"th",44),a.xc(22,"Factor Load"),a.Rb(),a.Rb(),a.Rb(),a.Sb(23,"tbody"),a.Sb(24,"tr"),a.Sb(25,"td"),a.xc(26),a.Rb(),a.Sb(27,"td"),a.xc(28," General purpose lighting "),a.Rb(),a.Sb(29,"td"),a.xc(30," 15 "),a.Rb(),a.Sb(31,"td"),a.xc(32," 810 "),a.Rb(),a.Sb(33,"td"),a.xc(34," 0,66 "),a.Rb(),a.Rb(),a.Sb(35,"tr"),a.Sb(36,"td"),a.xc(37),a.Rb(),a.Sb(38,"td"),a.xc(39," General purpose sockets "),a.Rb(),a.Sb(40,"td"),a.xc(41," 15 "),a.Rb(),a.Sb(42,"td"),a.xc(43," 1980 "),a.Rb(),a.Sb(44,"td"),a.xc(45," 1 "),a.Rb(),a.Rb(),a.Sb(46,"tr"),a.Sb(47,"td"),a.xc(48),a.Rb(),a.Sb(49,"td"),a.xc(50," Special use lighting "),a.Rb(),a.Sb(51,"td"),a.xc(52," 12 "),a.Rb(),a.Sb(53,"td"),a.xc(54," 1980 "),a.Rb(),a.Sb(55,"td"),a.xc(56," 1 "),a.Rb(),a.Rb(),a.Sb(57,"tr"),a.Sb(58,"td"),a.xc(59),a.Rb(),a.Sb(60,"td"),a.xc(61," Special purpose sockets "),a.Rb(),a.Sb(62,"td"),a.xc(63," 12 "),a.Rb(),a.Sb(64,"td"),a.xc(65," 1980 "),a.Rb(),a.Sb(66,"td"),a.xc(67," 1 "),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(68,"div",42),a.Sb(69,"div",1),a.Sb(70,"nb-card",45),a.Sb(71,"nb-card-header"),a.xc(72,"Simultaneity Coefficient"),a.Rb(),a.Sb(73,"nb-card-body"),a.Sb(74,"table"),a.Sb(75,"thead"),a.Sb(76,"tr"),a.Sb(77,"th",44),a.xc(78,"Electrification Degree"),a.Rb(),a.Sb(79,"th",44),a.xc(80,"Simultaneity Coefficient"),a.Rb(),a.Rb(),a.Rb(),a.Sb(81,"tbody"),a.Sb(82,"tr"),a.Sb(83,"td"),a.xc(84),a.Rb(),a.Sb(85,"td"),a.xc(86," 1 "),a.Rb(),a.Rb(),a.Sb(87,"tr"),a.Sb(88,"td"),a.xc(89),a.Rb(),a.Sb(90,"td"),a.xc(91," 0,9 "),a.Rb(),a.Rb(),a.Sb(92,"tr"),a.Sb(93,"td"),a.xc(94),a.Rb(),a.Sb(95,"td"),a.xc(96," 0,8 "),a.Rb(),a.Rb(),a.Sb(97,"tr"),a.Sb(98,"td"),a.xc(99),a.Rb(),a.Sb(100,"td"),a.xc(101," 0,7 "),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(102,"div",42),a.Sb(103,"div",1),a.Sb(104,"nb-card",46),a.Sb(105,"nb-card-header"),a.xc(106,"Technical Features"),a.Rb(),a.Sb(107,"nb-card-body"),a.Sb(108,"table"),a.Sb(109,"thead"),a.Sb(110,"tr"),a.Sb(111,"th",44),a.xc(112,"Nominal Section"),a.Rb(),a.Sb(113,"th",44),a.xc(114,"Allowable CurrentIntensity In Pipes"),a.Rb(),a.Rb(),a.Rb(),a.Sb(115,"tbody"),a.vc(116,z,5,2,"tr",47),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(117,"div",42),a.Sb(118,"div",1),a.Sb(119,"nb-card",46),a.Sb(120,"nb-card-header"),a.xc(121,"Tension Drops"),a.Rb(),a.Sb(122,"nb-card-body"),a.Sb(123,"table"),a.Sb(124,"thead"),a.Sb(125,"tr"),a.Sb(126,"th",44),a.xc(127,"Circuit Type"),a.Rb(),a.Sb(128,"th",44),a.xc(129,"[e%]"),a.Rb(),a.Rb(),a.Rb(),a.Sb(130,"tbody"),a.vc(131,Z,5,2,"tr",47),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(132,"div",42),a.Sb(133,"div",1),a.Sb(134,"nb-card",46),a.Sb(135,"nb-card-header"),a.xc(136,"Nominal Sections"),a.Rb(),a.Sb(137,"nb-card-body"),a.Sb(138,"table"),a.Sb(139,"thead"),a.Sb(140,"tr"),a.Sb(141,"th",44),a.xc(142,"Circuit Type"),a.Rb(),a.Sb(143,"th",44),a.xc(144,"Nominal Section"),a.Rb(),a.Rb(),a.Rb(),a.Sb(145,"tbody"),a.vc(146,$,5,2,"tr",47),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e){const e=a.bc();a.Bb(26),a.zc(" ",e.circuitType("IUG")," "),a.Bb(11),a.zc(" ",e.circuitType("TUG")," "),a.Bb(11),a.zc(" ",e.circuitType("IUE")," "),a.Bb(11),a.zc(" ",e.circuitType("TUE")," "),a.Bb(23),a.sc(e.isMinimalElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),a.Bb(2),a.zc(" ",e.electrificationDegree("Minimal")," "),a.Bb(3),a.sc(e.isMediumElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),a.Bb(2),a.zc(" ",e.electrificationDegree("Medium")," "),a.Bb(3),a.sc(e.isHighElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),a.Bb(2),a.zc(" ",e.electrificationDegree("High")," "),a.Bb(3),a.sc(e.isUpperElectrificationDegree()?"color: #00d68f; border-color: #00d68f; background-color: rgba(0, 214, 143, 0.08)":""),a.Bb(2),a.zc(" ",e.electrificationDegree("Upper")," "),a.Bb(17),a.hc("ngForOf",e.technicalFeatures()),a.Bb(15),a.hc("ngForOf",e.tensionDrops()),a.Bb(15),a.hc("ngForOf",e.sectionNominals())}}const K=[{path:"",component:p},{path:"surfaces/:projectId",component:_},{path:"circuits/:projectId",component:(()=>{class e{constructor(e,t,i){this.projectsService=e,this.fb=t,this.activatedRoute=i}ngOnInit(){this.circuitForm=this.fb.group({name:["",o.r.required],circuitType:["",o.r.required],numberOfMouths:["",o.r.required],length:["",o.r.required]}),this._projectManager=new A(parseInt(this.activatedRoute.snapshot.params.projectId),this.projectsService),this.isEdit=!1;let e=R.protections.find(e=>e.protectionType==C.C05);this.maxProtectionCalculated=e}project(){return this._projectManager.getProject()}maxNumberOfMouths(e){return this._projectManager.circuitManager(e).maxNumberOfMouths()}saveCircuit(){if(this.circuitForm.invalid)alert("the form is invalid");else{if(this.isEdit){let e=this.circuitForm.value;this.selectedCircuit.circuitType=e.circuitType,this.selectedCircuit.numberOfMouths=e.numberOfMouths,this.selectedCircuit.length=e.length,this._projectManager.udpateCircuit(new g(this.selectedCircuit))}else{let e=this.circuitForm.value;this._projectManager.addCircuit(e.name,e.circuitType,e.numberOfMouths,e.length)}this.cleanForm()}}cleanForm(){this.isEdit=!1,this.circuitForm.controls.name.setValue(""),this.circuitForm.controls.circuitType.setValue(""),this.circuitForm.controls.numberOfMouths.setValue(""),this.circuitForm.controls.length.setValue(""),this._projectManager=new A(this._projectManager.getProject().id,this.projectsService)}editCircuit(e){this.selectedCircuit=this._projectManager.getCircuit(e),this.circuitForm.patchValue(this.selectedCircuit),this.isEdit=!0}deleteCircuit(e){this._projectManager.deleteCircuit(e),this.cleanForm()}isFormInvalid(){return this.circuitForm.controls.name.hasError("required")||this.circuitForm.controls.circuitType.hasError("required")||this.circuitForm.controls.numberOfMouths.hasError("required")||this.circuitForm.controls.length.hasError("required")}isCircuitTypeEditable(){return this.isEdit&&this.circuitForm.controls.circuitType.value!=S.LAP}circuitType(e){return e}powerLoad(e){let t=this._projectManager.circuitManager(e);return t.isLap()?this._projectManager.circuitLAPTotal():t.powerLoad()}current(e){let t=this._projectManager.circuitManager(e);return t.isLap()?this._projectManager.currentCalculatedLAP():t.currentCalculated()}isMinimalElectrificationDegree(){return this._projectManager.electrificationDegree()==f.Minimal}isMediumElectrificationDegree(){return this._projectManager.electrificationDegree()==f.Medium}isHighElectrificationDegree(){return this._projectManager.electrificationDegree()==f.High}isUpperElectrificationDegree(){return this._projectManager.electrificationDegree()==f.Upper}electrificationDegree(e){return e}nominalSection(e){let t=this._projectManager.circuitManager(e);const i=t.getCircuit();let n=this.current(e),r=this._projectManager.nominalSectionByCurrentIntensity(n),o=w.sectionNominals.find(e=>e.circuitType==i.circuitType);return this._projectManager.validateNominalSection(this.technicalFeatures(),i.circuitType,i.length,o&&r>o.minSectionNominal?r:o.minSectionNominal,t.powerLoad(),t.isLap())}technicalFeatures(){return D.tecnicalFeatures}calculateTensionDrop(e){let t=this._projectManager.circuitManager(e),i=this.nominalSection(t.getCircuit().name),n=this.powerLoad(e);const r=t.getCircuit();return this._projectManager.calcuteTensionDrop(r.length,i,n)}tensionDrops(){return v.tensionDrops}tensionDrop(e){let t=v.tensionDrops.find(t=>t.circuitType==e);return(null==t?void 0:t.maxTensionDrop)||0}isValidTension(e){let t=this._projectManager.circuitManager(e);return this.calculateTensionDrop(e)<=this.tensionDrop(t.getCircuit().circuitType)}sectionNominals(){return w.sectionNominals}calculateProtection(e){let t=this._projectManager.circuitManager(e),i=this.current(e),n=this._projectManager.calculateProtection(i,t.isLap());if(!this.isValidProtection(t.getCircuit().name,n)){let e=this.nominalSection(t.getCircuit().name),r=D.tecnicalFeatures.find(t=>t.nominalSection==e);Math.abs(r.allowableCurrentIntensityInPipes-i)<1&&(n=this._projectManager.calculateProtection(r.allowableCurrentIntensityInPipes,t.isLap()))}return t.isLap()&&n.protectionValue<this.maxProtectionCalculated.protectionValue&&(n=this.findNextProtection(t.getCircuit().name,this.maxProtectionCalculated)),!t.isLap()&&this.maxProtectionCalculated.protectionValue<n.protectionValue&&(this.maxProtectionCalculated=n),n}findNextProtection(e,t){let i=this._projectManager.circuitManager(e);if(i.getCircuit().circuitType==S.LAP){let e=R.protections.find(e=>e.protectionValue>this.maxProtectionCalculated.protectionValue);if(this.isValidProtection(i.getCircuit().name,e))return e}return t}isValidProtection(e,t){let i=this._projectManager.circuitManager(e),n=this.nominalSection(i.getCircuit().name),r=this.current(e),o=D.tecnicalFeatures.find(e=>e.nominalSection==n).allowableCurrentIntensityInPipes,c=t;return r<parseFloat((1.13*c.protectionValue).toFixed(2))&&c.protectionValue<=o}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(s),a.Mb(o.b),a.Mb(r.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["circuits"]],decls:32,vars:9,consts:[[1,"row"],[1,"col-md-12"],["accent","info",1,"inline-form-card"],["nbButton","","outline","","status","info",3,"routerLink"],[1,"form-inline",3,"formGroup"],["nbInput","","formControlName","name","type","text","placeholder","Name","maxlength","100",3,"readonly"],["placeholder","Choose a circuit type","formControlName","circuitType"],["value","IUG"],["value","TUG"],["value","IUE"],["value","TUE"],["value","LAP"],["nbInput","","formControlName","numberOfMouths","type","number","placeholder","Number Of Mouths",3,"readonly"],["nbInput","","formControlName","length","type","number","placeholder","Length [m]"],["outline","","nbButton","","status","primary",3,"disabled","click"],["outline","","nbButton","","status","danger",3,"click",4,"ngIf"],["accent","info","class","inline-form-card",4,"ngIf"],["accent","info",4,"ngIf"],["outline","","nbButton","","status","danger",3,"click"],[1,"form-inline"],["nbInput","","disabled","","type","text","value","Name",1,"input-inline-name"],["nbInput","","disabled","","type","text","value","Circuit Type",1,"input-inline-circuit-type"],["nbInput","","disabled","","type","text","placeholder","Number Of Mouths","value","Number Of Mouths",1,"input-inline-mouths"],["nbInput","","disabled","","type","text","placeholder","Length","value","Length [m]",1,"input-inline-length"],["nbInput","","disabled","","type","text","placeholder","Power [W]","value","Power [W]",1,"input-inline-power"],["nbInput","","disabled","","type","text","placeholder","Current [A]","value","Current [A]",1,"input-inline-current"],["nbInput","","disabled","","type","text","placeholder","Section [mm2]","value","Section [mm2]",1,"input-inline-section"],["nbInput","","disabled","","type","text","placeholder","[e%]","value","[e%]",1,"input-inline-tension"],["nbInput","","disabled","","type","text","placeholder","Protection","value","Protection",1,"input-inline-protection"],["class","form-inline",4,"ngFor","ngForOf"],["nbInput","","disabled","","type","text","placeholder","Name",1,"input-inline-name",3,"value"],["nbInput","","disabled","","type","text","placeholder","Circuit Type",1,"input-inline-circuit-type",3,"value"],["nbInput","","readonly","","type","number","placeholder","Number Of Mouths",1,"input-inline-mouths",3,"status","value"],["nbInput","","disabled","","type","number","placeholder","Length",1,"input-inline-length",3,"value"],["nbInput","","disabled","","type","number","placeholder","Power [W]",1,"input-inline-power",3,"value"],["nbInput","","disabled","","type","text","placeholder","Current [A]",1,"input-inline-current",3,"value"],["nbInput","","disabled","","type","text","placeholder","Section [mm2]",1,"input-inline-section",3,"value"],["nbInput","","readonly","","type","text","placeholder","[e%]",1,"input-inline-tension",3,"status","value"],["nbInput","","readonly","","type","text","placeholder","Protection",1,"input-inline-protection",3,"status","value"],["nbButton","","outline","","status","primary",3,"click"],["nbButton","","outline","","status","danger",3,"click"],["accent","info"],[1,"form-group","row","form-horizontal"],["accent","danger"],[2,"width","20%"],["accent","success"],["accent","warning"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"nb-card",2),a.Sb(3,"nb-card-header"),a.xc(4,"Circuit "),a.Sb(5,"a",3),a.xc(6,"Back to Proyects"),a.Rb(),a.Rb(),a.Sb(7,"nb-card-body"),a.Sb(8,"form",4),a.Nb(9,"input",5),a.Sb(10,"nb-select",6),a.Sb(11,"nb-option",7),a.xc(12,"IUG"),a.Rb(),a.Sb(13,"nb-option",8),a.xc(14,"TUG"),a.Rb(),a.Sb(15,"nb-option",9),a.xc(16,"IUE"),a.Rb(),a.Sb(17,"nb-option",10),a.xc(18,"TUE"),a.Rb(),a.Sb(19,"nb-option",11),a.xc(20,"LAP"),a.Rb(),a.Rb(),a.Nb(21,"input",12),a.Nb(22,"input",13),a.Sb(23,"button",14),a.Zb("click",(function(){return t.saveCircuit()})),a.xc(24),a.Rb(),a.vc(25,H,2,0,"button",15),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(26,"div",0),a.Sb(27,"div",1),a.vc(28,q,17,1,"nb-card",16),a.Rb(),a.Rb(),a.Sb(29,"div",0),a.Sb(30,"div",1),a.vc(31,J,147,19,"nb-card",17),a.Rb(),a.Rb()),2&e&&(a.Bb(5),a.hc("routerLink","../../../projects"),a.Bb(3),a.hc("formGroup",t.circuitForm),a.Bb(1),a.hc("readonly",t.isEdit),a.Bb(12),a.hc("readonly",!t.isCircuitTypeEditable()),a.Bb(2),a.hc("disabled",t.isFormInvalid()),a.Bb(1),a.yc(t.isEdit?"Update Circuit":"Save Circuit"),a.Bb(1),a.hc("ngIf",t.isEdit),a.Bb(3),a.hc("ngIf",(null==t.project().circuits?null:t.project().circuits.length)>0),a.Bb(3),a.hc("ngIf",(null==t.project().circuits?null:t.project().circuits.length)>0))},directives:[u.j,u.k,u.g,r.f,u.i,o.s,o.k,o.d,u.v,o.a,o.j,o.c,o.f,u.K,u.I,o.n,n.m,n.l],styles:[".form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}.input-inline-name[_ngcontent-%COMP%]{width:5rem}.input-inline-circuit-type[_ngcontent-%COMP%]{width:7.5rem}.input-inline-mouths[_ngcontent-%COMP%]{width:11rem}.input-inline-length[_ngcontent-%COMP%]{width:7rem}.input-inline-power[_ngcontent-%COMP%]{width:6.8rem}.input-inline-current[_ngcontent-%COMP%]{width:7rem}.input-inline-section[_ngcontent-%COMP%]{width:9rem}.input-inline-tension[_ngcontent-%COMP%]{width:5rem}.input-inline-protection[_ngcontent-%COMP%]{width:7rem}span.text[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}span.text[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #13132b;padding:.5rem 1rem;margin:0 1.5rem 1.5rem 0}"]}),e})()},{path:"artifacts/:projectId/:environment",component:G}];let X=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(K)],r.g]}),e})(),Q=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[n.c,X,u.l,u.P,o.e,u.h,o.p,u.w,u.L,u.U]]}),e})()},dgmN:function(e,t,i){"use strict";i.r(t),i.d(t,"PagesModule",(function(){return m}));var n=i("aceb"),r=i("vTDv"),o=i("tyNb");const c=[{title:"Projects",icon:"home-outline",link:"/pages/projects",home:!0}];var a=i("fXoL"),s=i("mgFL");const u=[{path:"",component:(()=>{class e{constructor(){this.menu=c}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Gb({type:e,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(a.Sb(0,"ngx-one-column-layout"),a.Nb(1,"nb-menu",0),a.Nb(2,"router-outlet"),a.Rb()),2&e&&(a.Bb(1),a.hc("items",t.menu))},directives:[s.a,n.F,o.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}"]}),e})(),children:[{path:"",redirectTo:"projects"},{path:"projects",loadChildren:()=>Promise.resolve().then(i.bind(null,"0B1/")).then(e=>e.ProjectsModule)}]}];let b=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[o.g.forChild(u)],o.g]}),e})();var l=i("0B1/");let m=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[b,r.a,n.G,l.ProjectsModule]]}),e})()}}]);